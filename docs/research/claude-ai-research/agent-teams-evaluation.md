# Claude Code Agent Teams - 이룸 적용 가능성 검토

> **작성일**: 2026-02-08
> **상태**: 검토 완료 (조사 전용, 구현 없음)
> **결론**: 현 시점 도입 보류, 시지푸스 아키텍처 유지

---

## 1. Agent Teams란?

### 1.1 공식 정의 (Anthropic)

Agent Teams는 Claude Code의 **실험적 기능**으로, 여러 Claude Code 인스턴스가 팀으로 협업하여 작업을 수행한다. 팀 리더(Team Lead)가 작업을 분배하고, 팀원(Teammates)이 독립적으로 실행하며, 피어-투-피어 메시징으로 소통한다.

```
활성화 방법:
- 환경변수: CLAUDE_CODE_EXPERIMENTAL_AGENT_TEAMS=1
- 또는 settings.json: "experiments.agentTeams": true
```

### 1.2 핵심 아키텍처

```
                    ┌──────────────┐
                    │  Team Lead   │  (메인 Claude 인스턴스)
                    └──────┬───────┘
                    팀원 생성 & 작업 분배
           ┌───────────┼───────────┐
           ▼           ▼           ▼
   ┌──────────┐ ┌──────────┐ ┌──────────┐
   │Teammate A│ │Teammate B│ │Teammate C│
   └────┬─────┘ └────┬─────┘ └────┬─────┘
        │             │             │
        └─────────────┼─────────────┘
              피어-투-피어 메시징
              (공유 태스크 리스트)
```

### 1.3 핵심 API (공식 문서 기반)

| API                                   | 역할           |
| ------------------------------------- | -------------- |
| `createTeammate(name, initialPrompt)` | 팀원 생성      |
| `sendMessage(teammateName, message)`  | 메시지 전송    |
| `endTeam()`                           | 팀 종료        |
| `getTeamStatus()`                     | 전체 상태 조회 |

### 1.4 디스플레이 모드

| 모드           | 환경                   | 설명                         |
| -------------- | ---------------------- | ---------------------------- |
| **in-process** | 모든 터미널            | 단일 창에서 실행, 로그 출력  |
| **split-pane** | tmux / iTerm2 **전용** | 각 팀원이 별도 패널에서 실행 |

---

## 2. Agent Teams vs Subagents 비교

| 항목          | Agent Teams                 | Subagents (Task 도구)        |
| ------------- | --------------------------- | ---------------------------- |
| **아키텍처**  | 피어-투-피어                | 허브-앤-스포크               |
| **통신**      | 양방향 메시지               | 부모→자식 단방향 (결과 반환) |
| **컨텍스트**  | 각 팀원 독립 컨텍스트       | 부모 컨텍스트에서 파생       |
| **비용**      | 팀원당 독립 세션 (높음)     | 부모 세션 내 실행 (낮음)     |
| **실행 방식** | 장시간 독립 실행            | 단기 태스크 실행 후 반환     |
| **조정 방식** | 공유 태스크 리스트 + 메시지 | 부모가 결과 취합             |
| **세션 지속** | 팀 종료까지 유지            | 태스크 완료 시 종료          |
| **안정성**    | 실험적 (known limitations)  | 프로덕션 안정                |

---

## 3. 이룸 현재 아키텍처 분석

### 3.1 시지푸스 오케스트레이터

이룸은 이미 **허브-앤-스포크 패턴**의 에이전트 시스템을 운용 중이다:

```
sisyphus-adaptive (오케스트레이터)
├── [그룹 A 병렬] yiroom-spec-reviewer + yiroom-ui-validator
├── [그룹 B 병렬] yiroom-code-quality + yiroom-test-writer
└── [그룹 C 병렬] korean-ux-writer + korean-beauty-validator
```

### 3.2 4-tier 복잡도 라우팅

| 총점   | 트랙     | 전략      | 에이전트                     |
| ------ | -------- | --------- | ---------------------------- |
| 0-30   | Quick    | 직접 실행 | 없음                         |
| 31-50  | Light    | 단일      | code-quality                 |
| 51-70  | Standard | 표준      | code-quality + test-writer   |
| 71-100 | Full     | 전체      | 6개 에이전트 전체 파이프라인 |

### 3.3 현재 아키텍처 강점

1. **복잡도 기반 적응**: 단순 작업에 불필요한 오버헤드 없음
2. **순차적 품질 게이트**: 그룹 A 실패 시 그룹 B 실행 안 함 (조기 실패)
3. **비용 효율**: Subagent는 부모 세션 내에서 실행 (독립 세션 비용 없음)
4. **안정성**: Task 도구 기반, 프로덕션 검증됨

---

## 4. Agent Teams 적용 시 장단점

### 4.1 잠재적 장점

| 장점                   | 설명                                    | 이룸 적용 시나리오                                     |
| ---------------------- | --------------------------------------- | ------------------------------------------------------ |
| **피어-투-피어 통신**  | 팀원 간 직접 소통으로 정보 교환         | code-quality가 발견한 이슈를 test-writer에게 직접 전달 |
| **장시간 독립 실행**   | 각 팀원이 복잡한 작업을 독립적으로 수행 | 대규모 리팩토링 시 모듈별 독립 작업                    |
| **공유 태스크 리스트** | 작업 진행 상황을 모든 팀원이 파악       | 팀 전체의 진행률 실시간 공유                           |
| **자기 조정**          | 팀원이 스스로 다음 할 일 판단           | 오케스트레이터 없이 자율적 작업 진행                   |

### 4.2 명확한 단점

| 단점                    | 심각도       | 이룸 영향                                                             |
| ----------------------- | ------------ | --------------------------------------------------------------------- |
| **Windows 환경 비호환** | **CRITICAL** | split-pane 모드 사용 불가 (VS Code Terminal, Windows Terminal 미지원) |
| **실험적 기능**         | **HIGH**     | 세션 재개 불가, 태스크 상태 지연, 중첩 팀 불가                        |
| **토큰 비용 급증**      | **HIGH**     | 각 팀원이 독립 Claude 세션 = 현재 대비 2-5x 비용                      |
| **조기 실패 불가**      | **MEDIUM**   | 시지푸스의 "그룹 A 실패 → 중단" 패턴 구현 어려움                      |
| **복잡도 라우팅 상실**  | **MEDIUM**   | Quick/Light 작업에도 팀 전체가 활성화될 위험                          |
| **팀 리더 고정**        | **LOW**      | 팀 생성 후 리더 변경 불가                                             |

---

## 5. 비용 분석

### 5.1 현재 시지푸스 비용 모델

```
Quick  (0-30):  비용 = 1x (오케스트레이터만)
Light  (31-50): 비용 = 1.3x (오케스트레이터 + 1 서브에이전트)
Standard (51-70): 비용 = 1.6x (오케스트레이터 + 2 서브에이전트)
Full   (71-100): 비용 = 2.5x (오케스트레이터 + 6 서브에이전트)
```

서브에이전트는 부모 세션 내에서 실행되므로 독립 세션 오버헤드가 없다.

### 5.2 Agent Teams 비용 모델 (추정)

```
팀 리더: 1x
팀원 1명당: 0.5-1x (독립 세션 + 메시지 교환)

3명 팀: 2.5-4x
6명 팀: 4-7x
```

### 5.3 비용 비교

| 시나리오                 | 시지푸스 (현재) | Agent Teams (추정) | 차이  |
| ------------------------ | --------------- | ------------------ | ----- |
| 단순 버그 수정           | 1x              | 1x (팀 불필요)     | 동일  |
| 중간 작업 (3 파일)       | 1.3x            | 2.5x (3명 팀)      | +92%  |
| 복잡한 작업 (6 에이전트) | 2.5x            | 5x (6명 팀)        | +100% |

### 5.4 참고: C 컴파일러 프로젝트 (Anthropic 사례)

- 16개 병렬 에이전트, ~$20,000 비용
- 2B 입력 토큰, 140M 출력 토큰
- 100,000줄 Rust 컴파일러 생성
- **이룸 규모에서는 비현실적** (이 프로젝트는 Anthropic 내부 연구용)

---

## 6. 이룸 환경 제약 분석

### 6.1 플랫폼 제약

| 요구사항     | 이룸 현재 환경                 | 호환성            |
| ------------ | ------------------------------ | ----------------- |
| 터미널       | VS Code 통합 터미널 (Windows)  | in-process만 가능 |
| OS           | Windows                        | split-pane 미지원 |
| display 모드 | split-pane 필요 시 tmux/iTerm2 | 미사용            |

**결론**: in-process 모드만 사용 가능. 팀원 상태를 시각적으로 모니터링하기 어려움.

### 6.2 기능 제약 (공식 Known Limitations)

| 제약              | 영향                                                 |
| ----------------- | ---------------------------------------------------- |
| 세션 재개 불가    | 장시간 작업 중 연결 끊기면 전체 작업 손실            |
| 태스크 상태 지연  | 팀원의 실제 진행 상황과 표시 불일치                  |
| 중첩 팀 불가      | 팀 내에서 서브팀 생성 불가 (시지푸스 계층 구조 불가) |
| 세션당 1팀        | 동시에 여러 팀 운영 불가                             |
| 팀원 간 파일 충돌 | 동일 파일 동시 수정 시 merge conflict 발생 가능      |

---

## 7. 적용 시나리오 검토

### 7.1 시나리오 A: 시지푸스를 Agent Teams로 대체

**평가: 부적합**

| 항목          | 이유                                                         |
| ------------- | ------------------------------------------------------------ |
| 복잡도 라우팅 | Agent Teams는 4-tier 라우팅 개념 없음. 모든 작업에 팀 활성화 |
| 조기 실패     | 그룹 A 실패 시 그룹 B 중단 패턴 구현 어려움                  |
| 비용          | 단순 작업에도 독립 세션 비용 발생                            |
| 안정성        | 실험적 기능으로 세션 재개 불가                               |

### 7.2 시나리오 B: 시지푸스 Full 트랙에만 Agent Teams 보조 사용

**평가: 잠재적 가치 있으나 시기상조**

피어-투-피어 통신이 유용한 상황:

- code-quality가 발견한 패턴 위반을 test-writer에게 직접 알려 해당 부분 테스트 강화
- spec-reviewer의 스펙 해석을 ui-validator와 공유

**문제점**:

- 현재 시지푸스 그룹 A→B→C 순차 실행이 이미 정보 전달 역할 수행
- Agent Teams 추가 시 두 개 오케스트레이션 시스템 공존 → 복잡성 증가

### 7.3 시나리오 C: 대규모 마이그레이션 전용 팀

**평가: 향후 검토 가치**

예시: ADR-066 SSOT 통합 같은 대규모 리팩토링 시

```
Team Lead: 마이그레이션 조율
Teammate 1: personal-color V1 마이그레이션
Teammate 2: personal-color V2 마이그레이션
Teammate 3: skin + color-classification 마이그레이션
Teammate 4: oral-health + a11y 마이그레이션
```

**실현 조건**: Agent Teams가 안정화(GA) + 세션 재개 지원 + 파일 충돌 해결 기능

---

## 8. 커뮤니티 대안 분석

조사 과정에서 발견한 오픈소스 Agent Teams 대안:

| 프로젝트         | 설명                                               | 이룸 적합성                    |
| ---------------- | -------------------------------------------------- | ------------------------------ |
| **claude-flow**  | DAG 기반 멀티 에이전트 오케스트레이터, 메모리 공유 | 시지푸스와 유사한 접근, 중복   |
| **claude-swarm** | 다수 Claude 인스턴스 조율                          | Agent Teams와 유사, 동일 제약  |
| **cline-mcp**    | MCP 기반 멀티 에이전트                             | 다른 접근 방식, 별도 평가 필요 |

**결론**: 커뮤니티 대안도 근본적으로 동일한 제약(비용, 파일 충돌)을 가짐. 이룸의 시지푸스가 이미 최적화된 접근.

---

## 9. 종합 평가

### 9.1 점수표

| 평가 항목               | 가중치   | 점수 (1-5)                    | 가중 점수       |
| ----------------------- | -------- | ----------------------------- | --------------- |
| 플랫폼 호환성           | 25%      | 2 (in-process만 가능)         | 0.50            |
| 비용 효율성             | 25%      | 2 (2-5x 비용 증가)            | 0.50            |
| 기존 아키텍처 대비 이득 | 20%      | 2 (피어-투-피어만 추가)       | 0.40            |
| 안정성                  | 15%      | 1 (실험적, known limitations) | 0.15            |
| 도입 난이도             | 15%      | 3 (환경변수 활성화만)         | 0.45            |
| **총점**                | **100%** |                               | **2.00 / 5.00** |

### 9.2 결론

**현 시점 도입 보류 (Not Recommended)**

| 결정                 | 근거                                                              |
| -------------------- | ----------------------------------------------------------------- |
| **도입하지 않음**    | 실험적 기능, Windows/VS Code 환경 제약, 비용 대비 이득 부족       |
| **시지푸스 유지**    | 4-tier 복잡도 라우팅, 조기 실패, 비용 효율 — 현재 요구사항에 최적 |
| **향후 재검토 조건** | Agent Teams GA 출시 + VS Code split-pane 지원 + 세션 재개 기능    |

### 9.3 현재 아키텍처 개선 제안 (Agent Teams 도입 대신)

Agent Teams의 장점(피어-투-피어 통신)을 현재 시지푸스에서 부분 차용 가능:

| 개선 방향                 | 구현 방법                                  | 효과                    |
| ------------------------- | ------------------------------------------ | ----------------------- |
| **에이전트 간 정보 전달** | 그룹 A 결과를 그룹 B 프롬프트에 포함       | 피어-투-피어 효과의 80% |
| **병렬 탐색 강화**        | Explore 에이전트 3개 병렬 실행 (이미 구현) | 탐색 속도 3x            |
| **에이전트 전문화 심화**  | 각 에이전트 프롬프트를 도메인별 심화       | 품질 향상               |

---

## 10. 재검토 트리거

다음 조건 중 하나라도 충족되면 Agent Teams를 재검토:

1. **Anthropic이 GA(General Availability)로 전환**: 실험적 태그 제거
2. **VS Code 통합 터미널에서 split-pane 지원**: 시각적 모니터링 가능
3. **세션 재개 기능 추가**: 장시간 작업 안정성 확보
4. **토큰 비용 구조 개선**: 팀원 간 공유 컨텍스트로 비용 절감
5. **이룸 팀 규모 확대**: 여러 개발자가 동시에 작업하는 환경

---

## 부록 A: 참조 자료

### 공식 문서

- [Claude Code Agent Teams Documentation](https://code.claude.com/docs/en/agent-teams)
- [Claude Code Sub-agents Documentation](https://code.claude.com/docs/en/sub-agents)
- [Anthropic Engineering: Building a C Compiler](https://www.anthropic.com/engineering/building-c-compiler)

### 커뮤니티

- claude-flow (GitHub): DAG 기반 멀티 에이전트 오케스트레이터
- claude-swarm (GitHub): 다수 Claude 인스턴스 조율 프레임워크
- Claude Agent SDK: 커스텀 에이전트 구축 프레임워크

### 이룸 내부 문서

- [.claude/agents/sisyphus-adaptive.md](../../.claude/agents/sisyphus-adaptive.md) - 시지푸스 오케스트레이터
- [.claude/agents/README.md](../../.claude/agents/README.md) - 에이전트 인덱스
- [.claude/lib/complexity-analyzer.md](../../.claude/lib/complexity-analyzer.md) - 복잡도 분석기
- [.claude/rules/agent-roadmap.md](../../.claude/rules/agent-roadmap.md) - 에이전트 로드맵

---

## 부록 B: Agent Teams 설정 예시 (참고용)

향후 도입 시 참고할 설정:

```json
// .claude/settings.json
{
  "experiments": {
    "agentTeams": true
  },
  "agentTeams": {
    "display": "in-process"
  }
}
```

```
// 환경변수
CLAUDE_CODE_EXPERIMENTAL_AGENT_TEAMS=1
```

```
// 사용 예시 (Claude Code CLI)
> /team create "SSOT Migration Team"
> /team add "PC-V1 Migrator" --prompt "personal-color V1 모듈을 lib/color로 마이그레이션"
> /team add "PC-V2 Migrator" --prompt "personal-color V2 모듈을 lib/color로 마이그레이션"
> /team start
```

---

**결론**: 이룸은 현재 시지푸스 아키텍처를 유지하며, Agent Teams는 GA 출시 및 환경 호환성 확보 후 재검토한다.
