# N-1 ì˜ì–‘ ëª¨ë“ˆ ê°œë°œ ìŠ¤í™

> **ë¬¸ì„œ ë²„ì „**: 1.0.0  
> **ì‘ì„±ì¼**: 2025-12-18  
> **ëŒ€ìƒ**: Claude Code êµ¬í˜„ìš© SDD ìŠ¤í™

---

## 1. ëª¨ë“ˆ ê°œìš”

### 1.1 ëª©ì 
ì´ë£¸(Yiroom) í”Œë«í¼ì˜ Phase 2 ì˜ì–‘ ëª¨ë“ˆë¡œ, **í¼ìŠ¤ë„ì»¬ëŸ¬/ì²´í˜• ë¶„ì„ ê²°ê³¼ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë§ì¶¤ ì‹ë‹¨ì„ ì¶”ì²œ**í•˜ê³  ê°„í¸í•˜ê²Œ ì‹ë‹¨ì„ ê¸°ë¡í•˜ëŠ” ê¸°ëŠ¥ ì œê³µ.

### 1.2 í•µì‹¬ ëª©í‘œ ì§€í‘œ
| ì§€í‘œ | ëª©í‘œ | ì¸¡ì • ë°©ë²• |
|------|------|----------|
| Day 7 ë¦¬í…ì…˜ | 50% | ê°€ì… í›„ 7ì¼ ë‚´ ì¬ë°©ë¬¸ìœ¨ |
| ëª¨ë“ˆ ì „í™˜ìœ¨ | 60% | Phase 1 ì™„ë£Œ â†’ N-1 ì§„ì…ìœ¨ |
| ì¼ì¼ ê¸°ë¡ë¥  | 50% | DAU ì¤‘ ì‹ë‹¨ ê¸°ë¡ ì™„ë£Œìœ¨ |
| AI ì¸ì‹ ì‚¬ìš©ë¥  | 40% | ê¸°ë¡ ì¤‘ ì‚¬ì§„ AI ì¸ì‹ ë¹„ìœ¨ |

### 1.3 íƒ€ê²Ÿ ì‚¬ìš©ì
- í•œêµ­ ì—¬ì„± 10-30ëŒ€
- Phase 1(í¼ìŠ¤ë„ì»¬ëŸ¬/í”¼ë¶€/ì²´í˜• ë¶„ì„) ì™„ë£Œ ì‚¬ìš©ì
- ê°„í¸í•œ ì‹ë‹¨ ê¸°ë¡ ì›í•˜ëŠ” ì‚¬ìš©ì (ì¹¼ë¡œë¦¬ ê³„ì‚° ë¶€ë‹´ ìµœì†Œí™”)

### 1.4 ê¸°ìˆ  ìŠ¤íƒ
- **Frontend**: Next.js 16 + React 19
- **Backend**: Supabase (PostgreSQL + Auth + Storage)
- **Auth**: Clerk
- **AI**: Gemini API (ìŒì‹ ì‚¬ì§„ ì¸ì‹)
- **State**: Zustand ë˜ëŠ” React Context

---

## 2. ì •ë³´ êµ¬ì¡° (IA)

### 2.1 N-1 ëª¨ë“ˆ ë„¤ë¹„ê²Œì´ì…˜

```
N-1 ì˜ì–‘ ëª¨ë“ˆ
â”œâ”€â”€ ëŒ€ì‹œë³´ë“œ (í™ˆ)
â”‚   â”œâ”€â”€ ì˜¤ëŠ˜ì˜ ì¹¼ë¡œë¦¬ ìš”ì•½
â”‚   â”œâ”€â”€ íƒ„ë‹¨ì§€ ì§„í–‰ ë°”
â”‚   â””â”€â”€ ë¹ ë¥¸ ê¸°ë¡ ë²„íŠ¼
â”œâ”€â”€ ì‹ë‹¨ ê¸°ë¡
â”‚   â”œâ”€â”€ ì‚¬ì§„ AI ì¸ì‹
â”‚   â”œâ”€â”€ ìŒì‹ ê²€ìƒ‰
â”‚   â”œâ”€â”€ ìµœê·¼ ê¸°ë¡ ìŒì‹
â”‚   â””â”€â”€ ì¦ê²¨ì°¾ê¸° ìŒì‹
â”œâ”€â”€ ìŒì‹ íƒìƒ‰
â”‚   â”œâ”€â”€ ì¶”ì²œ ì‹ë‹¨ (AI ë§ì¶¤)
â”‚   â”œâ”€â”€ ì²´í˜•ë³„ ì¶”ì²œ ìŒì‹
â”‚   â”œâ”€â”€ ì¹´í…Œê³ ë¦¬ë³„ ìŒì‹
â”‚   â””â”€â”€ ì „ì²´ ìŒì‹ ë¼ì´ë¸ŒëŸ¬ë¦¬
â”œâ”€â”€ ê¸°ë¡/í†µê³„
â”‚   â”œâ”€â”€ ì‹ë‹¨ íˆìŠ¤í† ë¦¬
â”‚   â”œâ”€â”€ ì£¼ê°„/ì›”ê°„ ë¦¬í¬íŠ¸
â”‚   â””â”€â”€ ì˜ì–‘ ë¶„ì„ ì°¨íŠ¸
â””â”€â”€ ì„¤ì •
    â”œâ”€â”€ ì¹¼ë¡œë¦¬ ëª©í‘œ ì„¤ì •
    â”œâ”€â”€ ë§¤í¬ë¡œ ë¹„ìœ¨ ì„¤ì •
    â”œâ”€â”€ ì•Œë¦¼ ì„¤ì •
    â””â”€â”€ ì²´í˜• ì •ë³´ ìˆ˜ì •
```

### 2.2 í™”ë©´ í”Œë¡œìš°

```
[Phase 1 ì™„ë£Œ] 
    â†“
[N-1 ì˜¨ë³´ë”©] â† 60ì´ˆ ë‚´ ì²« ê°€ì¹˜ ì „ë‹¬
    â”œâ”€â”€ ì‹ë‹¨ ëª©í‘œ ì„ íƒ (1ë¬¸í•­)
    â”œâ”€â”€ ì‹ì‚¬ íŒ¨í„´ (1ë¬¸í•­)
    â””â”€â”€ ì¹¼ë¡œë¦¬ ëª©í‘œ í™•ì¸ (ìë™ ê³„ì‚°)
    â†“
[ëŒ€ì‹œë³´ë“œ] â† ë©”ì¸ ì§„ì…ì 
    â†“
[+ ê¸°ë¡í•˜ê¸°] â†’ [ì‚¬ì§„ ì´¬ì˜/ê²€ìƒ‰] â†’ [ìŒì‹ í™•ì¸] â†’ [ê¸°ë¡ ì™„ë£Œ]
    â†“
[ê¸°ë¡/í†µê³„] â†’ [ì£¼ê°„ ë¦¬í¬íŠ¸]
```

---

## 3. í™”ë©´ë³„ ìƒì„¸ ìŠ¤í™

### 3.1 N-1 ì˜¨ë³´ë”© í™”ë©´

#### ëª©ì 
Phase 1 ì™„ë£Œ í›„ N-1 ëª¨ë“ˆ ì§„ì… ì‹œ ìµœì†Œí•œì˜ ì •ë³´ ìˆ˜ì§‘ (3ë¬¸í•­, 30ì´ˆ ì´ë‚´)

#### í™”ë©´ êµ¬ì„±

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [â† ë’¤ë¡œ]              [ê±´ë„ˆë›°ê¸°]    â”‚
â”‚                                     â”‚
â”‚  â—â—‹â—‹ (1/3)                         â”‚
â”‚                                     â”‚
â”‚  ğŸ¥— ì‹ë‹¨ ê´€ë¦¬ ëª©í‘œê°€ ë­ì˜ˆìš”?         â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ğŸ”¥ ì²´ì¤‘ ê°ëŸ‰               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ğŸ’ª ê·¼ìœ¡ ì¦ê°€               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  âš–ï¸ ì²´ì¤‘ ìœ ì§€               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ğŸŒ¿ ê±´ê°•í•œ ì‹ìŠµê´€            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  [ë‹¤ìŒ]                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°

```tsx
// app/(protected)/nutrition/onboarding/page.tsx

interface OnboardingStep {
  id: number;
  question: string;
  options: OnboardingOption[];
}

interface OnboardingOption {
  id: string;
  emoji: string;
  label: string;
  value: string;
}

const ONBOARDING_STEPS: OnboardingStep[] = [
  {
    id: 1,
    question: "ì‹ë‹¨ ê´€ë¦¬ ëª©í‘œê°€ ë­ì˜ˆìš”?",
    options: [
      { id: "goal-1", emoji: "ğŸ”¥", label: "ì²´ì¤‘ ê°ëŸ‰", value: "weight_loss" },
      { id: "goal-2", emoji: "ğŸ’ª", label: "ê·¼ìœ¡ ì¦ê°€", value: "muscle_gain" },
      { id: "goal-3", emoji: "âš–ï¸", label: "ì²´ì¤‘ ìœ ì§€", value: "maintain" },
      { id: "goal-4", emoji: "ğŸŒ¿", label: "ê±´ê°•í•œ ì‹ìŠµê´€", value: "healthy_eating" },
    ]
  },
  {
    id: 2,
    question: "í•˜ë£¨ì— ëª‡ ë¼ ë“œì„¸ìš”?",
    options: [
      { id: "meal-1", emoji: "ğŸ³", label: "2ë¼ (ê°„í—ì  ë‹¨ì‹)", value: "2_meals" },
      { id: "meal-2", emoji: "ğŸ±", label: "3ë¼", value: "3_meals" },
      { id: "meal-3", emoji: "ğŸ¥ª", label: "3ë¼ + ê°„ì‹", value: "3_meals_snack" },
      { id: "meal-4", emoji: "ğŸ½ï¸", label: "4ë¼ ì´ìƒ (ì†Œì‹ ë‹¤íšŒ)", value: "4_plus_meals" },
    ]
  },
  {
    id: 3,
    question: "ì¶”ì²œ ì¼ì¼ ì¹¼ë¡œë¦¬ì˜ˆìš”",
    // ì´ í™”ë©´ì€ ìë™ ê³„ì‚°ëœ ì¹¼ë¡œë¦¬ í‘œì‹œ + ì¡°ì • UI
    options: [] // ìŠ¬ë¼ì´ë”ë¡œ ì¡°ì •
  }
];
```

#### ì¹¼ë¡œë¦¬ ìë™ ê³„ì‚° (3ë‹¨ê³„)

```tsx
// lib/nutrition/calorieCalculator.ts

interface UserProfile {
  gender: 'male' | 'female';
  age: number;
  height: number; // cm
  weight: number; // kg
  activityLevel: 'sedentary' | 'light' | 'moderate' | 'active' | 'very_active';
  goal: 'weight_loss' | 'muscle_gain' | 'maintain' | 'healthy_eating';
}

// Mifflin-St Jeor ê³µì‹ ê¸°ë°˜
function calculateBMR(profile: UserProfile): number {
  if (profile.gender === 'female') {
    return 10 * profile.weight + 6.25 * profile.height - 5 * profile.age - 161;
  }
  return 10 * profile.weight + 6.25 * profile.height - 5 * profile.age + 5;
}

function calculateTDEE(bmr: number, activityLevel: string): number {
  const multipliers = {
    sedentary: 1.2,
    light: 1.375,
    moderate: 1.55,
    active: 1.725,
    very_active: 1.9,
  };
  return bmr * multipliers[activityLevel];
}

function calculateTargetCalories(tdee: number, goal: string): number {
  switch (goal) {
    case 'weight_loss': return Math.round(tdee * 0.8); // -20%
    case 'muscle_gain': return Math.round(tdee * 1.1); // +10%
    default: return Math.round(tdee);
  }
}
```

#### ìƒíƒœ ê´€ë¦¬

```tsx
interface NutritionOnboardingState {
  currentStep: number;
  answers: {
    goal: string | null;
    mealPattern: string | null;
    targetCalories: number | null;
  };
  calculatedCalories: number | null;
  isComplete: boolean;
}
```

---

### 3.2 ëŒ€ì‹œë³´ë“œ (í™ˆ) í™”ë©´

#### ëª©ì 
ì˜¤ëŠ˜ì˜ ì˜ì–‘ í˜„í™©ì„ í•œëˆˆì— íŒŒì•…í•˜ê³ , ë¹ ë¥´ê²Œ ì‹ë‹¨ ê¸°ë¡ ìœ ë„

#### í™”ë©´ êµ¬ì„±

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ì´ë£¸ ì˜ì–‘        [ğŸ””] [ğŸ‘¤]         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  ì•ˆë…•í•˜ì„¸ìš”, [ì´ë¦„]ë‹˜! ğŸ‘‹           â”‚
â”‚  ì˜¤ëŠ˜ë„ ê±´ê°•í•œ ì‹ë‹¨ í•¨ê»˜í•´ìš”        â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚      â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®          â”‚   â”‚
â”‚  â”‚      â”‚   1,250   â”‚ â† ì›í˜• ê²Œì´ì§€â”‚
â”‚  â”‚      â”‚   /1,800  â”‚  ì”ì—¬ ì¹¼ë¡œë¦¬â”‚
â”‚  â”‚      â”‚   kcal    â”‚          â”‚   â”‚
â”‚  â”‚      â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯          â”‚   â”‚
â”‚  â”‚   ì„­ì·¨ 550 â€¢ ìš´ë™ 0 â€¢ ì”ì—¬ 1,250â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ íƒ„ìˆ˜í™”ë¬¼ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘ 120/180gâ”‚   â”‚
â”‚  â”‚ ë‹¨ë°±ì§ˆ   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘  45/80g â”‚   â”‚
â”‚  â”‚ ì§€ë°©     â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘  25/60g â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  ğŸ”¥ 5ì¼ ì—°ì† ê¸°ë¡ ì¤‘!              â”‚
â”‚                                     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  ğŸ“ ì˜¤ëŠ˜ì˜ ì‹ë‹¨                     â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸŒ… ì•„ì¹¨  â€¢  285 kcal         â”‚   â”‚
â”‚  â”‚ ê·¸ë¦­ìš”ê±°íŠ¸, ë°”ë‚˜ë‚˜            â”‚   â”‚
â”‚  â”‚ [+ ì¶”ê°€]                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â˜€ï¸ ì ì‹¬  â€¢  ì•„ì§ ê¸°ë¡ ì—†ìŒ    â”‚   â”‚
â”‚  â”‚ [+ ê¸°ë¡í•˜ê¸°]                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸŒ™ ì €ë…  â€¢  ì•„ì§ ê¸°ë¡ ì—†ìŒ    â”‚   â”‚
â”‚  â”‚ [+ ê¸°ë¡í•˜ê¸°]                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸª ê°„ì‹  â€¢  ì•„ì§ ê¸°ë¡ ì—†ìŒ    â”‚   â”‚
â”‚  â”‚ [+ ê¸°ë¡í•˜ê¸°]                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  âœ¨ ì˜¤ëŠ˜ì˜ ì¶”ì²œ ìŒì‹                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ [ì´ë¯¸ì§€] ë‹­ê°€ìŠ´ì‚´ ìƒëŸ¬ë“œ      â”‚   â”‚
â”‚  â”‚ ğŸŸ¢ ë‹¨ë°±ì§ˆ ë³´ì¶©ì— ë”±!          â”‚   â”‚
â”‚  â”‚ 285kcal â€¢ P:35g              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ğŸ í™ˆ] [ğŸ“·ê¸°ë¡] [ğŸ”íƒìƒ‰] [ğŸ‘¤MY]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ì»´í¬ë„ŒíŠ¸ íŠ¸ë¦¬

```
NutritionDashboardPage
â”œâ”€â”€ Header
â”‚   â”œâ”€â”€ Logo
â”‚   â”œâ”€â”€ NotificationBell
â”‚   â””â”€â”€ ProfileAvatar
â”œâ”€â”€ WelcomeSection
â”‚   â”œâ”€â”€ GreetingText
â”‚   â””â”€â”€ StreakBadge
â”œâ”€â”€ CalorieRingSection
â”‚   â”œâ”€â”€ CalorieRing (ì›í˜• ê²Œì´ì§€)
â”‚   â”‚   â”œâ”€â”€ RemainingCalories (ì¤‘ì•™ ìˆ«ì)
â”‚   â”‚   â””â”€â”€ ProgressArc
â”‚   â””â”€â”€ CalorieSummary (ì„­ì·¨/ìš´ë™/ì”ì—¬)
â”œâ”€â”€ MacroProgressSection
â”‚   â”œâ”€â”€ MacroBar (íƒ„ìˆ˜í™”ë¬¼)
â”‚   â”œâ”€â”€ MacroBar (ë‹¨ë°±ì§ˆ)
â”‚   â””â”€â”€ MacroBar (ì§€ë°©)
â”œâ”€â”€ TodayMealsSection
â”‚   â”œâ”€â”€ SectionTitle
â”‚   â””â”€â”€ MealCardList
â”‚       â””â”€â”€ MealCard (ë°˜ë³µ: ì•„ì¹¨/ì ì‹¬/ì €ë…/ê°„ì‹)
â”‚           â”œâ”€â”€ MealIcon
â”‚           â”œâ”€â”€ MealCalories
â”‚           â”œâ”€â”€ FoodList (ê¸°ë¡ëœ ìŒì‹)
â”‚           â””â”€â”€ AddButton
â”œâ”€â”€ RecommendedFoodSection
â”‚   â”œâ”€â”€ SectionTitle
â”‚   â””â”€â”€ FoodRecommendCard
â”‚       â”œâ”€â”€ FoodThumbnail
â”‚       â”œâ”€â”€ FoodName
â”‚       â”œâ”€â”€ RecommendReason
â”‚       â””â”€â”€ NutritionBadges
â””â”€â”€ BottomNavigation
```

#### ì»´í¬ë„ŒíŠ¸ Props ì •ì˜

```tsx
// components/nutrition/CalorieRing.tsx

interface CalorieRingProps {
  consumed: number;
  burned: number; // ìš´ë™ìœ¼ë¡œ ì†Œëª¨
  target: number;
  size?: 'sm' | 'md' | 'lg';
}

// components/nutrition/MacroProgressBar.tsx

interface MacroProgressBarProps {
  type: 'carbs' | 'protein' | 'fat';
  current: number;
  target: number;
  unit?: 'g' | 'kcal';
  color?: string;
}

// components/nutrition/MealCard.tsx

interface MealCardProps {
  mealType: 'breakfast' | 'lunch' | 'dinner' | 'snack';
  totalCalories: number;
  foods: FoodLogItem[];
  onAddFood: () => void;
  onEditMeal: () => void;
}

interface FoodLogItem {
  id: string;
  foodId: string;
  name: string;
  calories: number;
  servingSize: number;
  servingUnit: string;
}

// components/nutrition/FoodRecommendCard.tsx

interface FoodRecommendCardProps {
  id: string;
  name: string;
  thumbnailUrl: string;
  calories: number;
  protein: number;
  recommendReason: string;
  matchScore: number;
  onAdd: () => void;
}
```

---

### 3.3 ì‹ë‹¨ ê¸°ë¡ í™”ë©´

#### ëª©ì 
ì‚¬ì§„ AI ì¸ì‹ ë˜ëŠ” ê²€ìƒ‰ìœ¼ë¡œ ë¹ ë¥´ê²Œ ìŒì‹ ê¸°ë¡

#### í™”ë©´ êµ¬ì„± (ë©”ì¸)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [âœ• ë‹«ê¸°]      ì ì‹¬ ê¸°ë¡í•˜ê¸°        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ğŸ” ìŒì‹ ê²€ìƒ‰...             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                             â”‚   â”‚
â”‚  â”‚    ğŸ“· ì‚¬ì§„ìœ¼ë¡œ ê¸°ë¡í•˜ê¸°      â”‚   â”‚
â”‚  â”‚    AIê°€ ìŒì‹ì„ ì¸ì‹í•´ìš”      â”‚   â”‚
â”‚  â”‚                             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  â±ï¸ ìµœê·¼ ê¸°ë¡                       â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”      â”‚
â”‚  â”‚ê³„ë€â”‚ â”‚ë°¥  â”‚ â”‚ê¹€ì¹˜â”‚ â”‚ë‹­ê°€ìŠ´â”‚     â”‚
â”‚  â”‚ì°œ â”‚ â”‚    â”‚ â”‚ì°Œê°œâ”‚ â”‚ì‚´   â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜      â”‚
â”‚                                     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  â­ ì¦ê²¨ì°¾ê¸°                        â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”              â”‚
â”‚  â”‚ê·¸ë¦­â”‚ â”‚ì•„ë³´â”‚ â”‚í˜„ë¯¸â”‚              â”‚
â”‚  â”‚ìš”ê±°â”‚ â”‚ì¹´ë„â”‚ â”‚ë°¥ â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜              â”‚
â”‚                                     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  ğŸ“‚ ì¹´í…Œê³ ë¦¬                        â”‚
â”‚                                     â”‚
â”‚  [ë°¥/ë©´ë¥˜] [ë°˜ì°¬] [êµ­/ì°Œê°œ]         â”‚
â”‚  [ê³ ê¸°/í•´ì‚°ë¬¼] [ìƒëŸ¬ë“œ] [ê°„ì‹]      â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### í™”ë©´ êµ¬ì„± (AI ì‚¬ì§„ ì¸ì‹)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [â† ë’¤ë¡œ]       ì‚¬ì§„ìœ¼ë¡œ ê¸°ë¡       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                             â”‚   â”‚
â”‚  â”‚                             â”‚   â”‚
â”‚  â”‚      [ì¹´ë©”ë¼ í”„ë¦¬ë·°]         â”‚   â”‚
â”‚  â”‚                             â”‚   â”‚
â”‚  â”‚                             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  ğŸ’¡ ìŒì‹ì´ ì˜ ë³´ì´ê²Œ ì°ì–´ì£¼ì„¸ìš”     â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”                     â”Œâ”€â”€â”€â”   â”‚
â”‚  â”‚ğŸ–¼ï¸â”‚                     â”‚ğŸ“·â”‚   â”‚
â”‚  â”‚ê°¤ëŸ¬â”‚        â—‹          â”‚ì´¬ì˜â”‚   â”‚
â”‚  â”‚ë¦¬ â”‚                     â”‚   â”‚   â”‚
â”‚  â””â”€â”€â”€â”˜                     â””â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### í™”ë©´ êµ¬ì„± (AI ì¸ì‹ ê²°ê³¼)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [â† ë’¤ë¡œ]       ì¸ì‹ ê²°ê³¼           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚     [ì´¬ì˜ëœ ìŒì‹ ì‚¬ì§„]       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  âœ¨ AIê°€ ì¸ì‹í•œ ìŒì‹                â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ âœ“ ê¹€ì¹˜ì°Œê°œ                   â”‚   â”‚
â”‚  â”‚   1ì¸ë¶„ (300g) â€¢ 200 kcal   â”‚   â”‚
â”‚  â”‚   [ìˆ˜ëŸ‰ ì¡°ì ˆ: - 1 +]        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ âœ“ ê³µê¸°ë°¥                    â”‚   â”‚
â”‚  â”‚   1ê³µê¸° (210g) â€¢ 313 kcal   â”‚   â”‚
â”‚  â”‚   [ìˆ˜ëŸ‰ ì¡°ì ˆ: - 1 +]        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ âœ“ ê³„ë€ë§ì´                   â”‚   â”‚
â”‚  â”‚   2ì¡°ê° (60g) â€¢ 95 kcal     â”‚   â”‚
â”‚  â”‚   [ìˆ˜ëŸ‰ ì¡°ì ˆ: - 2 +]        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  [+ ìŒì‹ ì¶”ê°€í•˜ê¸°]                  â”‚
â”‚                                     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  ì´ 608 kcal                        â”‚
â”‚  íƒ„ 85g â€¢ ë‹¨ 28g â€¢ ì§€ 18g          â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚     [âœ“ ê¸°ë¡ ì™„ë£Œí•˜ê¸°]        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### AI ìŒì‹ ì¸ì‹ í†µí•©

```tsx
// lib/nutrition/foodRecognition.ts

import { GoogleGenerativeAI } from '@google/generative-ai';

interface RecognizedFood {
  name: string;
  nameEn: string;
  confidence: number; // 0-1
  estimatedCalories: number;
  estimatedServingSize: number;
  servingUnit: string;
  matchedFoodId?: string; // DB ë§¤ì¹­ëœ ìŒì‹ ID
}

interface FoodRecognitionResult {
  success: boolean;
  foods: RecognizedFood[];
  rawResponse?: string;
  error?: string;
}

async function recognizeFoodFromImage(
  imageBase64: string
): Promise<FoodRecognitionResult> {
  const genAI = new GoogleGenerativeAI(process.env.GEMINI_API_KEY!);
  const model = genAI.getGenerativeModel({ model: 'gemini-1.5-flash' });

  const prompt = `
    ì´ ì‚¬ì§„ì— ìˆëŠ” ìŒì‹ë“¤ì„ ë¶„ì„í•´ì£¼ì„¸ìš”.
    
    ê° ìŒì‹ì— ëŒ€í•´ ë‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ì‘ë‹µí•´ì£¼ì„¸ìš”:
    {
      "foods": [
        {
          "name": "ìŒì‹ ì´ë¦„ (í•œêµ­ì–´)",
          "nameEn": "Food name (English)",
          "confidence": 0.95,
          "estimatedCalories": 200,
          "estimatedServingSize": 300,
          "servingUnit": "g"
        }
      ]
    }
    
    í•œêµ­ ìŒì‹ì¸ ê²½ìš° í•œêµ­ì–´ ì´ë¦„ì„ ìš°ì„ í•´ì£¼ì„¸ìš”.
    ì¹¼ë¡œë¦¬ëŠ” ì¼ë°˜ì ì¸ 1ì¸ë¶„ ê¸°ì¤€ìœ¼ë¡œ ì¶”ì •í•´ì£¼ì„¸ìš”.
    JSONë§Œ ì‘ë‹µí•˜ê³  ë‹¤ë¥¸ í…ìŠ¤íŠ¸ëŠ” í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”.
  `;

  try {
    const result = await model.generateContent([
      prompt,
      {
        inlineData: {
          mimeType: 'image/jpeg',
          data: imageBase64,
        },
      },
    ]);

    const response = await result.response;
    const text = response.text();
    
    // JSON íŒŒì‹±
    const parsed = JSON.parse(text);
    
    // DBì—ì„œ ë§¤ì¹­ë˜ëŠ” ìŒì‹ ê²€ìƒ‰
    const matchedFoods = await matchFoodsWithDatabase(parsed.foods);
    
    return {
      success: true,
      foods: matchedFoods,
      rawResponse: text,
    };
  } catch (error) {
    return {
      success: false,
      foods: [],
      error: error.message,
    };
  }
}

// DB ë§¤ì¹­ í•¨ìˆ˜
async function matchFoodsWithDatabase(
  recognizedFoods: RecognizedFood[]
): Promise<RecognizedFood[]> {
  const supabase = createClient();
  
  const matchedFoods = await Promise.all(
    recognizedFoods.map(async (food) => {
      // ì´ë¦„ìœ¼ë¡œ ê²€ìƒ‰
      const { data } = await supabase
        .from('foods')
        .select('*')
        .or(`name.ilike.%${food.name}%,name_en.ilike.%${food.nameEn}%`)
        .limit(1)
        .single();
      
      if (data) {
        return {
          ...food,
          matchedFoodId: data.id,
          estimatedCalories: data.calories_per_serving,
          estimatedServingSize: data.serving_size,
          servingUnit: data.serving_unit,
        };
      }
      
      return food;
    })
  );
  
  return matchedFoods;
}
```

#### ìƒíƒœ ê´€ë¦¬

```tsx
// stores/foodLogStore.ts (Zustand)

interface FoodLogState {
  // í˜„ì¬ ê¸°ë¡ ì¤‘ì¸ ì‹ì‚¬
  currentMealType: 'breakfast' | 'lunch' | 'dinner' | 'snack' | null;
  currentDate: Date;
  
  // ì„ íƒëœ ìŒì‹ë“¤
  selectedFoods: SelectedFood[];
  
  // AI ì¸ì‹
  isRecognizing: boolean;
  recognizedFoods: RecognizedFood[];
  
  // ì•¡ì…˜
  setMealType: (type: MealType) => void;
  addFood: (food: SelectedFood) => void;
  removeFood: (foodId: string) => void;
  updateServingSize: (foodId: string, size: number) => void;
  clearSelection: () => void;
  setRecognizedFoods: (foods: RecognizedFood[]) => void;
  confirmAndSave: () => Promise<void>;
}

interface SelectedFood {
  id: string;
  foodId: string;
  name: string;
  calories: number;
  protein: number;
  carbs: number;
  fat: number;
  servingSize: number;
  servingUnit: string;
  quantity: number;
}
```

---

### 3.4 ìŒì‹ ìƒì„¸ í™”ë©´

#### ëª©ì 
ìŒì‹ ì˜ì–‘ ì •ë³´ í™•ì¸ ë° ê¸°ë¡ ì¶”ê°€

#### í™”ë©´ êµ¬ì„±

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [â† ë’¤ë¡œ]              [â­ ì¦ê²¨ì°¾ê¸°] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚      [ìŒì‹ ì´ë¯¸ì§€]           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  ê¹€ì¹˜ì°Œê°œ                           â”‚
â”‚  Kimchi Jjigae                      â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  1ì¸ë¶„ (300g) ê¸°ì¤€          â”‚   â”‚
â”‚  â”‚                             â”‚   â”‚
â”‚  â”‚  ğŸ”¥ 200 kcal                â”‚   â”‚
â”‚  â”‚                             â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”       â”‚   â”‚
â”‚  â”‚  â”‚ íƒ„  â”‚ ë‹¨  â”‚ ì§€  â”‚       â”‚   â”‚
â”‚  â”‚  â”‚ 15g â”‚ 18g â”‚ 8g  â”‚       â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  ğŸ“Š ìƒì„¸ ì˜ì–‘ ì •ë³´                  â”‚
â”‚                                     â”‚
â”‚  ë‚˜íŠ¸ë¥¨      1,200mg   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘  â”‚
â”‚  ì‹ì´ì„¬ìœ     3g        â–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  â”‚
â”‚  ë‹¹ë¥˜        5g        â–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  â”‚
â”‚  ì½œë ˆìŠ¤í…Œë¡¤  45mg      â–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  â”‚
â”‚                                     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  âœ¨ ì²´í˜• ë§ì¶¤ ì •ë³´                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ "Yì²´í˜•ì—ê²Œ ì ë‹¹í•œ ë‹¨ë°±ì§ˆì„   â”‚   â”‚
â”‚  â”‚  ì œê³µí•´ìš”. ë‹¤ë§Œ ë‚˜íŠ¸ë¥¨ì´      â”‚   â”‚
â”‚  â”‚  ë†’ìœ¼ë‹ˆ êµ­ë¬¼ì€ ì ê²Œ ë“œì„¸ìš”." â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  ğŸ“ ì–‘ ì„ íƒ                         â”‚
â”‚                                     â”‚
â”‚  [0.5ì¸ë¶„] [1ì¸ë¶„] [1.5ì¸ë¶„] [ì§ì ‘ì…ë ¥]â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚     [+ ì ì‹¬ì— ì¶”ê°€í•˜ê¸°]       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ì»´í¬ë„ŒíŠ¸ Props

```tsx
// components/nutrition/FoodDetailView.tsx

interface FoodDetailProps {
  foodId: string;
}

// types/nutrition.ts

interface Food {
  id: string;
  name: string;
  nameEn: string;
  category: string;
  thumbnailUrl?: string;
  
  // ì˜ì–‘ ì •ë³´ (1ì¸ë¶„ ê¸°ì¤€)
  servingSize: number;
  servingUnit: string;
  calories: number;
  protein: number;
  carbs: number;
  fat: number;
  
  // ìƒì„¸ ì˜ì–‘ì†Œ
  sodium?: number;
  fiber?: number;
  sugar?: number;
  cholesterol?: number;
  
  // ì²´í˜•ë³„ ì¶”ì²œ
  bodyTypeRecommendations?: {
    bodyType: 'X' | 'A' | 'Y' | 'H' | 'O';
    recommendation: string;
    isRecommended: boolean;
  }[];
  
  // ì»¬ëŸ¬ ë¶„ë¥˜ (Noom ìŠ¤íƒ€ì¼)
  colorCategory: 'green' | 'yellow' | 'orange';
}

// components/nutrition/NutritionFactsCard.tsx

interface NutritionFactsProps {
  calories: number;
  protein: number;
  carbs: number;
  fat: number;
  sodium?: number;
  fiber?: number;
  sugar?: number;
  cholesterol?: number;
  servingSize: number;
  servingUnit: string;
}

// components/nutrition/ServingSizeSelector.tsx

interface ServingSizeSelectorProps {
  defaultServing: number;
  servingUnit: string;
  presets: number[]; // [0.5, 1, 1.5, 2]
  onSelect: (size: number) => void;
  allowCustom?: boolean;
}
```

---

### 3.5 ê¸°ë¡ ì™„ë£Œ í™”ë©´

#### ëª©ì 
ì‹ë‹¨ ê¸°ë¡ ì™„ë£Œ ì¶•í•˜ ë° í”¼ë“œë°±, ë‹¤ìŒ í–‰ë™ ìœ ë„

#### í™”ë©´ êµ¬ì„±

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                     â”‚
â”‚           âœ…                        â”‚
â”‚                                     â”‚
â”‚      ì ì‹¬ ê¸°ë¡ ì™„ë£Œ!                â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ğŸ”¥ 608 kcal ê¸°ë¡           â”‚   â”‚
â”‚  â”‚  íƒ„ 85g â€¢ ë‹¨ 28g â€¢ ì§€ 18g   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  ì˜¤ëŠ˜ ë‚¨ì€ ì¹¼ë¡œë¦¬                   â”‚
â”‚                                     â”‚
â”‚         â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®              â”‚
â”‚         â”‚   1,192   â”‚              â”‚
â”‚         â”‚   kcal    â”‚              â”‚
â”‚         â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯              â”‚
â”‚                                     â”‚
â”‚  ğŸ’¡ ë‹¨ë°±ì§ˆì„ ì¡°ê¸ˆ ë” ì±™ê²¨ë³´ì„¸ìš”!    â”‚
â”‚     ì €ë…ì— ë‹­ê°€ìŠ´ì‚´ ì–´ë•Œìš”?         â”‚
â”‚                                     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  ğŸ”¥ 5ì¼ ì—°ì† ê¸°ë¡ ë‹¬ì„±! (+15P)     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚     [ğŸ  í™ˆìœ¼ë¡œ]              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  [ì €ë… ë¯¸ë¦¬ ê³„íší•˜ê¸° â†’]             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 3.6 ê¸°ë¡/í†µê³„ í™”ë©´

#### ëª©ì 
ì‹ë‹¨ íˆìŠ¤í† ë¦¬ í™•ì¸ ë° ì˜ì–‘ ë¶„ì„ ì‹œê°í™”

#### í™”ë©´ êµ¬ì„±

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ê¸°ë¡           [ğŸ“… ì£¼ê°„] [ì›”ê°„]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚     12ì›” 3ì£¼ì°¨ ìš”ì•½          â”‚   â”‚
â”‚  â”‚                             â”‚   â”‚
â”‚  â”‚  í‰ê·  ì„­ì·¨   1,650 kcal/ì¼   â”‚   â”‚
â”‚  â”‚  ëª©í‘œ ë‹¬ì„±   5/7ì¼ (71%)     â”‚   â”‚
â”‚  â”‚                             â”‚   â”‚
â”‚  â”‚  [ë§‰ëŒ€ê·¸ë˜í”„: ì¼ë³„ ì¹¼ë¡œë¦¬]   â”‚   â”‚
â”‚  â”‚  ì›” í™” ìˆ˜ ëª© ê¸ˆ í†  ì¼        â”‚   â”‚
â”‚  â”‚  â–„â–„ â–„â–„ â–„â–„ â–„â–„ â–„â–„ â–‘â–‘ â–‘â–‘      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  ğŸ“Š ì˜ì–‘ ë°¸ëŸ°ìŠ¤                     â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  [íŒŒì´ ì°¨íŠ¸: íƒ„ë‹¨ì§€ ë¹„ìœ¨]    â”‚   â”‚
â”‚  â”‚                             â”‚   â”‚
â”‚  â”‚    íƒ„ìˆ˜í™”ë¬¼ 55%              â”‚   â”‚
â”‚  â”‚    ë‹¨ë°±ì§ˆ   25%              â”‚   â”‚
â”‚  â”‚    ì§€ë°©     20%              â”‚   â”‚
â”‚  â”‚                             â”‚   â”‚
â”‚  â”‚  ëª©í‘œ: 50% / 30% / 20%      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  ğŸ¥— ìì£¼ ë¨¹ì€ ìŒì‹ TOP 5           â”‚
â”‚                                     â”‚
â”‚  1. ê³µê¸°ë°¥ (12íšŒ)                  â”‚
â”‚  2. ê¹€ì¹˜ì°Œê°œ (8íšŒ)                 â”‚
â”‚  3. ë‹­ê°€ìŠ´ì‚´ (7íšŒ)                 â”‚
â”‚  4. ê³„ë€ë§ì´ (6íšŒ)                 â”‚
â”‚  5. ê·¸ë¦­ìš”ê±°íŠ¸ (5íšŒ)               â”‚
â”‚                                     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  ğŸ“ ìµœê·¼ ê¸°ë¡                       â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 12/17 (í™”) â€¢ 1,720 kcal     â”‚   â”‚
â”‚  â”‚ ì•„ì¹¨ 285 + ì ì‹¬ 608 + ì €ë… 827â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ğŸ í™ˆ] [ğŸ“·ê¸°ë¡] [ğŸ”íƒìƒ‰] [ğŸ‘¤MY]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°

```tsx
// components/nutrition/WeeklySummaryChart.tsx

interface WeeklySummaryChartProps {
  weekData: {
    date: Date;
    calories: number;
    targetMet: boolean;
  }[];
  targetCalories: number;
}

// components/nutrition/MacroBalancePieChart.tsx

interface MacroBalanceProps {
  actual: {
    carbs: number;
    protein: number;
    fat: number;
  };
  target: {
    carbs: number;
    protein: number;
    fat: number;
  };
}

// components/nutrition/TopFoodsCard.tsx

interface TopFoodsProps {
  foods: {
    name: string;
    count: number;
    totalCalories: number;
  }[];
  period: 'week' | 'month';
}

// components/nutrition/DailyLogItem.tsx

interface DailyLogItemProps {
  date: Date;
  totalCalories: number;
  meals: {
    type: 'breakfast' | 'lunch' | 'dinner' | 'snack';
    calories: number;
  }[];
  onClick?: () => void;
}
```

---

## 4. ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ (Supabase)

### 4.1 í…Œì´ë¸” êµ¬ì¡°

```sql
-- ì‚¬ìš©ì ì˜ì–‘ í”„ë¡œí•„
CREATE TABLE user_nutrition_profiles (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE,
  
  -- ì˜¨ë³´ë”© ë‹µë³€
  nutrition_goal TEXT, -- 'weight_loss', 'muscle_gain', 'maintain', 'healthy_eating'
  meal_pattern TEXT, -- '2_meals', '3_meals', '3_meals_snack', '4_plus_meals'
  
  -- ëª©í‘œ ì„¤ì •
  target_calories INTEGER, -- ì¼ì¼ ëª©í‘œ ì¹¼ë¡œë¦¬
  target_carbs_ratio INTEGER DEFAULT 50, -- íƒ„ìˆ˜í™”ë¬¼ ë¹„ìœ¨ %
  target_protein_ratio INTEGER DEFAULT 30, -- ë‹¨ë°±ì§ˆ ë¹„ìœ¨ %
  target_fat_ratio INTEGER DEFAULT 20, -- ì§€ë°© ë¹„ìœ¨ %
  
  -- ì²´í˜• ì—°ë™ (Phase 1ì—ì„œ)
  body_type TEXT, -- 'X', 'A', 'Y', 'H', 'O'
  
  -- ì‹ ì²´ ì •ë³´ (ì¹¼ë¡œë¦¬ ê³„ì‚°ìš©)
  height INTEGER, -- cm
  weight INTEGER, -- kg
  age INTEGER,
  gender TEXT,
  activity_level TEXT,
  
  -- í†µê³„
  total_logs INTEGER DEFAULT 0,
  current_streak INTEGER DEFAULT 0,
  best_streak INTEGER DEFAULT 0,
  last_log_at TIMESTAMPTZ,
  
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- ìŒì‹ ë¼ì´ë¸ŒëŸ¬ë¦¬ (ì‹œë“œ ë°ì´í„°)
CREATE TABLE foods (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  
  -- ê¸°ë³¸ ì •ë³´
  name TEXT NOT NULL,
  name_en TEXT,
  description TEXT,
  thumbnail_url TEXT,
  
  -- ë¶„ë¥˜
  category TEXT, -- 'rice', 'soup', 'side_dish', 'meat', 'seafood', 'salad', 'snack', 'beverage'
  subcategory TEXT,
  tags TEXT[],
  
  -- ì²´í˜•ë³„ ì¶”ì²œ
  recommended_body_types TEXT[], -- ['X', 'A', 'Y', 'H', 'O']
  body_type_notes JSONB, -- { "Y": "í•˜ì²´ ë¶€ì¢…ì— ë„ì›€" }
  
  -- ì»¬ëŸ¬ ë¶„ë¥˜ (Noom ìŠ¤íƒ€ì¼)
  color_category TEXT, -- 'green', 'yellow', 'orange'
  
  -- ì˜ì–‘ ì •ë³´ (1ì¸ë¶„ ê¸°ì¤€)
  serving_size INTEGER, -- g
  serving_unit TEXT DEFAULT 'g',
  calories INTEGER,
  protein DECIMAL(5,1),
  carbs DECIMAL(5,1),
  fat DECIMAL(5,1),
  
  -- ìƒì„¸ ì˜ì–‘ì†Œ
  sodium INTEGER, -- mg
  fiber DECIMAL(4,1), -- g
  sugar DECIMAL(5,1), -- g
  cholesterol INTEGER, -- mg
  saturated_fat DECIMAL(4,1), -- g
  
  -- ë©”íƒ€ë°ì´í„°
  is_verified BOOLEAN DEFAULT false,
  source TEXT, -- ë°ì´í„° ì¶œì²˜
  
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- ì‹ë‹¨ ê¸°ë¡ (ì¼ë³„)
CREATE TABLE daily_nutrition_logs (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE,
  date DATE NOT NULL,
  
  -- ì¼ì¼ í•©ê³„ (ìºì‹±ìš©)
  total_calories INTEGER DEFAULT 0,
  total_protein DECIMAL(5,1) DEFAULT 0,
  total_carbs DECIMAL(5,1) DEFAULT 0,
  total_fat DECIMAL(5,1) DEFAULT 0,
  
  -- ëª©í‘œ ë‹¬ì„± ì—¬ë¶€
  target_calories INTEGER,
  is_goal_met BOOLEAN DEFAULT FALSE,
  
  -- ë©”ëª¨
  note TEXT,
  
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW(),
  
  UNIQUE(user_id, date)
);

-- ì‹ì‚¬ë³„ ê¸°ë¡
CREATE TABLE meal_logs (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE,
  daily_log_id UUID REFERENCES daily_nutrition_logs(id) ON DELETE CASCADE,
  
  meal_type TEXT NOT NULL, -- 'breakfast', 'lunch', 'dinner', 'snack'
  logged_at TIMESTAMPTZ DEFAULT NOW(),
  
  -- í•©ê³„ (ìºì‹±ìš©)
  total_calories INTEGER DEFAULT 0,
  total_protein DECIMAL(5,1) DEFAULT 0,
  total_carbs DECIMAL(5,1) DEFAULT 0,
  total_fat DECIMAL(5,1) DEFAULT 0,
  
  -- AI ì¸ì‹ ì‚¬ìš© ì—¬ë¶€
  used_ai_recognition BOOLEAN DEFAULT FALSE,
  ai_recognition_image_url TEXT,
  
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- ê°œë³„ ìŒì‹ ê¸°ë¡
CREATE TABLE food_log_items (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  meal_log_id UUID REFERENCES meal_logs(id) ON DELETE CASCADE,
  food_id UUID REFERENCES foods(id),
  
  -- ìŒì‹ ì •ë³´ (ìŠ¤ëƒ…ìƒ·)
  food_name TEXT NOT NULL,
  
  -- ì„­ì·¨ëŸ‰
  serving_size DECIMAL(5,1), -- ì‹¤ì œ ì„­ì·¨ëŸ‰
  serving_unit TEXT,
  quantity DECIMAL(3,1) DEFAULT 1, -- ì¸ë¶„ ìˆ˜
  
  -- ì˜ì–‘ ì •ë³´ (ê³„ì‚°ëœ ê°’)
  calories INTEGER,
  protein DECIMAL(5,1),
  carbs DECIMAL(5,1),
  fat DECIMAL(5,1),
  
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- ì¦ê²¨ì°¾ê¸° ìŒì‹
CREATE TABLE favorite_foods (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE,
  food_id UUID REFERENCES foods(id) ON DELETE CASCADE,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  
  UNIQUE(user_id, food_id)
);

-- ì‚¬ìš©ì ì •ì˜ ìŒì‹
CREATE TABLE custom_foods (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE,
  
  name TEXT NOT NULL,
  serving_size INTEGER,
  serving_unit TEXT DEFAULT 'g',
  calories INTEGER,
  protein DECIMAL(5,1),
  carbs DECIMAL(5,1),
  fat DECIMAL(5,1),
  
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- ì˜ì–‘ í¬ì¸íŠ¸/ë³´ìƒ
CREATE TABLE nutrition_rewards (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE,
  
  reward_type TEXT, -- 'daily_log', 'streak_3', 'streak_7', 'first_log', 'ai_recognition'
  points INTEGER,
  description TEXT,
  
  created_at TIMESTAMPTZ DEFAULT NOW()
);
```

### 4.2 Row Level Security (RLS)

```sql
-- user_nutrition_profiles
ALTER TABLE user_nutrition_profiles ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Users can view own profile"
  ON user_nutrition_profiles FOR SELECT
  USING (auth.uid() = user_id);

CREATE POLICY "Users can insert own profile"
  ON user_nutrition_profiles FOR INSERT
  WITH CHECK (auth.uid() = user_id);

CREATE POLICY "Users can update own profile"
  ON user_nutrition_profiles FOR UPDATE
  USING (auth.uid() = user_id);

-- foods (ê³µê°œ ì½ê¸°)
ALTER TABLE foods ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Anyone can view foods"
  ON foods FOR SELECT
  USING (true);

-- daily_nutrition_logs
ALTER TABLE daily_nutrition_logs ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Users can view own logs"
  ON daily_nutrition_logs FOR SELECT
  USING (auth.uid() = user_id);

CREATE POLICY "Users can insert own logs"
  ON daily_nutrition_logs FOR INSERT
  WITH CHECK (auth.uid() = user_id);

CREATE POLICY "Users can update own logs"
  ON daily_nutrition_logs FOR UPDATE
  USING (auth.uid() = user_id);

-- meal_logs
ALTER TABLE meal_logs ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Users can manage own meal logs"
  ON meal_logs FOR ALL
  USING (auth.uid() = user_id);

-- food_log_items (meal_logs í†µí•´ ì ‘ê·¼)
ALTER TABLE food_log_items ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Users can manage own food items"
  ON food_log_items FOR ALL
  USING (
    EXISTS (
      SELECT 1 FROM meal_logs
      WHERE meal_logs.id = food_log_items.meal_log_id
      AND meal_logs.user_id = auth.uid()
    )
  );
```

---

## 5. API ì—”ë“œí¬ì¸íŠ¸

### 5.1 Server Actions (Next.js App Router)

```tsx
// app/actions/nutrition.ts
'use server'

import { createClient } from '@/lib/supabase/server'
import { auth } from '@clerk/nextjs/server'

// ì˜¨ë³´ë”© ì™„ë£Œ
export async function completeNutritionOnboarding(data: {
  goal: string;
  mealPattern: string;
  targetCalories: number;
}) {
  const { userId } = await auth();
  if (!userId) throw new Error('Unauthorized');
  
  const supabase = createClient();
  
  const { error } = await supabase
    .from('user_nutrition_profiles')
    .upsert({
      user_id: userId,
      nutrition_goal: data.goal,
      meal_pattern: data.mealPattern,
      target_calories: data.targetCalories,
    });
  
  if (error) throw error;
  return { success: true };
}

// ì˜¤ëŠ˜ì˜ ì˜ì–‘ ìš”ì•½ ê°€ì ¸ì˜¤ê¸°
export async function getTodayNutritionSummary() {
  const { userId } = await auth();
  if (!userId) throw new Error('Unauthorized');
  
  const supabase = createClient();
  const today = new Date().toISOString().split('T')[0];
  
  // í”„ë¡œí•„ ì¡°íšŒ
  const { data: profile } = await supabase
    .from('user_nutrition_profiles')
    .select('target_calories, target_carbs_ratio, target_protein_ratio, target_fat_ratio')
    .eq('user_id', userId)
    .single();
  
  // ì˜¤ëŠ˜ ê¸°ë¡ ì¡°íšŒ
  const { data: dailyLog } = await supabase
    .from('daily_nutrition_logs')
    .select(`
      *,
      meal_logs (
        id,
        meal_type,
        total_calories,
        total_protein,
        total_carbs,
        total_fat,
        food_log_items (*)
      )
    `)
    .eq('user_id', userId)
    .eq('date', today)
    .single();
  
  // ëª©í‘œ ê³„ì‚°
  const targetCalories = profile?.target_calories || 1800;
  const targetCarbs = (targetCalories * (profile?.target_carbs_ratio || 50) / 100) / 4;
  const targetProtein = (targetCalories * (profile?.target_protein_ratio || 30) / 100) / 4;
  const targetFat = (targetCalories * (profile?.target_fat_ratio || 20) / 100) / 9;
  
  return {
    consumed: {
      calories: dailyLog?.total_calories || 0,
      carbs: dailyLog?.total_carbs || 0,
      protein: dailyLog?.total_protein || 0,
      fat: dailyLog?.total_fat || 0,
    },
    target: {
      calories: targetCalories,
      carbs: Math.round(targetCarbs),
      protein: Math.round(targetProtein),
      fat: Math.round(targetFat),
    },
    remaining: {
      calories: targetCalories - (dailyLog?.total_calories || 0),
    },
    meals: dailyLog?.meal_logs || [],
  };
}

// ìŒì‹ ê²€ìƒ‰
export async function searchFoods(query: string, limit = 20) {
  const supabase = createClient();
  
  const { data, error } = await supabase
    .from('foods')
    .select('*')
    .or(`name.ilike.%${query}%,name_en.ilike.%${query}%,tags.cs.{${query}}`)
    .limit(limit);
  
  if (error) throw error;
  return data;
}

// ì¶”ì²œ ìŒì‹ ê°€ì ¸ì˜¤ê¸°
export async function getRecommendedFoods(mealType: string, limit = 5) {
  const { userId } = await auth();
  if (!userId) throw new Error('Unauthorized');
  
  const supabase = createClient();
  
  // ì‚¬ìš©ì í”„ë¡œí•„ ì¡°íšŒ
  const { data: profile } = await supabase
    .from('user_nutrition_profiles')
    .select('body_type, nutrition_goal')
    .eq('user_id', userId)
    .single();
  
  // ì˜¤ëŠ˜ ì„­ì·¨ í˜„í™© ì¡°íšŒ
  const today = new Date().toISOString().split('T')[0];
  const { data: todayLog } = await supabase
    .from('daily_nutrition_logs')
    .select('total_calories, total_protein, total_carbs, total_fat')
    .eq('user_id', userId)
    .eq('date', today)
    .single();
  
  // ë¶€ì¡±í•œ ì˜ì–‘ì†Œ ê³„ì‚°
  const targetProtein = 80; // ì˜ˆì‹œ ëª©í‘œ
  const currentProtein = todayLog?.total_protein || 0;
  const needsProtein = currentProtein < targetProtein * 0.5;
  
  // ì¶”ì²œ ì¿¼ë¦¬ êµ¬ì„±
  let query = supabase
    .from('foods')
    .select('*')
    .limit(limit);
  
  // ì²´í˜• ê¸°ë°˜ í•„í„°ë§
  if (profile?.body_type) {
    query = query.contains('recommended_body_types', [profile.body_type]);
  }
  
  // ë‹¨ë°±ì§ˆ ë¶€ì¡± ì‹œ ë‹¨ë°±ì§ˆ ë†’ì€ ìŒì‹ ì¶”ì²œ
  if (needsProtein) {
    query = query.gte('protein', 15).order('protein', { ascending: false });
  }
  
  // ëª©í‘œì— ë”°ë¥¸ ì»¬ëŸ¬ ì¹´í…Œê³ ë¦¬ í•„í„°ë§
  if (profile?.nutrition_goal === 'weight_loss') {
    query = query.in('color_category', ['green', 'yellow']);
  }
  
  const { data: foods, error } = await query;
  
  if (error) throw error;
  
  // ì¶”ì²œ ì´ìœ  ì¶”ê°€
  return foods?.map(food => ({
    ...food,
    recommendReason: generateRecommendReason(food, profile, todayLog),
  }));
}

// ì‹ì‚¬ ê¸°ë¡ ì €ì¥
export async function logMeal(data: {
  mealType: 'breakfast' | 'lunch' | 'dinner' | 'snack';
  foods: {
    foodId: string;
    foodName: string;
    servingSize: number;
    servingUnit: string;
    quantity: number;
    calories: number;
    protein: number;
    carbs: number;
    fat: number;
  }[];
  usedAiRecognition?: boolean;
  aiRecognitionImageUrl?: string;
}) {
  const { userId } = await auth();
  if (!userId) throw new Error('Unauthorized');
  
  const supabase = createClient();
  const today = new Date().toISOString().split('T')[0];
  
  // 1. daily_nutrition_logs upsert
  const { data: dailyLog, error: dailyError } = await supabase
    .from('daily_nutrition_logs')
    .upsert({
      user_id: userId,
      date: today,
    }, {
      onConflict: 'user_id,date',
    })
    .select()
    .single();
  
  if (dailyError) throw dailyError;
  
  // 2. meal_logs ìƒì„±
  const totalCalories = data.foods.reduce((sum, f) => sum + f.calories * f.quantity, 0);
  const totalProtein = data.foods.reduce((sum, f) => sum + f.protein * f.quantity, 0);
  const totalCarbs = data.foods.reduce((sum, f) => sum + f.carbs * f.quantity, 0);
  const totalFat = data.foods.reduce((sum, f) => sum + f.fat * f.quantity, 0);
  
  const { data: mealLog, error: mealError } = await supabase
    .from('meal_logs')
    .insert({
      user_id: userId,
      daily_log_id: dailyLog.id,
      meal_type: data.mealType,
      total_calories: totalCalories,
      total_protein: totalProtein,
      total_carbs: totalCarbs,
      total_fat: totalFat,
      used_ai_recognition: data.usedAiRecognition || false,
      ai_recognition_image_url: data.aiRecognitionImageUrl,
    })
    .select()
    .single();
  
  if (mealError) throw mealError;
  
  // 3. food_log_items ìƒì„±
  const foodItems = data.foods.map(food => ({
    meal_log_id: mealLog.id,
    food_id: food.foodId,
    food_name: food.foodName,
    serving_size: food.servingSize,
    serving_unit: food.servingUnit,
    quantity: food.quantity,
    calories: food.calories * food.quantity,
    protein: food.protein * food.quantity,
    carbs: food.carbs * food.quantity,
    fat: food.fat * food.quantity,
  }));
  
  const { error: itemsError } = await supabase
    .from('food_log_items')
    .insert(foodItems);
  
  if (itemsError) throw itemsError;
  
  // 4. daily_nutrition_logs í•©ê³„ ì—…ë°ì´íŠ¸
  await updateDailyTotals(dailyLog.id);
  
  // 5. ìŠ¤íŠ¸ë¦­ ì—…ë°ì´íŠ¸
  await updateNutritionStreak(userId);
  
  // 6. í¬ì¸íŠ¸ ì§€ê¸‰
  await grantNutritionRewards(userId, data.usedAiRecognition);
  
  return { success: true, mealLogId: mealLog.id };
}

// AI ìŒì‹ ì¸ì‹
export async function recognizeFood(imageBase64: string) {
  const { userId } = await auth();
  if (!userId) throw new Error('Unauthorized');
  
  // Gemini API í˜¸ì¶œ
  const result = await recognizeFoodFromImage(imageBase64);
  
  if (!result.success) {
    throw new Error(result.error || 'Food recognition failed');
  }
  
  return result.foods;
}

// ì£¼ê°„ í†µê³„ ì¡°íšŒ
export async function getWeeklyNutritionStats() {
  const { userId } = await auth();
  if (!userId) throw new Error('Unauthorized');
  
  const supabase = createClient();
  
  const weekAgo = new Date();
  weekAgo.setDate(weekAgo.getDate() - 7);
  
  const { data, error } = await supabase
    .from('daily_nutrition_logs')
    .select('*')
    .eq('user_id', userId)
    .gte('date', weekAgo.toISOString().split('T')[0])
    .order('date', { ascending: true });
  
  if (error) throw error;
  
  // í†µê³„ ê³„ì‚°
  const avgCalories = data.length > 0
    ? Math.round(data.reduce((sum, d) => sum + (d.total_calories || 0), 0) / data.length)
    : 0;
  
  const goalMetDays = data.filter(d => d.is_goal_met).length;
  
  const avgMacros = {
    carbs: data.length > 0
      ? Math.round(data.reduce((sum, d) => sum + (d.total_carbs || 0), 0) / data.length)
      : 0,
    protein: data.length > 0
      ? Math.round(data.reduce((sum, d) => sum + (d.total_protein || 0), 0) / data.length)
      : 0,
    fat: data.length > 0
      ? Math.round(data.reduce((sum, d) => sum + (d.total_fat || 0), 0) / data.length)
      : 0,
  };
  
  return {
    dailyData: data,
    avgCalories,
    goalMetDays,
    totalDays: 7,
    avgMacros,
  };
}

// ìì£¼ ë¨¹ëŠ” ìŒì‹ ì¡°íšŒ
export async function getTopFoods(period: 'week' | 'month' = 'week', limit = 5) {
  const { userId } = await auth();
  if (!userId) throw new Error('Unauthorized');
  
  const supabase = createClient();
  
  const daysAgo = period === 'week' ? 7 : 30;
  const startDate = new Date();
  startDate.setDate(startDate.getDate() - daysAgo);
  
  // food_log_itemsì—ì„œ ì§‘ê³„
  const { data, error } = await supabase
    .from('food_log_items')
    .select(`
      food_name,
      calories,
      meal_log:meal_logs!inner(
        user_id,
        created_at
      )
    `)
    .eq('meal_log.user_id', userId)
    .gte('meal_log.created_at', startDate.toISOString());
  
  if (error) throw error;
  
  // ìŒì‹ë³„ ì§‘ê³„
  const foodCounts: Record<string, { count: number; totalCalories: number }> = {};
  
  data?.forEach(item => {
    if (!foodCounts[item.food_name]) {
      foodCounts[item.food_name] = { count: 0, totalCalories: 0 };
    }
    foodCounts[item.food_name].count++;
    foodCounts[item.food_name].totalCalories += item.calories || 0;
  });
  
  // ì •ë ¬ ë° ìƒìœ„ Nê°œ ë°˜í™˜
  return Object.entries(foodCounts)
    .map(([name, stats]) => ({ name, ...stats }))
    .sort((a, b) => b.count - a.count)
    .slice(0, limit);
}

// ì¦ê²¨ì°¾ê¸° ì¶”ê°€/ì œê±°
export async function toggleFavoriteFood(foodId: string) {
  const { userId } = await auth();
  if (!userId) throw new Error('Unauthorized');
  
  const supabase = createClient();
  
  // ê¸°ì¡´ ì¦ê²¨ì°¾ê¸° í™•ì¸
  const { data: existing } = await supabase
    .from('favorite_foods')
    .select('id')
    .eq('user_id', userId)
    .eq('food_id', foodId)
    .single();
  
  if (existing) {
    // ì œê±°
    await supabase
      .from('favorite_foods')
      .delete()
      .eq('id', existing.id);
    return { isFavorite: false };
  } else {
    // ì¶”ê°€
    await supabase
      .from('favorite_foods')
      .insert({ user_id: userId, food_id: foodId });
    return { isFavorite: true };
  }
}
```

---

## 6. UX êµ¬í˜„ ì²´í¬ë¦¬ìŠ¤íŠ¸

### 6.1 ê²Œì´ë¯¸í”¼ì¼€ì´ì…˜ (ì¡°ì‚¬ ë¬¶ìŒ A ê¸°ë°˜)

- [ ] **ìŠ¤íŠ¸ë¦­ ì‹œìŠ¤í…œ**
  - [ ] ìº˜ë¦°ë” UIì— ê¸°ë¡ì¼ ì²´í¬ë§ˆí¬ í‘œì‹œ
  - [ ] "5ì¼ ì—°ì† ê¸°ë¡ ì¤‘! ğŸ”¥" ë°°ì§€
  - [ ] ìŠ¤íŠ¸ë¦­ ë³´í˜¸ (1íšŒ ë¬´ë£Œ ë³µêµ¬)
  - [ ] ìµœì¥ ìŠ¤íŠ¸ë¦­ ê¸°ë¡ í‘œì‹œ

- [ ] **í¬ì¸íŠ¸/ë ˆë²¨**
  - [ ] ì‹ë‹¨ ê¸°ë¡ +10P
  - [ ] AI ì¸ì‹ ì‚¬ìš© +5P
  - [ ] 3ì¼ ì—°ì† +15P
  - [ ] 7ì¼ ì—°ì† +30P

- [ ] **ë§ˆì´í¬ë¡œì¸í„°ë™ì…˜**
  - [ ] ê¸°ë¡ ì™„ë£Œ ì‹œ ì²´í¬ë§ˆí¬ ì• ë‹ˆë©”ì´ì…˜
  - [ ] ì¹¼ë¡œë¦¬ ì¹´ìš´í„° ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸
  - [ ] ë§¤í¬ë¡œ ë°” ì±„ìš°ê¸° ì• ë‹ˆë©”ì´ì…˜
  - [ ] ëª©í‘œ ë‹¬ì„± ì‹œ ì»¨í˜í‹°

### 6.2 ê°œì¸í™”/AI (ì¡°ì‚¬ ë¬¶ìŒ B ê¸°ë°˜)

- [ ] **AI ìŒì‹ ì¸ì‹**
  - [ ] ì‚¬ì§„ ì´¬ì˜ â†’ 2ì´ˆ ë‚´ ì¸ì‹ ê²°ê³¼
  - [ ] ì¸ì‹ ì‹ ë¢°ë„ í‘œì‹œ
  - [ ] ìˆ˜ë™ ìˆ˜ì • ì˜µì…˜

- [ ] **AI ë¼ë²¨ë§**
  - [ ] âœ¨ ì•„ì´ì½˜ + "AI ë§ì¶¤ ì¶”ì²œ" í…ìŠ¤íŠ¸
  - [ ] ì¶”ì²œ ì´ìœ  ì„¤ëª… (ì²´í˜•/ëª©í‘œ ì—°ê²°)

- [ ] **ì²´í˜•ë³„ ì¶”ì²œ**
  - [ ] "Yì²´í˜•ì—ê²Œ ì í•©í•œ ìŒì‹" ë¼ë²¨
  - [ ] ì²´í˜•ë³„ ì£¼ì˜ì‚¬í•­ í‘œì‹œ

- [ ] **í”¼ë“œë°± ìˆ˜ì§‘**
  - [ ] ìŒì‹ í‰ê°€ (ë§›ìˆì–´ìš”/ë³„ë¡œì˜ˆìš”)
  - [ ] "ì´ ìŒì‹ ë‹¤ì‹œ ì¶”ì²œí•˜ì§€ ì•Šê¸°"

### 6.3 ì •ë³´ ì „ë‹¬ (ì¡°ì‚¬ ë¬¶ìŒ C ê¸°ë°˜)

- [ ] **ëŒ€ì‹œë³´ë“œ**
  - [ ] ì›í˜• ì¹¼ë¡œë¦¬ ê²Œì´ì§€ (ì”ì—¬ ì¹¼ë¡œë¦¬ ì¤‘ì‹¬)
  - [ ] íƒ„ë‹¨ì§€ 3ìƒ‰ ìˆ˜í‰ ë°”
  - [ ] ë¼ë‹ˆë³„ ì¹´ë“œ (ì•„ì¹¨/ì ì‹¬/ì €ë…/ê°„ì‹)

- [ ] **ì»¬ëŸ¬ ì½”ë”© (Noom ìŠ¤íƒ€ì¼)**
  - [ ] ğŸŸ¢ Green Foods (ì €ì¹¼ë¡œë¦¬ ë°€ë„)
  - [ ] ğŸŸ¡ Yellow Foods (ì¤‘ê°„)
  - [ ] ğŸŸ  Orange Foods (ê³ ì¹¼ë¡œë¦¬ ë°€ë„)

- [ ] **ì˜¨ë³´ë”©**
  - [ ] 3ë¬¸í•­, 30ì´ˆ ì´ë‚´ ì™„ë£Œ
  - [ ] ì¹¼ë¡œë¦¬ ìë™ ê³„ì‚° + ìŠ¬ë¼ì´ë” ì¡°ì •
  - [ ] ìŠ¤í‚µ ê°€ëŠ¥

- [ ] **ë¹ˆ ìƒíƒœ**
  - [ ] ë¼ë‹ˆë³„ "+ ê¸°ë¡í•˜ê¸°" ë²„íŠ¼
  - [ ] ë™ê¸°ë¶€ì—¬ ë©”ì‹œì§€

---

## 7. íŒŒì¼ êµ¬ì¡°

```
app/
â”œâ”€â”€ (protected)/
â”‚   â””â”€â”€ nutrition/
â”‚       â”œâ”€â”€ page.tsx                 # ëŒ€ì‹œë³´ë“œ
â”‚       â”œâ”€â”€ onboarding/
â”‚       â”‚   â””â”€â”€ page.tsx             # ì˜¨ë³´ë”©
â”‚       â”œâ”€â”€ log/
â”‚       â”‚   â”œâ”€â”€ page.tsx             # ê¸°ë¡ ë©”ì¸
â”‚       â”‚   â”œâ”€â”€ camera/
â”‚       â”‚   â”‚   â””â”€â”€ page.tsx         # AI ì‚¬ì§„ ì¸ì‹
â”‚       â”‚   â””â”€â”€ search/
â”‚       â”‚       â””â”€â”€ page.tsx         # ìŒì‹ ê²€ìƒ‰
â”‚       â”œâ”€â”€ food/
â”‚       â”‚   â””â”€â”€ [foodId]/
â”‚       â”‚       â””â”€â”€ page.tsx         # ìŒì‹ ìƒì„¸
â”‚       â”œâ”€â”€ history/
â”‚       â”‚   â””â”€â”€ page.tsx             # ê¸°ë¡/í†µê³„
â”‚       â””â”€â”€ explore/
â”‚           â””â”€â”€ page.tsx             # ìŒì‹ íƒìƒ‰
â”œâ”€â”€ actions/
â”‚   â””â”€â”€ nutrition.ts                 # Server Actions
â””â”€â”€ api/
    â””â”€â”€ nutrition/
        â””â”€â”€ recognize/
            â””â”€â”€ route.ts             # AI ì¸ì‹ API

components/
â””â”€â”€ nutrition/
    â”œâ”€â”€ CalorieRing.tsx
    â”œâ”€â”€ MacroProgressBar.tsx
    â”œâ”€â”€ MealCard.tsx
    â”œâ”€â”€ FoodCard.tsx
    â”œâ”€â”€ FoodDetailView.tsx
    â”œâ”€â”€ FoodSearchInput.tsx
    â”œâ”€â”€ FoodRecognitionResult.tsx
    â”œâ”€â”€ ServingSizeSelector.tsx
    â”œâ”€â”€ NutritionFactsCard.tsx
    â”œâ”€â”€ WeeklySummaryChart.tsx
    â”œâ”€â”€ MacroBalancePieChart.tsx
    â”œâ”€â”€ TopFoodsCard.tsx
    â”œâ”€â”€ DailyLogItem.tsx
    â”œâ”€â”€ StreakBadge.tsx
    â””â”€â”€ ColorCategoryBadge.tsx

stores/
â””â”€â”€ foodLogStore.ts                  # Zustand store

types/
â””â”€â”€ nutrition.ts                     # TypeScript íƒ€ì…

lib/
â””â”€â”€ nutrition/
    â”œâ”€â”€ calorieCalculator.ts         # ì¹¼ë¡œë¦¬ ê³„ì‚°
    â”œâ”€â”€ foodRecognition.ts           # AI ìŒì‹ ì¸ì‹
    â”œâ”€â”€ recommendationEngine.ts      # ì¶”ì²œ ì—”ì§„
    â””â”€â”€ streakUtils.ts               # ìŠ¤íŠ¸ë¦­ ìœ í‹¸ë¦¬í‹°
```

---

## 8. êµ¬í˜„ ìš°ì„ ìˆœìœ„

### Phase 2-1: MVP (1-2ì£¼)
1. ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ìƒì„±
2. ìŒì‹ ì‹œë“œ ë°ì´í„° ì‚½ì… (80ê°œ í•œêµ­ ìŒì‹)
3. ëŒ€ì‹œë³´ë“œ ê¸°ë³¸ UI
4. ìŒì‹ ê²€ìƒ‰ + ìƒì„¸ í™”ë©´
5. ìˆ˜ë™ ì‹ë‹¨ ê¸°ë¡

### Phase 2-2: í•µì‹¬ ê¸°ëŠ¥ (2-3ì£¼)
6. ì˜¨ë³´ë”© í”Œë¡œìš°
7. AI ìŒì‹ ì¸ì‹ (Gemini API)
8. ê¸°ë¡/í†µê³„ í™”ë©´
9. ìŠ¤íŠ¸ë¦­ ì‹œìŠ¤í…œ

### Phase 2-3: ê³ ë„í™” (3-4ì£¼)
10. ì²´í˜•ë³„ ë§ì¶¤ ì¶”ì²œ
11. ì»¬ëŸ¬ ì½”ë”© ì‹œìŠ¤í…œ
12. ê²Œì´ë¯¸í”¼ì¼€ì´ì…˜ (í¬ì¸íŠ¸/ë°°ì§€)
13. í‘¸ì‹œ ì•Œë¦¼ ì—°ë™

---

## 9. W-1 ëª¨ë“ˆê³¼ì˜ ì—°ë™

### 9.1 ìš´ë™ ì¹¼ë¡œë¦¬ ì—°ë™

```tsx
// W-1 ìš´ë™ ì™„ë£Œ ì‹œ N-1ì— ë°˜ì˜
async function syncWorkoutCalories(
  userId: string,
  caloriesBurned: number
) {
  const supabase = createClient();
  const today = new Date().toISOString().split('T')[0];
  
  // daily_nutrition_logsì— ìš´ë™ ì†Œëª¨ ì¹¼ë¡œë¦¬ ì¶”ê°€
  // â†’ ì”ì—¬ ì¹¼ë¡œë¦¬ ê³„ì‚°ì— ë°˜ì˜
}
```

### 9.2 í†µí•© ëŒ€ì‹œë³´ë“œ

```
ì´ë£¸ í™ˆ ëŒ€ì‹œë³´ë“œ
â”œâ”€â”€ ì˜¤ëŠ˜ì˜ ì›°ë‹ˆìŠ¤ ìš”ì•½
â”‚   â”œâ”€â”€ ì¹¼ë¡œë¦¬: ì„­ì·¨ 1,250 - ìš´ë™ 125 = ìˆœ 1,125 kcal
â”‚   â”œâ”€â”€ ìš´ë™: 1/1 ì™„ë£Œ âœ“
â”‚   â””â”€â”€ ì‹ë‹¨: 2/3 ê¸°ë¡
â”œâ”€â”€ ë¹ ë¥¸ ì ‘ê·¼
â”‚   â”œâ”€â”€ [ìš´ë™ ì‹œì‘] â†’ W-1
â”‚   â””â”€â”€ [ì‹ë‹¨ ê¸°ë¡] â†’ N-1
â””â”€â”€ ì²´í˜• ë§ì¶¤ ì¸ì‚¬ì´íŠ¸
    â””â”€â”€ "Yì²´í˜•ì„ ìœ„í•œ ì˜¤ëŠ˜ì˜ íŒ: ..."
```

---

## 10. ì°¸ê³  ìë£Œ

- [ì¡°ì‚¬ ë¬¶ìŒ A] ê²Œì´ë¯¸í”¼ì¼€ì´ì…˜ ì „ëµ ê°€ì´ë“œ
- [ì¡°ì‚¬ ë¬¶ìŒ B] ê°œì¸í™”/AI ì¶”ì²œ UX ê°€ì´ë“œ
- [ì¡°ì‚¬ ë¬¶ìŒ C] ì •ë³´ ì „ë‹¬ UX ê°€ì´ë“œ
- [ë°ì´í„° ì‹œë”©] í•œêµ­ ìŒì‹ 80ê°œ (KF-001~080)
- ì´ë£¸ Phase 1 UI ëª©ì—…
- DESIGNNAS ê°€ì´ë“œë¼ì¸
