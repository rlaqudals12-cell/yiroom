# QA 프로세스 가이드

> **Version**: 1.0 | **Updated**: 2026-01-21
> **Status**: `active`

---

## 1. 개요

이 문서는 이룸 서비스의 품질 보증(QA) 프로세스를 정의합니다.

---

## 2. QA 단계

### 2.1 QA 파이프라인

```
┌─────────────────────────────────────────────────────────────────┐
│                      QA 파이프라인                               │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│   개발 완료                                                      │
│       │                                                          │
│       ▼                                                          │
│   ┌─────────────────────────────────────────────────────────┐   │
│   │ Stage 1: 자동화 테스트                                   │   │
│   │ ├── 단위 테스트 (Unit Tests)                             │   │
│   │ ├── 통합 테스트 (Integration Tests)                      │   │
│   │ ├── 타입 체크 (TypeScript)                               │   │
│   │ └── 린트 (ESLint)                                        │   │
│   └─────────────────────────────────────────────────────────┘   │
│       │                                                          │
│       ▼                                                          │
│   ┌─────────────────────────────────────────────────────────┐   │
│   │ Stage 2: 코드 리뷰                                       │   │
│   │ ├── PR 리뷰 (1명 이상 승인)                              │   │
│   │ ├── 보안 체크리스트                                      │   │
│   │ └── 아키텍처 준수 확인                                   │   │
│   └─────────────────────────────────────────────────────────┘   │
│       │                                                          │
│       ▼                                                          │
│   ┌─────────────────────────────────────────────────────────┐   │
│   │ Stage 3: 스테이징 테스트                                 │   │
│   │ ├── 수동 기능 테스트                                     │   │
│   │ ├── UI/UX 검수                                           │   │
│   │ └── 성능 확인                                            │   │
│   └─────────────────────────────────────────────────────────┘   │
│       │                                                          │
│       ▼                                                          │
│   ┌─────────────────────────────────────────────────────────┐   │
│   │ Stage 4: 프로덕션 배포                                   │   │
│   │ ├── 점진적 롤아웃 (선택)                                 │   │
│   │ └── 모니터링                                             │   │
│   └─────────────────────────────────────────────────────────┘   │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

---

## 3. 자동화 테스트

### 3.1 테스트 실행

```bash
# 전체 테스트 실행
npm run test

# 특정 파일 테스트
npm run test -- path/to/file.test.ts

# 커버리지 확인
npm run test:coverage

# 타입 체크
npm run typecheck

# 린트
npm run lint
```

### 3.2 테스트 커버리지 목표

| 영역 | 최소 커버리지 | 목표 커버리지 |
|------|--------------|--------------|
| lib/ | 70% | 90% |
| components/ | 50% | 75% |
| API routes | 70% | 85% |
| **전체** | **60%** | **80%** |

### 3.3 CI 파이프라인

```yaml
# .github/workflows/ci.yml 핵심 단계
jobs:
  test:
    steps:
      - name: Type Check
        run: npm run typecheck

      - name: Lint
        run: npm run lint

      - name: Unit Tests
        run: npm run test

      - name: Coverage Check
        run: npm run test:coverage
```

---

## 4. 코드 리뷰

### 4.1 PR 체크리스트

```markdown
## PR 리뷰 체크리스트

### 기능
□ 요구사항 충족 여부
□ 엣지 케이스 처리
□ 에러 핸들링

### 코드 품질
□ 코드 스타일 준수
□ 중복 코드 없음
□ 적절한 추상화

### 보안
□ 입력 검증
□ 인증/인가 확인
□ 민감 정보 노출 없음

### 테스트
□ 새 코드에 테스트 추가
□ 기존 테스트 통과

### 문서
□ 필요시 문서 업데이트
□ 복잡한 로직 주석
```

### 4.2 리뷰 기준

| 변경 규모 | 필요 리뷰어 | 예상 시간 |
|-----------|------------|----------|
| 소 (< 100줄) | 1명 | 30분 |
| 중 (100-500줄) | 1-2명 | 1-2시간 |
| 대 (> 500줄) | 2명+ | 4시간+ |

---

## 5. 수동 테스트

### 5.1 기능 테스트 체크리스트

```markdown
## 분석 기능 테스트

### PC-1 퍼스널컬러
□ 이미지 업로드 (정상 이미지)
□ 이미지 업로드 (저화질 이미지) - 에러 처리
□ 분석 결과 표시
□ 결과 저장 확인
□ 히스토리 조회

### S-1 피부 분석
□ 이미지 업로드
□ 6존 분석 결과 표시
□ 점수/등급 정확성
□ 추천 제품 표시

### 인증 플로우
□ 회원가입 (이메일)
□ 회원가입 (소셜)
□ 로그인/로그아웃
□ 비밀번호 재설정
□ 회원 탈퇴
```

### 5.2 디바이스/브라우저 테스트

```markdown
## 테스트 매트릭스

### 모바일
□ iOS Safari (최신)
□ iOS Chrome
□ Android Chrome (최신)
□ Android Samsung Internet

### 데스크톱
□ Chrome (최신)
□ Safari (최신)
□ Firefox (최신)
□ Edge (최신)

### 해상도
□ 모바일 (375px)
□ 태블릿 (768px)
□ 데스크톱 (1024px+)
```

### 5.3 엣지 케이스 테스트

```markdown
## 엣지 케이스

### 네트워크
□ 느린 네트워크 (3G)
□ 네트워크 끊김
□ 재연결 시 상태 복구

### 입력
□ 빈 입력
□ 최대 길이 입력
□ 특수 문자 입력
□ 멀티바이트 문자 (한글, 이모지)

### 동시성
□ 중복 클릭 방지
□ 동시 요청 처리
□ 세션 만료 처리
```

---

## 6. 성능 테스트

### 6.1 성능 기준

| 지표 | 기준 | 측정 방법 |
|------|------|----------|
| LCP | < 2.5s | Lighthouse |
| FID | < 100ms | Lighthouse |
| CLS | < 0.1 | Lighthouse |
| API 응답 | < 500ms | 모니터링 |
| 분석 응답 | < 5s | 수동 측정 |

### 6.2 성능 테스트 도구

```bash
# Lighthouse CLI
npx lighthouse https://yiroom.app --view

# 번들 분석
npm run analyze

# 로드 테스트 (선택)
npx autocannon -c 10 -d 30 https://yiroom.app/api/health
```

---

## 7. 버그 관리

### 7.1 버그 분류

| 심각도 | 정의 | 대응 시간 |
|--------|------|----------|
| **Critical** | 서비스 불가 | 즉시 |
| **High** | 핵심 기능 장애 | 24시간 |
| **Medium** | 기능 제한 | 1주일 |
| **Low** | 경미한 문제 | 다음 릴리즈 |

### 7.2 버그 리포트 템플릿

```markdown
## 버그 리포트

### 요약
{한 줄 요약}

### 재현 단계
1. {단계 1}
2. {단계 2}
3. {단계 3}

### 예상 결과
{정상적으로 예상되는 결과}

### 실제 결과
{실제 발생한 결과}

### 환경
- 브라우저:
- OS:
- 기기:
- 앱 버전:

### 스크린샷/로그
{첨부}
```

---

## 8. 릴리즈 체크리스트

### 8.1 릴리즈 전 확인

```markdown
## 릴리즈 체크리스트

### 자동화 테스트
□ 모든 테스트 통과
□ 커버리지 기준 충족
□ 타입 체크 통과
□ 린트 통과

### 수동 테스트
□ 핵심 기능 테스트 완료
□ 회귀 테스트 완료
□ 크로스 브라우저 테스트

### 성능
□ Lighthouse 90+ (모바일)
□ API 응답 시간 확인
□ 번들 크기 확인

### 문서
□ CHANGELOG 업데이트
□ 릴리즈 노트 작성

### 배포 준비
□ 환경 변수 확인
□ DB 마이그레이션 확인 (해당 시)
□ 롤백 계획 확인
```

### 8.2 릴리즈 후 확인

```markdown
□ 프로덕션 서비스 정상 확인
□ 에러 모니터링 확인 (Sentry)
□ 성능 모니터링 확인
□ 주요 플로우 수동 테스트
```

---

## 9. 테스트 환경

### 9.1 환경 구성

| 환경 | URL | 용도 |
|------|-----|------|
| Local | localhost:3000 | 개발 |
| Preview | *.vercel.app | PR 리뷰 |
| Staging | staging.yiroom.app | 통합 테스트 |
| Production | yiroom.app | 프로덕션 |

### 9.2 테스트 데이터

```typescript
// 테스트 계정
const testAccounts = {
  free: {
    email: 'test-free@yiroom.app',
    password: '테스트 환경에서만 사용',
  },
  premium: {
    email: 'test-premium@yiroom.app',
    password: '테스트 환경에서만 사용',
  },
};

// 테스트 이미지
const testImages = {
  validFace: '/tests/fixtures/valid-face.jpg',
  lowQuality: '/tests/fixtures/low-quality.jpg',
  noFace: '/tests/fixtures/no-face.jpg',
};
```

---

## 관련 문서

- [.claude/rules/testing-patterns.md](../../.claude/rules/testing-patterns.md) - 테스트 패턴
- [docs/ops/LAUNCH-CHECKLIST.md](LAUNCH-CHECKLIST.md) - 출시 체크리스트
- [docs/ops/INCIDENT-RESPONSE.md](INCIDENT-RESPONSE.md) - 위기 대응

---

**Author**: Claude Code
