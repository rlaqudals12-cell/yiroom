# SDD: ëª¨ë‹ˆí„°ë§ (Monitoring)

> **Status**: Proposed
> **Version**: 2.0
> **Created**: 2026-01-23
> **Updated**: 2026-01-23

> ì‹œìŠ¤í…œ ê´€ì¸¡ì„±(Observability) í™•ë³´ë¥¼ ìœ„í•œ ëª¨ë‹ˆí„°ë§ ì „ëµ ë° êµ¬í˜„ ê°€ì´ë“œ

---

## 0. ê¶ê·¹ì˜ í˜•íƒœ (P1)

### ì´ìƒì  ìµœì¢… ìƒíƒœ

"ëª¨ë“  ì‹œìŠ¤í…œ ìƒíƒœê°€ ì‹¤ì‹œê°„ìœ¼ë¡œ ê´€ì¸¡ ê°€ëŠ¥í•œ ìƒíƒœ"

- **100% Tracing**: ëª¨ë“  API í˜¸ì¶œ ì¶”ì , ì„œë¹„ìŠ¤ ê°„ ì˜ì¡´ì„± ìë™ ë§¤í•‘
- **ì‹¤ì‹œê°„ Metrics**: Core Web Vitals, API p50/p95/p99, ë¹„ì¦ˆë‹ˆìŠ¤ KPI
- **ì¤‘ì•™í™” Logs**: êµ¬ì¡°í™”ëœ ë¡œê·¸ ê²€ìƒ‰, ì—ëŸ¬ ì»¨í…ìŠ¤íŠ¸ ìë™ ìˆ˜ì§‘, PII ë§ˆìŠ¤í‚¹
- **AI ì´ìƒ íƒì§€**: ML ê¸°ë°˜ ì´ìƒ íƒì§€, ì„ ì œì  ë¬¸ì œ ì˜ˆì¸¡, ìë™ ë¡¤ë°± íŠ¸ë¦¬ê±°
- **ìŠ¤ë§ˆíŠ¸ ì•Œë¦¼**: ì‹¬ê°ë„ë³„ ì±„ë„ ë¶„ë¦¬, ì•Œë¦¼ í”¼ë¡œ ë°©ì§€, ì—ìŠ¤ì»¬ë ˆì´ì…˜ ìë™í™”
- **ë¹ ë¥¸ RCA**: ì¥ì•  ì›ì¸ 5ë¶„ ë‚´ ì‹ë³„, ê·¼ë³¸ ì›ì¸ ìë™ ë¶„ì„

### ë¬¼ë¦¬ì  í•œê³„

| í•œê³„ | ì„¤ëª… |
|------|------|
| ë„¤íŠ¸ì›Œí¬ ì§€ì—° | ì•Œë¦¼ê¹Œì§€ ìµœì†Œ ìˆ˜ ì´ˆ |
| ë¹„ìš© | ëª¨ë“  ìš”ì²­ ì €ì¥ ì‹œ ë¹„ìš© ì¦ê°€ |
| ê°œì¸ì •ë³´ | ì‚¬ìš©ì í–‰ë™ ì¶”ì  ì‹œ ë™ì˜ í•„ìš” |
| ìƒ˜í”Œë§ Trade-off | 100% ì¶”ì  vs ë¹„ìš© |

### 100ì  ê¸°ì¤€

| í•­ëª© | 100ì  ê¸°ì¤€ | í˜„ì¬ | ë‹¬ì„±ë¥  |
|------|-----------|------|--------|
| ì—ëŸ¬ ì¶”ì  | 100% ìº¡ì²˜ | 100% | 100% |
| ì„±ëŠ¥ ì¶”ì  | ì‹¤ì‹œê°„ ì „ì²´ | 10% ìƒ˜í”Œë§ | 10% |
| ë¡œê¹… | ì „ì²´ ì €ì¥ | 90ì¼ ë³´ê´€ | 80% |
| ì•Œë¦¼ | ì¦‰ì‹œ | 5ë¶„ ì´ë‚´ | 70% |
| ëŒ€ì‹œë³´ë“œ | ì‹¤ì‹œê°„ | ì˜ˆì • | 0% |
| AI ì´ìƒ íƒì§€ | ML ê¸°ë°˜ | ì œì™¸ | 0% |

### í˜„ì¬ ëª©í‘œ

**ì¢…í•© ë‹¬ì„±ë¥ **: **70%** (MVP Monitoring)

### ì˜ë„ì  ì œì™¸ (ì´ë²ˆ ë²„ì „)

- 100% ì„±ëŠ¥ ì¶”ì  (10% ìƒ˜í”Œë§ìœ¼ë¡œ ë¹„ìš© ìµœì í™”)
- ì‹¤ì‹œê°„ ëŒ€ì‹œë³´ë“œ (Phase 3)
- AI ê¸°ë°˜ ì´ìƒ íƒì§€ (Phase 4)

#### ğŸ“Š êµ¬í˜„ í˜„í™©

| ê¸°ëŠ¥ | ìƒíƒœ | ìœ„ì¹˜ |
|------|------|------|
| Sentry ì—ëŸ¬ ì¶”ì  | âœ… ì™„ë£Œ | `lib/monitoring/sentry.ts` |
| Web Vitals ìˆ˜ì§‘ | âœ… ì™„ë£Œ | `lib/analytics/web-vitals.ts` |
| Web Vitals Provider | âœ… ì™„ë£Œ | `components/providers/web-vitals-provider.tsx` |
| Analytics ì¶”ì  | âœ… ì™„ë£Œ | `lib/monitoring/analytics.ts` |
| API ì‘ë‹µ ì‹œê°„ ì¸¡ì • | â³ ì§„í–‰ì¤‘ | `lib/monitoring/api-timing.ts` |
| ì—ëŸ¬ìœ¨ ì•Œë¦¼ | ğŸ“‹ ê³„íš | `lib/monitoring/error-alerting.ts` |
| ì„±ëŠ¥ ëŒ€ì‹œë³´ë“œ | ğŸ“‹ ê³„íš | `app/admin/monitoring/page.tsx` |
| Fallback ì‚¬ìš© ì¶”ì  | ğŸ“‹ ê³„íš | `lib/monitoring/fallback-tracker.ts` |

---

## 1. ê°œìš”

### 1.1 ëª©ì 

- ì‹œìŠ¤í…œ ìƒíƒœì˜ ì‹¤ì‹œê°„ ê´€ì¸¡ ë° ì´ìƒ íƒì§€
- Core Web Vitals ê¸°ë°˜ ì‚¬ìš©ì ê²½í—˜ ëª¨ë‹ˆí„°ë§
- ì¥ì•  ë°œìƒ ì‹œ ì‹ ì†í•œ ê°ì§€ ë° ëŒ€ì‘
- ì„±ëŠ¥ ë³‘ëª© ì‹ë³„ ë° ìµœì í™” ê·¼ê±° í™•ë³´
- ë””ë²„ê¹… ë° ë¬¸ì œ ì¶”ì 

### 1.2 P1: ê¶ê·¹ì˜ í˜•íƒœ

> **"ëª¨ë“  ì‹œìŠ¤í…œ ìƒíƒœê°€ ì‹¤ì‹œê°„ìœ¼ë¡œ ê´€ì¸¡ ê°€ëŠ¥í•œ ìƒíƒœ"**

#### 1.2.1 ì´ìƒì  ìµœì¢… ìƒíƒœ (100ì )

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          ê¶ê·¹ì˜ ê´€ì¸¡ì„± ì‹œìŠ¤í…œ                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                               â”‚
â”‚  ëª¨ë“  API í˜¸ì¶œì´ ì¶”ì ë¨ (100% Tracing)                                        â”‚
â”‚  â”œâ”€â”€ ìš”ì²­ â†’ ì²˜ë¦¬ â†’ ì‘ë‹µ ì „ì²´ ê²½ë¡œ ê°€ì‹œí™”                                      â”‚
â”‚  â”œâ”€â”€ ì„œë¹„ìŠ¤ ê°„ ì˜ì¡´ì„± ìë™ ë§¤í•‘                                               â”‚
â”‚  â””â”€â”€ ë³‘ëª© ì§€ì  ì¦‰ì‹œ ì‹ë³„                                                      â”‚
â”‚                                                                               â”‚
â”‚  ëª¨ë“  ë©”íŠ¸ë¦­ì´ ì‹¤ì‹œê°„ ì§‘ê³„ë¨ (Metrics)                                         â”‚
â”‚  â”œâ”€â”€ Core Web Vitals ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§                                          â”‚
â”‚  â”œâ”€â”€ API ì‘ë‹µ ì‹œê°„ p50/p95/p99 ì¶”ì                                            â”‚
â”‚  â””â”€â”€ ë¹„ì¦ˆë‹ˆìŠ¤ KPI ëŒ€ì‹œë³´ë“œ                                                    â”‚
â”‚                                                                               â”‚
â”‚  ëª¨ë“  ë¡œê·¸ê°€ ì¤‘ì•™í™”ë¨ (Logs)                                                   â”‚
â”‚  â”œâ”€â”€ êµ¬ì¡°í™”ëœ ë¡œê·¸ ê²€ìƒ‰                                                       â”‚
â”‚  â”œâ”€â”€ ì—ëŸ¬ ì»¨í…ìŠ¤íŠ¸ ìë™ ìˆ˜ì§‘                                                  â”‚
â”‚  â””â”€â”€ PII ìë™ ë§ˆìŠ¤í‚¹                                                          â”‚
â”‚                                                                               â”‚
â”‚  ì´ìƒ íŒ¨í„´ì´ ìë™ íƒì§€ë¨                                                       â”‚
â”‚  â”œâ”€â”€ ML ê¸°ë°˜ ì´ìƒ íƒì§€                                                        â”‚
â”‚  â”œâ”€â”€ ì„ ì œì  ë¬¸ì œ ì˜ˆì¸¡                                                         â”‚
â”‚  â””â”€â”€ ìë™ ë¡¤ë°± íŠ¸ë¦¬ê±°                                                         â”‚
â”‚                                                                               â”‚
â”‚  ì•Œë¦¼ì´ ì ì ˆí•œ ì±„ë„ë¡œ ì „ë‹¬ë¨                                                   â”‚
â”‚  â”œâ”€â”€ ì‹¬ê°ë„ë³„ ì±„ë„ ë¶„ë¦¬                                                       â”‚
â”‚  â”œâ”€â”€ ì•Œë¦¼ í”¼ë¡œ ë°©ì§€                                                           â”‚
â”‚  â””â”€â”€ ì—ìŠ¤ì»¬ë ˆì´ì…˜ ìë™í™”                                                      â”‚
â”‚                                                                               â”‚
â”‚  ì¥ì•  ì›ì¸ì´ 5ë¶„ ë‚´ ì‹ë³„ë¨                                                     â”‚
â”‚  â”œâ”€â”€ ê·¼ë³¸ ì›ì¸ ìë™ ë¶„ì„                                                      â”‚
â”‚  â”œâ”€â”€ ê´€ë ¨ ë¡œê·¸/ë©”íŠ¸ë¦­ ìë™ ì—°ê²°                                               â”‚
â”‚  â””â”€â”€ ì¬í˜„ í™˜ê²½ ì œê³µ                                                           â”‚
â”‚                                                                               â”‚
â”‚  ë¬¼ë¦¬ì  í•œê³„:                                                                 â”‚
â”‚  - ë„¤íŠ¸ì›Œí¬ ì§€ì—° (ì•Œë¦¼ê¹Œì§€ ìµœì†Œ ìˆ˜ ì´ˆ)                                        â”‚
â”‚  - ë¹„ìš© (ëª¨ë“  ìš”ì²­ ì €ì¥ ì‹œ ë¹„ìš© ì¦ê°€)                                         â”‚
â”‚  - ê°œì¸ì •ë³´ (ì‚¬ìš©ì í–‰ë™ ì¶”ì  ì‹œ ë™ì˜ í•„ìš”)                                   â”‚
â”‚                                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 1.2.2 í˜„ì¬ ëª©í‘œ (70%)

| í•­ëª© | 100ì  | í˜„ì¬ ëª©í‘œ | ë¹„ê³  |
|------|-------|----------|------|
| ì—ëŸ¬ ì¶”ì  | 100% ìº¡ì²˜ | 100% | Sentry |
| ì„±ëŠ¥ ì¶”ì  | ì‹¤ì‹œê°„ ì „ì²´ | 10% ìƒ˜í”Œë§ | ë¹„ìš© ìµœì í™” |
| ë¡œê¹… | ì „ì²´ ì €ì¥ | 90ì¼ ë³´ê´€ | GDPR ì¤€ìˆ˜ |
| ì•Œë¦¼ | ì¦‰ì‹œ | 5ë¶„ ì´ë‚´ | Slack í†µí•© |
| ëŒ€ì‹œë³´ë“œ | ì‹¤ì‹œê°„ | ì˜ˆì • | Phase 3 |
| ì´ìƒ íƒì§€ | AI ê¸°ë°˜ | ì œì™¸ | Phase 4 |
| ë¶„ì‚° íŠ¸ë ˆì´ì‹± | ì „ì²´ | ì œì™¸ | Phase 4 |

#### 1.2.3 ì˜ë„ì  ì œì™¸

| ì œì™¸ í•­ëª© | ì´ìœ  |
|----------|------|
| ë¶„ì‚° íŠ¸ë ˆì´ì‹± (Jaeger/Zipkin) | í˜„ì¬ ê·œëª¨ì— ê³¼ë„, Phase 4 ê²€í†  |
| ì´ìƒ íƒì§€ AI | ì¶©ë¶„í•œ ë°ì´í„° ì¶•ì  í›„ Phase 4 |
| ì‚¬ìš©ì í–‰ë™ ë…¹í™” (FullStory) | ê°œì¸ì •ë³´ ì´ìŠˆ, ë¹„ìš© |
| ì¸í”„ë¼ ëª¨ë‹ˆí„°ë§ (Datadog) | Vercel ê¸°ë³¸ ì œê³µìœ¼ë¡œ ì¶©ë¶„ |

### 1.3 ë²”ìœ„

| í•­ëª© | ìš°ì„ ìˆœìœ„ | ë³µì¡ë„ | êµ¬í˜„ ìƒíƒœ |
|------|----------|--------|----------|
| Sentry ì—ëŸ¬ ì¶”ì  | P0 | ì¤‘ê°„ | êµ¬í˜„ë¨ |
| Vercel Analytics í†µí•© | P0 | ë‚®ìŒ | êµ¬í˜„ë¨ |
| Core Web Vitals ì¶”ì  | P1 | ì¤‘ê°„ | ë¶€ë¶„ êµ¬í˜„ |
| API ì‘ë‹µ ì‹œê°„ ëª¨ë‹ˆí„°ë§ | P1 | ì¤‘ê°„ | ì˜ˆì • |
| AI ë¶„ì„ ì„±ëŠ¥ ì¶”ì  | P1 | ì¤‘ê°„ | ì˜ˆì • |
| êµ¬ì¡°í™”ëœ ë¡œê¹… | P1 | ë‚®ìŒ | êµ¬í˜„ë¨ |
| PII ë§ˆìŠ¤í‚¹ | P0 | ì¤‘ê°„ | êµ¬í˜„ë¨ |
| ê°ì‚¬ ë¡œê·¸ | P1 | ì¤‘ê°„ | êµ¬í˜„ë¨ |
| Slack ì•Œë¦¼ í†µí•© | P2 | ì¤‘ê°„ | ì˜ˆì • |
| ëŒ€ì‹œë³´ë“œ | P2 | ë†’ìŒ | ì˜ˆì • |

### 1.4 ê´€ë ¨ ë¬¸ì„œ

- [ADR-019: ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ ì „ëµ](../adr/ADR-019-performance-monitoring.md)
- [SDD-AUDIT-LOGGING: ê°ì‚¬ ë¡œê·¸](./SDD-AUDIT-LOGGING.md)
- [ê·œì¹™: performance-guidelines](../../.claude/rules/performance-guidelines.md)
- [ê·œì¹™: error-handling-patterns](../../.claude/rules/error-handling-patterns.md)

---

## 2. 3ëŒ€ ê´€ì¸¡ì„± ê¸°ë‘¥ (Three Pillars of Observability)

> **ê´€ì¸¡ì„± = Logs + Metrics + Traces**

### 2.1 ê°œë… ì •ì˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    3ëŒ€ ê´€ì¸¡ì„± ê¸°ë‘¥ (Three Pillars)                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚   â”‚      LOGS        â”‚ â”‚     METRICS      â”‚ â”‚     TRACES       â”‚           â”‚
â”‚   â”‚   (ë¬´ìŠ¨ ì¼ì´?)   â”‚ â”‚   (ì–¼ë§ˆë‚˜?)      â”‚ â”‚   (ì–´ë””ì„œ?)      â”‚           â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤           â”‚
â”‚   â”‚ - ì´ë²¤íŠ¸ ê¸°ë¡    â”‚ â”‚ - ìˆ«ì ì§‘ê³„      â”‚ â”‚ - ìš”ì²­ íë¦„      â”‚           â”‚
â”‚   â”‚ - ì—ëŸ¬ ìƒì„¸      â”‚ â”‚ - ì‹œê³„ì—´ ë°ì´í„°  â”‚ â”‚ - ì„œë¹„ìŠ¤ ê°„ ì—°ê²° â”‚           â”‚
â”‚   â”‚ - ë””ë²„ê¹… ì •ë³´    â”‚ â”‚ - ì„ê³„ê°’ ì•Œë¦¼    â”‚ â”‚ - ë³‘ëª© êµ¬ê°„      â”‚           â”‚
â”‚   â”‚ - ê°ì‚¬ ì¶”ì       â”‚ â”‚ - ëŒ€ì‹œë³´ë“œ       â”‚ â”‚ - ì§€ì—° ì›ì¸      â”‚           â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤           â”‚
â”‚   â”‚ ë„êµ¬: Sentry,    â”‚ â”‚ ë„êµ¬: Vercel     â”‚ â”‚ ë„êµ¬: Sentry     â”‚           â”‚
â”‚   â”‚ console.log,     â”‚ â”‚ Analytics,       â”‚ â”‚ Performance,     â”‚           â”‚
â”‚   â”‚ êµ¬ì¡°í™” ë¡œê±°      â”‚ â”‚ web-vitals       â”‚ â”‚ (í–¥í›„ Jaeger)    â”‚           â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                                              â”‚
â”‚   ì§ˆë¬¸ -> ë„êµ¬                                                               â”‚
â”‚   "ë¬´ìŠ¨ ì—ëŸ¬ê°€ ë°œìƒí–ˆë‚˜?" -> Logs (Sentry)                                   â”‚
â”‚   "ì‘ë‹µ ì‹œê°„ì´ ì–¼ë§ˆë‚˜ ëŠë ¤ì¡Œë‚˜?" -> Metrics (Vercel Analytics)               â”‚
â”‚   "ì´ ìš”ì²­ì´ ì–´ëŠ ì„œë¹„ìŠ¤ë¥¼ ê±°ì³¤ë‚˜?" -> Traces (Sentry Performance)           â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 Logs (ë¡œê·¸)

#### 2.2.1 ì—­í• 

- **What happened?** - ë¬´ìŠ¨ ì¼ì´ ë°œìƒí–ˆëŠ”ê°€
- ì—ëŸ¬ ë©”ì‹œì§€, ìŠ¤íƒ íŠ¸ë ˆì´ìŠ¤
- ì‚¬ìš©ì í–‰ë™ ê¸°ë¡
- ê°ì‚¬ ì¶”ì  (Audit Trail)

#### 2.2.2 ì´ë£¸ êµ¬í˜„

| ìœ í˜• | ë„êµ¬ | ìš©ë„ | ë³´ê´€ ê¸°ê°„ |
|------|------|------|----------|
| ì—ëŸ¬ ë¡œê·¸ | Sentry | ì˜ˆì™¸, í¬ë˜ì‹œ | 90ì¼ |
| ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œê·¸ | êµ¬ì¡°í™” ë¡œê±° | ë””ë²„ê¹…, ì¶”ì  | 7ì¼ (Vercel) |
| ê°ì‚¬ ë¡œê·¸ | Supabase audit_logs | ì»´í”Œë¼ì´ì–¸ìŠ¤ | 90ì¼ |
| AI ë¶„ì„ ë¡œê·¸ | ì»¤ìŠ¤í…€ ë©”íŠ¸ë¦­ | í’ˆì§ˆ ëª¨ë‹ˆí„°ë§ | 30ì¼ |

#### 2.2.3 ë¡œê·¸ ë ˆë²¨

```typescript
// ë¡œê·¸ ë ˆë²¨ ì •ì˜ ë° ì‚¬ìš© ê¸°ì¤€
const LOG_LEVELS = {
  debug: 'ìƒì„¸ ë””ë²„ê¹… (ê°œë°œ í™˜ê²½ë§Œ)',
  info: 'ì •ìƒ ë™ì‘ ê¸°ë¡',
  warn: 'ì ì¬ì  ë¬¸ì œ (í´ë°± ì‚¬ìš© ë“±)',
  error: 'ì—ëŸ¬ ë°œìƒ (ê¸°ëŠ¥ ì‹¤íŒ¨)',
  fatal: 'ì¹˜ëª…ì  ì˜¤ë¥˜ (ì•± í¬ë˜ì‹œ)',
};
```

#### 2.2.4 ë¡œê·¸ êµ¬ì¡° (JSON)

```typescript
interface StructuredLog {
  timestamp: string;        // ISO 8601
  level: 'debug' | 'info' | 'warn' | 'error';
  module: string;           // ëª¨ë“ˆëª… (ì˜ˆ: 'PC-1', 'S-1', 'API', 'Auth')
  message: string;          // ë¡œê·¸ ë©”ì‹œì§€
  requestId?: string;       // ìš”ì²­ ì¶”ì  ID
  userId?: string;          // ì‚¬ìš©ì ID (ë§ˆìŠ¤í‚¹ë¨)
  duration?: number;        // ì†Œìš” ì‹œê°„ (ms)
  metadata?: Record<string, unknown>;  // ì¶”ê°€ ë°ì´í„°
}

// ì˜ˆì‹œ
{
  "timestamp": "2026-01-23T10:30:00.000Z",
  "level": "info",
  "module": "S-1",
  "message": "Skin analysis completed",
  "userId": "user_***",
  "requestId": "req_abc123",
  "duration": 2450,
  "metadata": {
    "analysisType": "full",
    "usedFallback": false
  }
}
```

### 2.3 Metrics (ë©”íŠ¸ë¦­)

#### 2.3.1 ì—­í• 

- **How much/many?** - ì–¼ë§ˆë‚˜ ë°œìƒí•˜ëŠ”ê°€
- ìˆ«ìë¡œ í‘œí˜„ë˜ëŠ” ì‹œê³„ì—´ ë°ì´í„°
- ì§‘ê³„ ë° í†µê³„ ë¶„ì„
- ì„ê³„ê°’ ê¸°ë°˜ ì•Œë¦¼

#### 2.3.2 ë©”íŠ¸ë¦­ ìœ í˜•

| ìœ í˜• | ì„¤ëª… | ì˜ˆì‹œ |
|------|------|------|
| Counter | ëˆ„ì  ê°’ (ì¦ê°€ë§Œ) | ìš”ì²­ ìˆ˜, ì—ëŸ¬ ìˆ˜ |
| Gauge | í˜„ì¬ ê°’ (ì¦ê°) | í™œì„± ì—°ê²° ìˆ˜, ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ |
| Histogram | ë¶„í¬ (ë°±ë¶„ìœ„) | ì‘ë‹µ ì‹œê°„ p50/p95/p99 |

#### 2.3.3 í•µì‹¬ ë©”íŠ¸ë¦­ ë¶„ë¥˜

| ì¹´í…Œê³ ë¦¬ | ë©”íŠ¸ë¦­ | ëª©í‘œ | ê²½ê³  | ì‹¬ê° |
|----------|--------|------|------|------|
| **Core Web Vitals** | LCP | < 2.5s | > 3s | > 4s |
| | FID | < 100ms | > 150ms | > 300ms |
| | CLS | < 0.1 | > 0.15 | > 0.25 |
| | INP | < 200ms | > 300ms | > 500ms |
| **API ì„±ëŠ¥** | p95 ì‘ë‹µ ì‹œê°„ | < 500ms | > 1s | > 3s |
| | ì—ëŸ¬ìœ¨ | < 0.1% | > 1% | > 5% |
| **AI ë¶„ì„** | ì‘ë‹µ ì‹œê°„ | < 3s | > 5s | > 10s |
| | Fallback ì‚¬ìš©ë¥  | < 5% | > 10% | > 20% |

### 2.4 Traces (íŠ¸ë ˆì´ìŠ¤)

#### 2.4.1 ì—­í• 

- **Where?** - ì–´ë””ì„œ ë°œìƒí–ˆëŠ”ê°€
- ìš”ì²­ì˜ ì „ì²´ ê²½ë¡œ ì¶”ì 
- ì„œë¹„ìŠ¤ ê°„ í˜¸ì¶œ íë¦„
- ë³‘ëª© êµ¬ê°„ ì‹ë³„

#### 2.4.2 ì´ë£¸ íŠ¸ë ˆì´ì‹± êµ¬ì¡°

```
ì‚¬ìš©ì ìš”ì²­
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Trace ID: abc-123-xyz                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  Span 1: API Route (/api/analyze/skin)     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚  â”‚       Duration: 2500ms                                      â”‚
â”‚  â”‚                                                             â”‚
â”‚  â”œâ”€â”€ Span 2: Auth Check                    â”€â”€â”€â”€â”€â”€             â”‚
â”‚  â”‚           Duration: 50ms                                    â”‚
â”‚  â”‚                                                             â”‚
â”‚  â”œâ”€â”€ Span 3: Image Validation              â”€â”€â”€â”€â”€â”€â”€â”€           â”‚
â”‚  â”‚           Duration: 200ms                                   â”‚
â”‚  â”‚                                                             â”‚
â”‚  â”œâ”€â”€ Span 4: Gemini API Call               â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  â”‚           Duration: 2000ms   <-- ë³‘ëª©!                      â”‚
â”‚  â”‚                                                             â”‚
â”‚  â””â”€â”€ Span 5: DB Insert                     â”€â”€â”€â”€               â”‚
â”‚              Duration: 100ms                                   â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 2.4.3 í˜„ì¬ êµ¬í˜„ ìƒíƒœ

| íŠ¸ë ˆì´ì‹± | ìƒíƒœ | ë„êµ¬ |
|----------|------|------|
| API ìš”ì²­ | êµ¬í˜„ | Sentry Performance |
| í”„ë¡ íŠ¸ì—”ë“œ | êµ¬í˜„ | Sentry Browser |
| AI í˜¸ì¶œ | ì˜ˆì • | ì»¤ìŠ¤í…€ ìŠ¤íŒ¬ |
| DB ì¿¼ë¦¬ | ì˜ˆì • | Sentry DB Integration |
| ë¶„ì‚° íŠ¸ë ˆì´ì‹± | ì œì™¸ | Phase 4 (Jaeger) |

---

## 3. ë„êµ¬ ìŠ¤íƒ (Tooling Stack)

### 3.1 í˜„ì¬ ë„êµ¬ êµ¬ì„±

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          ëª¨ë‹ˆí„°ë§ ë„êµ¬ ìŠ¤íƒ                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  Layer: Error Tracking                                               â”‚   â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                    â”‚   â”‚
â”‚   â”‚  â”‚   Sentry     â”‚  ì—ëŸ¬ ìº¡ì²˜, ìŠ¤íƒ íŠ¸ë ˆì´ìŠ¤, ë¦´ë¦¬ì¦ˆ ì¶”ì             â”‚   â”‚
â”‚   â”‚  â”‚              â”‚  (Web + Mobile)                                    â”‚   â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                    â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  Layer: Performance Monitoring                                       â”‚   â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚   â”‚
â”‚   â”‚  â”‚   Vercel     â”‚  â”‚  Vercel      â”‚  â”‚   Sentry     â”‚              â”‚   â”‚
â”‚   â”‚  â”‚  Analytics   â”‚  â”‚ SpeedInsightsâ”‚  â”‚ Performance  â”‚              â”‚   â”‚
â”‚   â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚              â”‚   â”‚
â”‚   â”‚  â”‚ ì‚¬ìš©ì ë¶„ì„  â”‚  â”‚ Core Vitals  â”‚  â”‚ íŠ¸ëœì­ì…˜    â”‚              â”‚   â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  Layer: Logging                                                      â”‚   â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚   â”‚
â”‚   â”‚  â”‚  Vercel      â”‚  â”‚  Supabase    â”‚  â”‚   Axiom      â”‚              â”‚   â”‚
â”‚   â”‚  â”‚   Logs       â”‚  â”‚ audit_logs   â”‚  â”‚  (í–¥í›„)      â”‚              â”‚   â”‚
â”‚   â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚              â”‚   â”‚
â”‚   â”‚  â”‚ ì‹¤ì‹œê°„ ë¡œê·¸  â”‚  â”‚ ê°ì‚¬ ë¡œê·¸    â”‚  â”‚ ë¡œê·¸ ì§‘ê³„    â”‚              â”‚   â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  Layer: Alerting                                                     â”‚   â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                 â”‚   â”‚
â”‚   â”‚  â”‚    Slack     â”‚  â”‚    Email     â”‚                                 â”‚   â”‚
â”‚   â”‚  â”‚   Webhook    â”‚  â”‚   (Sentry)   â”‚                                 â”‚   â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                 â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 ë„êµ¬ë³„ ì—­í• 

| ë„êµ¬ | ì—­í•  | ê¸°ë‘¥ | ë¹„ìš© |
|------|------|------|------|
| **Sentry** | ì—ëŸ¬ ì¶”ì , ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ | Logs, Traces | Team í”Œëœ |
| **Vercel Analytics** | ì‚¬ìš©ì ë¶„ì„, íŠ¸ë˜í”½ | Metrics | Pro í¬í•¨ |
| **Vercel SpeedInsights** | Core Web Vitals | Metrics | Pro í¬í•¨ |
| **Supabase audit_logs** | ê°ì‚¬ ë¡œê·¸, ì»´í”Œë¼ì´ì–¸ìŠ¤ | Logs | Pro í¬í•¨ |
| **Axiom (í–¥í›„)** | ë¡œê·¸ ì§‘ê³„, ê²€ìƒ‰ | Logs | ë¬´ë£Œ í‹°ì–´ |
| **Slack** | ì•Œë¦¼ ì „ë‹¬ | Alerting | Free |

### 3.3 Vercel Analytics ì„¤ì •

```typescript
// app/layout.tsx
import { Analytics } from '@vercel/analytics/react';
import { SpeedInsights } from '@vercel/speed-insights/next';

export default function RootLayout({ children }: { children: React.ReactNode }) {
  return (
    <html lang="ko">
      <body>
        {children}
        <Analytics />
        <SpeedInsights />
      </body>
    </html>
  );
}
```

### 3.4 Sentry ì„¤ì •

```typescript
// sentry.client.config.ts
import * as Sentry from '@sentry/nextjs';

Sentry.init({
  dsn: process.env.NEXT_PUBLIC_SENTRY_DSN,
  environment: process.env.NODE_ENV,

  // ìƒ˜í”Œë§ ì„¤ì •
  tracesSampleRate: 0.1,        // 10% íŠ¸ëœì­ì…˜ ìƒ˜í”Œë§
  profilesSampleRate: 0.1,      // 10% í”„ë¡œíŒŒì¼ë§

  // ì„¸ì…˜ ë¦¬í”Œë ˆì´ (ì—ëŸ¬ ì‹œ 100%)
  replaysSessionSampleRate: 0.001,
  replaysOnErrorSampleRate: 1.0,

  // ì—ëŸ¬ í•„í„°ë§
  ignoreErrors: [
    'ResizeObserver loop limit exceeded',
    'Network request failed',
  ],

  // PII ì œê±°
  beforeSend(event) {
    if (event.user) {
      delete event.user.email;
      delete event.user.ip_address;
    }
    return event;
  },
});
```

### 3.5 í–¥í›„ ë„ì… ê²€í†  (Phase 4+)

| ë„êµ¬ | ìš©ë„ | ê²€í†  ì‹œì  |
|------|------|----------|
| **Axiom/LogDNA** | ë¡œê·¸ ì§‘ê³„, ê²€ìƒ‰ | MAU 10ë§Œ+ |
| **Datadog** | í’€ìŠ¤íƒ ê´€ì¸¡ì„± | íŒ€ í™•ì¥ ì‹œ |
| **Jaeger** | ë¶„ì‚° íŠ¸ë ˆì´ì‹± | ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì „í™˜ ì‹œ |
| **Grafana** | ì»¤ìŠ¤í…€ ëŒ€ì‹œë³´ë“œ | ë©”íŠ¸ë¦­ ë³µì¡í™” ì‹œ |

---

## 4. í•µì‹¬ ë©”íŠ¸ë¦­

### 4.1 Core Web Vitals

| ì§€í‘œ | ì„¤ëª… | ëª©í‘œ | ê²½ê³  | ì‹¬ê° |
|------|------|------|------|------|
| **LCP** | Largest Contentful Paint | < 2.5s | > 3s | > 4s |
| **FID** | First Input Delay | < 100ms | > 150ms | > 300ms |
| **CLS** | Cumulative Layout Shift | < 0.1 | > 0.15 | > 0.25 |
| **TTFB** | Time to First Byte | < 800ms | > 1s | > 2s |
| **INP** | Interaction to Next Paint | < 200ms | > 300ms | > 500ms |

### 4.2 API ì‘ë‹µ ì‹œê°„

| ì—”ë“œí¬ì¸íŠ¸ | ëª©í‘œ (p95) | íƒ€ì„ì•„ì›ƒ |
|-----------|-----------|---------|
| ì¼ë°˜ API | < 500ms | 2s |
| AI ë¶„ì„ API | < 3s | 10s |
| ì´ë¯¸ì§€ ì—…ë¡œë“œ | < 2s | 30s |
| DB ì¿¼ë¦¬ | < 100ms | 1s |

### 4.3 ì—ëŸ¬ìœ¨

| ë©”íŠ¸ë¦­ | ê³„ì‚° ë°©ì‹ | ëª©í‘œ | ì•Œë¦¼ ì„ê³„ê°’ |
|--------|----------|------|------------|
| ì „ì²´ ì—ëŸ¬ìœ¨ | errors / total_requests | < 0.1% | > 1% |
| AI ë¶„ì„ ì‹¤íŒ¨ìœ¨ | ai_failures / ai_requests | < 5% | > 10% |
| Fallback ì‚¬ìš©ë¥  | fallbacks / ai_requests | < 5% | > 10% |
| 4xx ì—ëŸ¬ìœ¨ | 4xx_errors / total | < 2% | > 5% |
| 5xx ì—ëŸ¬ìœ¨ | 5xx_errors / total | < 0.5% | > 2% |

### 4.4 AI ë¶„ì„ ì„±ëŠ¥

| ì§€í‘œ | ëª©í‘œ | ê²½ê³  | ì‹¬ê° |
|------|------|------|------|
| Gemini ì‘ë‹µ ì‹œê°„ | < 3s | > 5s | > 10s |
| Fallback ì‚¬ìš©ë¥  | < 5% | > 10% | > 20% |
| íƒ€ì„ì•„ì›ƒ ë¹„ìœ¨ | < 1% | > 3% | > 5% |
| ì¬ì‹œë„ ë¹„ìœ¨ | < 5% | > 10% | > 15% |

### 4.5 Web Vitals ìˆ˜ì§‘ êµ¬í˜„

**íŒŒì¼**: `lib/analytics/web-vitals.ts`

```typescript
import { onCLS, onFID, onLCP, onTTFB, onINP, Metric } from 'web-vitals';
import * as Sentry from '@sentry/nextjs';

// ì„ê³„ê°’ ì •ì˜
const THRESHOLDS = {
  LCP: { warning: 3000, critical: 4000 },
  FID: { warning: 150, critical: 300 },
  CLS: { warning: 0.15, critical: 0.25 },
  TTFB: { warning: 1000, critical: 2000 },
  INP: { warning: 300, critical: 500 },
};

export function initWebVitals(): void {
  onCLS((metric) => reportVital(metric));
  onFID((metric) => reportVital(metric));
  onLCP((metric) => reportVital(metric));
  onTTFB((metric) => reportVital(metric));
  onINP((metric) => reportVital(metric));
}

function reportVital(metric: Metric): void {
  const threshold = THRESHOLDS[metric.name as keyof typeof THRESHOLDS];

  // Sentryì— ì¸¡ì •ê°’ ê¸°ë¡
  Sentry.setMeasurement(metric.name, metric.value, 'millisecond');

  // ê²½ê³  ì„ê³„ê°’ ì´ˆê³¼ ì‹œ ì´ë²¤íŠ¸ ì „ì†¡
  if (threshold && metric.value > threshold.critical) {
    Sentry.captureMessage(`Critical ${metric.name}: ${metric.value}`, {
      level: 'warning',
      tags: {
        metric: metric.name,
        rating: metric.rating,
      },
      extra: {
        value: metric.value,
        delta: metric.delta,
        id: metric.id,
      },
    });
  }

  // ì½˜ì†” ë¡œê¹… (ê°œë°œ í™˜ê²½)
  if (process.env.NODE_ENV === 'development') {
    console.log(`[Vitals] ${metric.name}:`, metric.value, metric.rating);
  }
}
```

---

## 5. ì•Œë¦¼ ê·œì¹™

### 5.1 ì•Œë¦¼ ì„ê³„ê°’ ë§¤íŠ¸ë¦­ìŠ¤

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              ì•Œë¦¼ ê·œì¹™ ë§¤íŠ¸ë¦­ìŠ¤                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  P0: Critical (ì¦‰ì‹œ ëŒ€ì‘, 5ë¶„ ì´ë‚´)                                   â”‚   â”‚
â”‚   â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                  â”‚   â”‚
â”‚   â”‚  - ì—ëŸ¬ìœ¨ > 5% (5ë¶„ ì§€ì†)                                            â”‚   â”‚
â”‚   â”‚  - API ì „ì²´ ì¥ì•  (ëª¨ë“  ìš”ì²­ ì‹¤íŒ¨)                                    â”‚   â”‚
â”‚   â”‚  - ì¸ì¦ ì‹œìŠ¤í…œ ì¥ì•                                                   â”‚   â”‚
â”‚   â”‚  - ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì‹¤íŒ¨                                            â”‚   â”‚
â”‚   â”‚  -> ì±„ë„: Slack #alerts + Email + PagerDuty (í–¥í›„)                   â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  P1: High (30ë¶„ ì´ë‚´ í™•ì¸)                                           â”‚   â”‚
â”‚   â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                        â”‚   â”‚
â”‚   â”‚  - ì—ëŸ¬ìœ¨ > 1% (5ë¶„ ì§€ì†)                                            â”‚   â”‚
â”‚   â”‚  - LCP > 4s (5ë¶„ ì§€ì†)                                               â”‚   â”‚
â”‚   â”‚  - API p95 > 3s (10ë¶„ ì§€ì†)                                          â”‚   â”‚
â”‚   â”‚  - AI Fallback > 20%                                                 â”‚   â”‚
â”‚   â”‚  -> ì±„ë„: Slack #alerts                                               â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  P2: Medium (ì—…ë¬´ ì‹œê°„ ë‚´ í™•ì¸)                                       â”‚   â”‚
â”‚   â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                    â”‚   â”‚
â”‚   â”‚  - LCP > 3s (10ë¶„ ì§€ì†)                                              â”‚   â”‚
â”‚   â”‚  - API p95 > 1.5s (10ë¶„ ì§€ì†)                                        â”‚   â”‚
â”‚   â”‚  - AI Fallback > 10%                                                 â”‚   â”‚
â”‚   â”‚  - CLS > 0.15                                                        â”‚   â”‚
â”‚   â”‚  -> ì±„ë„: Slack #performance                                          â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  P3: Low (ì¼ê°„ ìš”ì•½)                                                  â”‚   â”‚
â”‚   â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                â”‚   â”‚
â”‚   â”‚  - ë¹„ì •ìƒ íŠ¸ë˜í”½ íŒ¨í„´                                                â”‚   â”‚
â”‚   â”‚  - ìƒˆë¡œìš´ ìœ í˜•ì˜ ì—ëŸ¬ ë°œìƒ                                           â”‚   â”‚
â”‚   â”‚  - ë²ˆë“¤ í¬ê¸° ì¦ê°€                                                    â”‚   â”‚
â”‚   â”‚  -> ì±„ë„: ì¼ê°„ ìš”ì•½ Slack ë©”ì‹œì§€                                       â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 ì•Œë¦¼ ì„ê³„ê°’ ìƒì„¸

| ë©”íŠ¸ë¦­ | ê²½ê³  (P2) | ì‹¬ê° (P1) | ì¹˜ëª… (P0) | ì§€ì† ì‹œê°„ |
|--------|----------|----------|----------|----------|
| **ì—ëŸ¬ìœ¨** | > 0.5% | > 1% | > 5% | 5ë¶„ |
| **LCP** | > 3s | > 4s | > 6s | 5ë¶„ |
| **FID/INP** | > 150ms | > 300ms | > 500ms | 5ë¶„ |
| **CLS** | > 0.15 | > 0.25 | > 0.4 | 5ë¶„ |
| **API p95** | > 1.5s | > 3s | > 5s | 10ë¶„ |
| **AI Fallbackìœ¨** | > 10% | > 20% | > 50% | 10ë¶„ |
| **AI íƒ€ì„ì•„ì›ƒìœ¨** | > 5% | > 10% | > 20% | 10ë¶„ |

### 5.3 ì•Œë¦¼ ìš”ì•½ í…Œì´ë¸”

| ì¡°ê±´ | ì±„ë„ | ìš°ì„ ìˆœìœ„ | ëŒ€ì‘ ì‹œê°„ |
|------|------|----------|----------|
| ì—ëŸ¬ìœ¨ > 5% (5ë¶„ ì§€ì†) | Slack #alerts + Email | P0 | 5ë¶„ ì´ë‚´ |
| ì—ëŸ¬ìœ¨ > 1% (5ë¶„ ì§€ì†) | Slack #alerts | P1 | 30ë¶„ ì´ë‚´ |
| LCP > 4s (5ë¶„ ì§€ì†) | Slack #performance | P1 | 30ë¶„ ì´ë‚´ |
| API p95 > 3s (10ë¶„ ì§€ì†) | Slack #performance | P1 | 30ë¶„ ì´ë‚´ |
| AI Fallback > 10% | Slack #ai-alerts | P2 | 4ì‹œê°„ ì´ë‚´ |
| AI íƒ€ì„ì•„ì›ƒ > 5% | Slack #ai-alerts | P2 | 4ì‹œê°„ ì´ë‚´ |

### 5.4 Slack ì•Œë¦¼ êµ¬í˜„

**íŒŒì¼**: `lib/notifications/slack.ts`

```typescript
interface SlackAlert {
  channel: string;
  title: string;
  severity: 'critical' | 'warning' | 'info';
  message: string;
  fields?: { name: string; value: string }[];
  timestamp?: number;
}

const SLACK_WEBHOOKS = {
  alerts: process.env.SLACK_WEBHOOK_ALERTS,
  performance: process.env.SLACK_WEBHOOK_PERFORMANCE,
  'ai-alerts': process.env.SLACK_WEBHOOK_AI,
};

export async function sendSlackAlert(alert: SlackAlert): Promise<boolean> {
  const webhookUrl = SLACK_WEBHOOKS[alert.channel as keyof typeof SLACK_WEBHOOKS];

  if (!webhookUrl) {
    console.warn(`[Slack] No webhook for channel: ${alert.channel}`);
    return false;
  }

  const color = alert.severity === 'critical' ? '#FF0000' :
                alert.severity === 'warning' ? '#FFA500' :
                '#00FF00';

  const payload = {
    attachments: [{
      color,
      title: `[${alert.severity.toUpperCase()}] ${alert.title}`,
      text: alert.message,
      fields: alert.fields?.map(f => ({
        title: f.name,
        value: f.value,
        short: true,
      })),
      footer: 'Yiroom Monitoring',
      ts: alert.timestamp || Math.floor(Date.now() / 1000),
    }],
  };

  try {
    const response = await fetch(webhookUrl, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(payload),
    });
    return response.ok;
  } catch (error) {
    console.error('[Slack] Failed to send alert:', error);
    return false;
  }
}
```

### 5.5 ì•Œë¦¼ í”¼ë¡œ ë°©ì§€

```typescript
// ì•Œë¦¼ ì–µì œ ê·œì¹™
const ALERT_SUPPRESSION = {
  // ë™ì¼ ì•Œë¦¼ ì¬ë°œì†¡ ê°„ê²©
  cooldown: {
    critical: 5 * 60 * 1000,    // 5ë¶„
    warning: 30 * 60 * 1000,    // 30ë¶„
    info: 60 * 60 * 1000,       // 1ì‹œê°„
  },

  // ì•Œë¦¼ ê·¸ë£¹í™”
  grouping: {
    window: 5 * 60 * 1000,      // 5ë¶„ ë‚´ ë™ì¼ ìœ í˜• ê·¸ë£¹í™”
    maxPerGroup: 10,            // ê·¸ë£¹ë‹¹ ìµœëŒ€ 10ê°œ
  },

  // ì—…ë¬´ ì‹œê°„ ì™¸ ì–µì œ (Critical ì œì™¸)
  quietHours: {
    enabled: true,
    start: 22,                  // 22:00
    end: 8,                     // 08:00
    timezone: 'Asia/Seoul',
    excludeSeverity: ['critical'],
  },
};
```

---

## 6. ëŒ€ì‹œë³´ë“œ

### 6.1 ëŒ€ì‹œë³´ë“œ êµ¬ì„± ê°œìš”

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œ                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚        ì‹œìŠ¤í…œ ìƒíƒœ (Overview)     â”‚  â”‚        ì•Œë¦¼ í”¼ë“œ (Alerts)        â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚  [P0] ì—ëŸ¬ìœ¨ 5% ì´ˆê³¼ (2ë¶„ì „)    â”‚  â”‚
â”‚  â”‚  â”‚ [OK]  â”‚ â”‚ [!]   â”‚ â”‚ [OK]  â”‚ â”‚  â”‚  [P2] LCP 3.2s (10ë¶„ì „)         â”‚  â”‚
â”‚  â”‚  â”‚ API   â”‚ â”‚  AI   â”‚ â”‚  DB   â”‚ â”‚  â”‚  [OK] ë³µêµ¬ë¨: CLS ì •ìƒí™”        â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚                                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                     Core Web Vitals (ì‹¤ì‹œê°„)                          â”‚   â”‚
â”‚  â”‚                                                                        â”‚   â”‚
â”‚  â”‚   LCP: 2.1s [v]    FID: 45ms [v]    CLS: 0.08 [-]    INP: 180ms [v]  â”‚   â”‚
â”‚  â”‚   [=========-]     [======----]     [=========-]     [=======--]     â”‚   â”‚
â”‚  â”‚   Good             Good             Good             Good             â”‚   â”‚
â”‚  â”‚                                                                        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚        API ì„±ëŠ¥ (p95)            â”‚  â”‚        ì—ëŸ¬ìœ¨ ì¶”ì´               â”‚  â”‚
â”‚  â”‚                                  â”‚  â”‚                                  â”‚  â”‚
â”‚  â”‚  ^                              â”‚  â”‚  ^                              â”‚  â”‚
â”‚  â”‚  |    /--\                      â”‚  â”‚  |          /\                  â”‚  â”‚
â”‚  â”‚  |   /    \   /--\              â”‚  â”‚  | ---------/  \--------       â”‚  â”‚
â”‚  â”‚  |--/      \-/    \---         â”‚  â”‚  |                              â”‚  â”‚
â”‚  â”‚  +------------------------->   â”‚  â”‚  +------------------------->   â”‚  â”‚
â”‚  â”‚   -24h        -12h       Now   â”‚  â”‚   -24h        -12h       Now   â”‚  â”‚
â”‚  â”‚                                  â”‚  â”‚                                  â”‚  â”‚
â”‚  â”‚  í˜„ì¬: 320ms (ëª©í‘œ: <500ms)     â”‚  â”‚  í˜„ì¬: 0.12% (ëª©í‘œ: <1%)       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                     AI ë¶„ì„ ì„±ëŠ¥                                       â”‚   â”‚
â”‚  â”‚                                                                        â”‚   â”‚
â”‚  â”‚  ë¶„ì„ íƒ€ì…ë³„ ì„±ê³µë¥               Fallback ì‚¬ìš©ë¥                        â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚   â”‚
â”‚  â”‚  â”‚ PC-1: [============] 98% â”‚   â”‚ ì „ì²´: [===-------] 3.2%  â”‚           â”‚   â”‚
â”‚  â”‚  â”‚ S-1:  [============] 97% â”‚   â”‚ PC-1: [==--------] 2.1%  â”‚           â”‚   â”‚
â”‚  â”‚  â”‚ C-1:  [===========- ] 95%â”‚   â”‚ S-1:  [====------] 4.5%  â”‚           â”‚   â”‚
â”‚  â”‚  â”‚ W-1:  [============] 99% â”‚   â”‚ C-1:  [===-------] 3.0%  â”‚           â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚   â”‚
â”‚  â”‚                                                                        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 ëŒ€ì‹œë³´ë“œ ë©”íŠ¸ë¦­

| ë©”íŠ¸ë¦­ | ë°ì´í„° ì†ŒìŠ¤ | ê°±ì‹  ì£¼ê¸° | ì‹œê°í™” |
|--------|------------|----------|--------|
| ì¼ê°„ í™œì„± ì‚¬ìš©ì (DAU) | Vercel Analytics | ì‹¤ì‹œê°„ | ìˆ«ì + ì¶”ì´ ê·¸ë˜í”„ |
| ë¶„ì„ ì™„ë£Œìœ¨ | Supabase + Custom | 1ì‹œê°„ | ê²Œì´ì§€ + íƒ€ì…ë³„ ë°” |
| ì—ëŸ¬ìœ¨ | Sentry | 5ë¶„ | ë¼ì¸ ì°¨íŠ¸ |
| Core Web Vitals | Vercel Speed Insights | ì‹¤ì‹œê°„ | 4ê°œ ê²Œì´ì§€ |
| API ì‘ë‹µ ì‹œê°„ (p95) | Sentry Performance | 5ë¶„ | ë¼ì¸ ì°¨íŠ¸ + íˆìŠ¤í† ê·¸ë¨ |

### 6.3 ëŒ€ì‹œë³´ë“œ í˜ì´ì§€ êµ¬í˜„ (ì˜ˆì •)

**íŒŒì¼**: `app/admin/monitoring/page.tsx`

```typescript
'use client';

import { useEffect, useState } from 'react';
import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';

interface MonitoringData {
  errorRate: number;
  apiLatencyP95: number;
  webVitals: {
    lcp: number;
    fid: number;
    cls: number;
    inp: number;
  };
  analysisStats: {
    total: number;
    success: number;
    fallback: number;
  };
}

export default function MonitoringPage() {
  const [data, setData] = useState<MonitoringData | null>(null);
  const [isLoading, setIsLoading] = useState(true);

  useEffect(() => {
    async function fetchData() {
      const res = await fetch('/api/admin/monitoring');
      const json = await res.json();
      setData(json.data);
      setIsLoading(false);
    }

    fetchData();
    const interval = setInterval(fetchData, 30000); // 30ì´ˆë§ˆë‹¤ ê°±ì‹ 

    return () => clearInterval(interval);
  }, []);

  if (isLoading) return <div>Loading...</div>;

  return (
    <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
      <MetricCard
        title="ì—ëŸ¬ìœ¨"
        value={`${data?.errorRate.toFixed(2)}%`}
        status={getStatus(data?.errorRate ?? 0, 1, 5)}
      />
      <MetricCard
        title="API p95"
        value={`${data?.apiLatencyP95}ms`}
        status={getStatus(data?.apiLatencyP95 ?? 0, 500, 3000)}
      />
      <MetricCard
        title="LCP"
        value={`${(data?.webVitals.lcp ?? 0) / 1000}s`}
        status={getStatus((data?.webVitals.lcp ?? 0) / 1000, 2.5, 4)}
      />
      <MetricCard
        title="ë¶„ì„ ì„±ê³µë¥ "
        value={`${((data?.analysisStats.success ?? 0) / (data?.analysisStats.total ?? 1) * 100).toFixed(1)}%`}
        status="good"
      />
    </div>
  );
}

function getStatus(value: number, warnThreshold: number, criticalThreshold: number) {
  if (value >= criticalThreshold) return 'critical';
  if (value >= warnThreshold) return 'warning';
  return 'good';
}
```

### 6.4 ëŒ€ì‹œë³´ë“œ ì ‘ê·¼ ê¶Œí•œ

| ëŒ€ì‹œë³´ë“œ | ì ‘ê·¼ ê¶Œí•œ | ìœ„ì¹˜ |
|----------|----------|------|
| ìš´ì˜ ëŒ€ì‹œë³´ë“œ | ê´€ë¦¬ì ì „ìš© | `/admin/monitoring` |
| Sentry | ê°œë°œíŒ€ | External (sentry.io) |
| Vercel Analytics | ê°œë°œíŒ€ | External (vercel.com) |

---

## 7. ì¸ì‹œë˜íŠ¸ ëŒ€ì‘

### 7.1 ì¸ì‹œë˜íŠ¸ ëŒ€ì‘ ì›Œí¬í”Œë¡œìš°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           ì¸ì‹œë˜íŠ¸ ëŒ€ì‘ ì›Œí¬í”Œë¡œìš°                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚   1. ì•Œë¦¼ (Detection)           ëª©í‘œ: ìë™í™”                                 â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                  â”‚
â”‚                                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                           â”‚
â”‚   â”‚   Sentry    â”‚â”€â”€â”                                                        â”‚
â”‚   â”‚   Alert     â”‚  â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”œâ”€â”€â”€â”€>â”‚   Slack     â”‚                                   â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚     â”‚   #alerts   â”‚                                   â”‚
â”‚   â”‚  Threshold  â”‚â”€â”€â”¤     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                   â”‚
â”‚   â”‚   Breach    â”‚  â”‚            â”‚                                           â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚            v                                           â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                   â”‚
â”‚   â”‚   Manual    â”‚â”€â”€â”˜     â”‚   Email     â”‚ (P0ë§Œ)                            â”‚
â”‚   â”‚   Report    â”‚        â”‚   Alert     â”‚                                   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                   â”‚
â”‚                                 â”‚                                           â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                 v                                           â”‚
â”‚   2. í™•ì¸ (Acknowledgement)     ëª©í‘œ: 5ë¶„ ì´ë‚´                               â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                  â”‚
â”‚                                                                              â”‚
â”‚   - Slack ì´ëª¨ì§€ ë°˜ì‘ (eyes)                                                â”‚
â”‚   - ë‹´ë‹¹ì ì§€ì •                                                             â”‚
â”‚   - ì¸ì‹œë˜íŠ¸ ì±„ë„ ìƒì„± (P0)                                                 â”‚
â”‚                                 â”‚                                           â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                 v                                           â”‚
â”‚   3. ì¡°ì¹˜ (Triage & Mitigation) ëª©í‘œ: 30ë¶„ ì´ë‚´ (P0/P1)                      â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                  â”‚
â”‚                                                                              â”‚
â”‚   3.1 ì˜í–¥ ë²”ìœ„ íŒŒì•…                                                        â”‚
â”‚       - ì˜í–¥ ë°›ëŠ” ì‚¬ìš©ì ìˆ˜                                                 â”‚
â”‚       - ì˜í–¥ ë°›ëŠ” ê¸°ëŠ¥                                                      â”‚
â”‚       - ë°ì´í„° ì†ì‹¤ ì—¬ë¶€                                                    â”‚
â”‚                                                                              â”‚
â”‚   3.2 ì„ì‹œ ì¡°ì¹˜                                                             â”‚
â”‚       - í”¼ì²˜ í”Œë˜ê·¸ ë¹„í™œì„±í™”                                                â”‚
â”‚       - Fallback ê°•ì œ í™œì„±í™”                                                â”‚
â”‚       - íŠ¸ë˜í”½ ì œí•œ                                                         â”‚
â”‚       - ë¡¤ë°± (í•„ìš” ì‹œ)                                                      â”‚
â”‚                                                                              â”‚
â”‚   3.3 ì»¤ë®¤ë‹ˆì¼€ì´ì…˜                                                          â”‚
â”‚       - ìƒíƒœ í˜ì´ì§€ ì—…ë°ì´íŠ¸ (í–¥í›„)                                          â”‚
â”‚       - ë‚´ë¶€ ê³µì§€                                                           â”‚
â”‚                                 â”‚                                           â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                 v                                           â”‚
â”‚   4. ë³µêµ¬ (Resolution)          ëª©í‘œ: MTTR < 1ì‹œê°„ (P0)                      â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                  â”‚
â”‚                                                                              â”‚
â”‚   - ê·¼ë³¸ ì›ì¸ ìˆ˜ì •                                                          â”‚
â”‚   - ë°°í¬ ë° ê²€ì¦                                                            â”‚
â”‚   - ëª¨ë‹ˆí„°ë§ ë©”íŠ¸ë¦­ ì •ìƒí™” í™•ì¸                                             â”‚
â”‚   - ì¸ì‹œë˜íŠ¸ ì±„ë„ ì¢…ë£Œ                                                      â”‚
â”‚                                 â”‚                                           â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                 v                                           â”‚
â”‚   5. í¬ìŠ¤íŠ¸ëª¨í…€ (Post-Mortem)   ëª©í‘œ: ë³µêµ¬ í›„ 48ì‹œê°„ ì´ë‚´                     â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                  â”‚
â”‚                                                                              â”‚
â”‚   - íƒ€ì„ë¼ì¸ ì •ë¦¬                                                           â”‚
â”‚   - ê·¼ë³¸ ì›ì¸ ë¶„ì„ (5 Whys)                                                 â”‚
â”‚   - ì˜í–¥ ë²”ìœ„ ë¬¸ì„œí™”                                                        â”‚
â”‚   - ì¬ë°œ ë°©ì§€ ì•¡ì…˜ ì•„ì´í…œ                                                   â”‚
â”‚   - í¬ìŠ¤íŠ¸ëª¨í…€ ë¬¸ì„œ ì‘ì„±                                                    â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7.2 ì¸ì‹œë˜íŠ¸ ì‹¬ê°ë„ ì •ì˜

| ì‹¬ê°ë„ | ì •ì˜ | ì˜ˆì‹œ | ëŒ€ì‘ ì‹œê°„ |
|--------|------|------|----------|
| **SEV-1 (Critical)** | ì„œë¹„ìŠ¤ ì „ì²´ ì¥ì•  | DB ì—°ê²° ì‹¤íŒ¨, ì¸ì¦ ì¥ì•  | í™•ì¸ 5ë¶„, ë³µêµ¬ 1ì‹œê°„ |
| **SEV-2 (High)** | ì£¼ìš” ê¸°ëŠ¥ ì¥ì•  | AI ë¶„ì„ ì „ì²´ ì‹¤íŒ¨, ê²°ì œ ë¶ˆê°€ | í™•ì¸ 15ë¶„, ë³µêµ¬ 4ì‹œê°„ |
| **SEV-3 (Medium)** | ë¶€ë¶„ ê¸°ëŠ¥ ì¥ì•  | íŠ¹ì • í˜ì´ì§€ ì—ëŸ¬, ëŠë¦° ì‘ë‹µ | í™•ì¸ 1ì‹œê°„, ë³µêµ¬ 24ì‹œê°„ |
| **SEV-4 (Low)** | ê²½ë¯¸í•œ ë¬¸ì œ | UI ê¹¨ì§, ë¹„ì •ìƒ ë¡œê·¸ | ì—…ë¬´ ì‹œê°„ ë‚´ |

### 7.3 ì„ì‹œ ì¡°ì¹˜ í”Œë ˆì´ë¶

#### 7.3.1 AI ë¶„ì„ ì¥ì•  ì‹œ

```bash
# 1. Fallback ê°•ì œ í™œì„±í™”
# Vercel í™˜ê²½ë³€ìˆ˜ ë˜ëŠ” í”¼ì²˜ í”Œë˜ê·¸
FORCE_MOCK_FALLBACK=true

# 2. Sentryì—ì„œ ì—ëŸ¬ ìƒì„¸ í™•ì¸
# -> Error íƒ­ì—ì„œ ìµœê·¼ AI ê´€ë ¨ ì—ëŸ¬ í™•ì¸

# 3. Gemini API ìƒíƒœ í™•ì¸
curl -I https://generativelanguage.googleapis.com/v1/models
```

#### 7.3.2 DB ì—°ê²° ì¥ì•  ì‹œ

```bash
# 1. Supabase ëŒ€ì‹œë³´ë“œ í™•ì¸
# -> Health íƒ­ì—ì„œ ì—°ê²° í’€ ìƒíƒœ í™•ì¸

# 2. ì—°ê²° í’€ ë¦¬ì…‹ (Supabase CLI)
supabase db reset-connection-pool

# 3. ì¬ë°°í¬ (Vercel)
vercel --prod --force
```

#### 7.3.3 ì„±ëŠ¥ ì €í•˜ ì‹œ

```bash
# 1. ìµœê·¼ ë°°í¬ ë¡¤ë°±
vercel rollback

# 2. íŠ¸ë˜í”½ ì œí•œ ê°•í™” (í•„ìš” ì‹œ)
# -> Rate Limiting ì„ê³„ê°’ ë‚®ì¶¤

# 3. ë²ˆë“¤ ë¶„ì„
npm run analyze
```

### 7.4 í¬ìŠ¤íŠ¸ëª¨í…€ í…œí”Œë¦¿

```markdown
# ì¸ì‹œë˜íŠ¸ í¬ìŠ¤íŠ¸ëª¨í…€: [ì œëª©]

## ê°œìš”
- **ë‚ ì§œ**: YYYY-MM-DD HH:MM ~ HH:MM KST
- **ì‹¬ê°ë„**: SEV-X
- **ì§€ì† ì‹œê°„**: Xì‹œê°„ Yë¶„
- **ì˜í–¥ ë²”ìœ„**: [ì˜í–¥ ë°›ì€ ì‚¬ìš©ì ìˆ˜, ê¸°ëŠ¥]
- **ë‹´ë‹¹ì**: [ì´ë¦„]

## íƒ€ì„ë¼ì¸
| ì‹œê°„ | ì´ë²¤íŠ¸ |
|------|--------|
| HH:MM | ì•Œë¦¼ ìˆ˜ì‹  |
| HH:MM | í™•ì¸ ì‹œì‘ |
| HH:MM | ì›ì¸ íŒŒì•… |
| HH:MM | ì„ì‹œ ì¡°ì¹˜ ì ìš© |
| HH:MM | ë³µêµ¬ ì™„ë£Œ |

## ê·¼ë³¸ ì›ì¸
[5 Whys ë¶„ì„]

1. ì™œ ì¥ì• ê°€ ë°œìƒí–ˆëŠ”ê°€? -> [ë‹µë³€]
2. ì™œ [ë‹µë³€]ì´ ë°œìƒí–ˆëŠ”ê°€? -> [ë‹µë³€]
3. ì™œ [ë‹µë³€]ì´ ë°œìƒí–ˆëŠ”ê°€? -> [ë‹µë³€]
4. ì™œ [ë‹µë³€]ì´ ë°œìƒí–ˆëŠ”ê°€? -> [ë‹µë³€]
5. ì™œ [ë‹µë³€]ì´ ë°œìƒí–ˆëŠ”ê°€? -> [ê·¼ë³¸ ì›ì¸]

## ì˜í–¥
- ì˜í–¥ ë°›ì€ ì‚¬ìš©ì: Xëª…
- ì‹¤íŒ¨í•œ ìš”ì²­: Xê±´
- ìˆ˜ìµ ì˜í–¥: (í•´ë‹¹ ì‹œ)

## ì¬ë°œ ë°©ì§€
| ì•¡ì…˜ ì•„ì´í…œ | ë‹´ë‹¹ì | ê¸°í•œ | ìƒíƒœ |
|------------|--------|------|------|
| [ì•¡ì…˜] | [ì´ë¦„] | [ë‚ ì§œ] | ì§„í–‰ì¤‘ |

## êµí›ˆ
- ì˜ëœ ì :
- ê°œì„ í•  ì :
```

### 7.5 ë¡¤ë°± ì „ëµ

```typescript
// ë¡¤ë°± ê²°ì • ê¸°ì¤€
const ROLLBACK_CRITERIA = {
  // ìë™ ë¡¤ë°± (Feature Flag)
  autoRollback: {
    errorRateThreshold: 10,     // ì—ëŸ¬ìœ¨ 10% ì´ˆê³¼
    latencyThreshold: 5000,     // p95 5ì´ˆ ì´ˆê³¼
    duration: 5 * 60 * 1000,    // 5ë¶„ê°„ ì§€ì†
  },

  // ìˆ˜ë™ ë¡¤ë°± ê²°ì •
  manualRollback: {
    triggers: [
      'í•µì‹¬ ê¸°ëŠ¥ ì™„ì „ ë¶ˆê°€',
      'ë°ì´í„° ì •í•©ì„± ë¬¸ì œ',
      'ë³´ì•ˆ ì·¨ì•½ì  ë°œê²¬',
    ],
  },
};

// Vercel ë¡¤ë°± ëª…ë ¹
// vercel rollback [deployment-url]
```

---

## 8. ì›ì ë¶„í•´ (P3)

### ì˜ì¡´ì„± ê·¸ë˜í”„

```mermaid
graph TD
    A[ATOM-1: Sentry ì„¤ì • ê°•í™”] --> D[ATOM-4: ì•Œë¦¼ ê·œì¹™]
    B[ATOM-2: Web Vitals ìˆ˜ì§‘] --> D
    C[ATOM-3: API ë¯¸ë“¤ì›¨ì–´] --> D
    E[ATOM-5: AI ë©”íŠ¸ë¦­ ìˆ˜ì§‘] --> D
    D --> F[ATOM-6: Slack í†µí•©]
    F --> G[ATOM-7: ëŒ€ì‹œë³´ë“œ API]
    G --> H[ATOM-8: ëŒ€ì‹œë³´ë“œ UI]
```

### ATOM-1: Sentry ì„¤ì • ê°•í™”

- **ì†Œìš”ì‹œê°„**: 2ì‹œê°„
- **ì˜ì¡´ì„±**: ì—†ìŒ
- **ì‚°ì¶œë¬¼**: ì†ŒìŠ¤ë§µ ì—…ë¡œë“œ CI/CD, ë¦´ë¦¬ì¦ˆ íƒœê¹…
- **ì„±ê³µ ê¸°ì¤€**: ìŠ¤íƒ íŠ¸ë ˆì´ìŠ¤ì—ì„œ ì‹¤ì œ ì†ŒìŠ¤ ì½”ë“œ ë¼ì¸ í™•ì¸ ê°€ëŠ¥

### ATOM-2: Web Vitals ìˆ˜ì§‘

- **ì†Œìš”ì‹œê°„**: 3ì‹œê°„
- **ì˜ì¡´ì„±**: ATOM-1
- **ì‚°ì¶œë¬¼**: `lib/analytics/web-vitals.ts`
- **ì„±ê³µ ê¸°ì¤€**: LCP, FID, CLS, TTFB, INP ë©”íŠ¸ë¦­ Sentryì— ê¸°ë¡

### ATOM-3: API ì„±ëŠ¥ ë¯¸ë“¤ì›¨ì–´

- **ì†Œìš”ì‹œê°„**: 3ì‹œê°„
- **ì˜ì¡´ì„±**: ATOM-1
- **ì‚°ì¶œë¬¼**: `lib/api/performance-middleware.ts`
- **ì„±ê³µ ê¸°ì¤€**: API ì‘ë‹µ ì‹œê°„ ìë™ ê¸°ë¡, ëŠë¦° ì‘ë‹µ ê²½ê³ 

### ATOM-4: ì•Œë¦¼ ê·œì¹™ ì •ì˜

- **ì†Œìš”ì‹œê°„**: 2ì‹œê°„
- **ì˜ì¡´ì„±**: ATOM-1, ATOM-2, ATOM-3
- **ì‚°ì¶œë¬¼**: `lib/notifications/rules.ts`
- **ì„±ê³µ ê¸°ì¤€**: ì„ê³„ê°’ ê¸°ë°˜ ì•Œë¦¼ íŠ¸ë¦¬ê±° ë™ì‘

### ATOM-5: AI ë©”íŠ¸ë¦­ ìˆ˜ì§‘

- **ì†Œìš”ì‹œê°„**: 3ì‹œê°„
- **ì˜ì¡´ì„±**: ì—†ìŒ
- **ì‚°ì¶œë¬¼**: `lib/gemini/metrics.ts`
- **ì„±ê³µ ê¸°ì¤€**: Fallback ì‚¬ìš©ë¥ , ì‘ë‹µ ì‹œê°„ ì¶”ì 

### ATOM-6: Slack í†µí•©

- **ì†Œìš”ì‹œê°„**: 2ì‹œê°„
- **ì˜ì¡´ì„±**: ATOM-4
- **ì‚°ì¶œë¬¼**: `lib/notifications/slack.ts`
- **ì„±ê³µ ê¸°ì¤€**: ì•Œë¦¼ Slack ì±„ë„ì— ì „ì†¡

### ATOM-7: ëŒ€ì‹œë³´ë“œ API

- **ì†Œìš”ì‹œê°„**: 4ì‹œê°„
- **ì˜ì¡´ì„±**: ATOM-5
- **ì‚°ì¶œë¬¼**: `app/api/admin/monitoring/route.ts`
- **ì„±ê³µ ê¸°ì¤€**: ë©”íŠ¸ë¦­ JSON ì‘ë‹µ

### ATOM-8: ëŒ€ì‹œë³´ë“œ UI

- **ì†Œìš”ì‹œê°„**: 6ì‹œê°„
- **ì˜ì¡´ì„±**: ATOM-7
- **ì‚°ì¶œë¬¼**: `app/admin/monitoring/page.tsx`
- **ì„±ê³µ ê¸°ì¤€**: ë©”íŠ¸ë¦­ ì‹œê°í™” ì™„ë£Œ

### ì´ ì†Œìš”ì‹œê°„

| í•­ëª© | ì‹œê°„ |
|------|------|
| ATOM-1~8 | 25ì‹œê°„ |
| ë³‘ë ¬ ì‹¤í–‰ ì‹œ | 15ì‹œê°„ |

---

## 9. ì²´í¬ë¦¬ìŠ¤íŠ¸

### êµ¬í˜„ ì „

- [ ] Sentry DSN í™˜ê²½ë³€ìˆ˜ ì„¤ì •
- [ ] Slack Webhook URL ì„¤ì •
- [ ] ì„±ëŠ¥ ëª©í‘œ íŒ€ í•©ì˜
- [ ] ì•Œë¦¼ ì±„ë„ ìƒì„± (#alerts, #performance, #ai-alerts)

### êµ¬í˜„ ì¤‘

- [ ] Sentry ì†ŒìŠ¤ë§µ ì—…ë¡œë“œ CI/CD
- [ ] Web Vitals ìˆ˜ì§‘ êµ¬í˜„
- [ ] API ì„±ëŠ¥ ë¯¸ë“¤ì›¨ì–´ ì ìš©
- [ ] AI ë©”íŠ¸ë¦­ ìˆ˜ì§‘ êµ¬í˜„
- [ ] Slack ì•Œë¦¼ í†µí•©
- [ ] ëŒ€ì‹œë³´ë“œ API êµ¬í˜„
- [ ] ëŒ€ì‹œë³´ë“œ UI êµ¬í˜„

### êµ¬í˜„ í›„

- [ ] ì•Œë¦¼ í…ŒìŠ¤íŠ¸ (ê° ì±„ë„ë³„)
- [ ] ëŒ€ì‹œë³´ë“œ ë©”íŠ¸ë¦­ ê²€ì¦
- [ ] ìƒ˜í”Œë§ ë¹„ìœ¨ ìµœì í™”
- [ ] ì¸ì‹œë˜íŠ¸ ëŒ€ì‘ í›ˆë ¨
- [ ] í¬ìŠ¤íŠ¸ëª¨í…€ í…œí”Œë¦¿ ì¤€ë¹„
- [ ] ë¬¸ì„œ ì—…ë°ì´íŠ¸

---

## 10. êµ¬í˜„ íŒŒì¼ ëª©ë¡

| íŒŒì¼ | ì„¤ëª… | ìƒíƒœ |
|------|------|------|
| `sentry.client.config.ts` | Sentry í´ë¼ì´ì–¸íŠ¸ ì„¤ì • | êµ¬í˜„ë¨ |
| `sentry.server.config.ts` | Sentry ì„œë²„ ì„¤ì • | êµ¬í˜„ë¨ |
| `lib/analytics/web-vitals.ts` | Web Vitals ìˆ˜ì§‘ | ì˜ˆì • |
| `lib/api/performance-middleware.ts` | API ì„±ëŠ¥ ë¯¸ë“¤ì›¨ì–´ | ì˜ˆì • |
| `lib/gemini/metrics.ts` | AI ë©”íŠ¸ë¦­ ìˆ˜ì§‘ | ì˜ˆì • |
| `lib/notifications/slack.ts` | Slack ì•Œë¦¼ | ì˜ˆì • |
| `lib/notifications/rules.ts` | ì•Œë¦¼ ê·œì¹™ | ì˜ˆì • |
| `app/api/admin/monitoring/route.ts` | ëŒ€ì‹œë³´ë“œ API | ì˜ˆì • |
| `app/admin/monitoring/page.tsx` | ëŒ€ì‹œë³´ë“œ UI | ì˜ˆì • |

---

## 11. í™˜ê²½ ë³€ìˆ˜

```bash
# Sentry
NEXT_PUBLIC_SENTRY_DSN=https://xxx@xxx.ingest.sentry.io/xxx
SENTRY_AUTH_TOKEN=xxx
SENTRY_ORG=yiroom
SENTRY_PROJECT=yiroom-web

# Slack Webhooks
SLACK_WEBHOOK_ALERTS=https://hooks.slack.com/services/xxx
SLACK_WEBHOOK_PERFORMANCE=https://hooks.slack.com/services/xxx
SLACK_WEBHOOK_AI=https://hooks.slack.com/services/xxx

# ëª¨ë°”ì¼
EXPO_PUBLIC_SENTRY_DSN=https://xxx@xxx.ingest.sentry.io/xxx

# ì•± ë²„ì „
NEXT_PUBLIC_APP_VERSION=1.0.0

# Axiom (í–¥í›„)
AXIOM_TOKEN=xxx
AXIOM_ORG_ID=xxx
```

---

**Version**: 2.0 | **Created**: 2026-01-23 | **Updated**: 2026-01-23
**ê´€ë ¨ ADR**: [ADR-019](../adr/ADR-019-performance-monitoring.md)
**ê´€ë ¨ SDD**: [SDD-AUDIT-LOGGING](./SDD-AUDIT-LOGGING.md)

### ë³€ê²½ ì´ë ¥

| ë²„ì „ | ë‚ ì§œ | ë³€ê²½ ë‚´ìš© |
|------|------|----------|
| 1.0 | 2026-01-23 | ì´ˆê¸° ë²„ì „ |
| 2.0 | 2026-01-23 | êµ¬ì¡° ì¬ì •ë¹„ (3ëŒ€ ê´€ì¸¡ì„± ê¸°ë‘¥, ë„êµ¬ ìŠ¤íƒ, í•µì‹¬ ë©”íŠ¸ë¦­, ì•Œë¦¼ ê·œì¹™, ëŒ€ì‹œë³´ë“œ, ì¸ì‹œë˜íŠ¸ ëŒ€ì‘) |
