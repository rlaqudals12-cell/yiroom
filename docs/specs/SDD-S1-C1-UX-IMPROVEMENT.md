# SDD: S-1/C-1 UX 개선 (PC-1 패턴 적용)

> PC-1 퍼스널 컬러 분석에 적용된 UX 패턴을 S-1(피부), C-1(체형) 분석에 확장 적용

## 개요

### 배경

PC-1에서 다음 UX 개선을 적용함:

1. 기존 분석 결과가 있으면 자동 리디렉트
2. 확인 중 로딩 스피너 표시
3. 기존 결과 배너 (재분석 옵션 제공)
4. 결과 페이지에 환경 요인 안내 카드

S-1, C-1에도 동일한 패턴을 적용하여 일관된 사용자 경험 제공

### 범위

- S-1 피부 분석 (`/analysis/skin`)
- C-1 체형 분석 (`/analysis/body`)
- 결과 페이지 (`/analysis/skin/result/[id]`, `/analysis/body/result/[id]`)

## 현재 상태 분석

### DB 스키마

| 테이블                     | confidence 필드 | 대안                             |
| -------------------------- | :-------------: | -------------------------------- |
| personal_color_assessments |     ✅ INT      | -                                |
| skin_analyses              |     ❌ 없음     | overall_score                    |
| body_analyses              |     ❌ 없음     | style_recommendations.confidence |

### 결정: 신뢰도 없이 적용

S-1, C-1은 DB에 신뢰도 필드가 없으므로:

- **기존 결과 있으면 무조건 리디렉트** (신뢰도 분기 없음)
- **환경 요인 안내 카드만 추가** (낮은 신뢰도 배너 없음)

향후 DB 스키마에 신뢰도 필드 추가 시 PC-1과 동일한 분기 로직 적용 가능

## 상세 요구사항

### 1. 메인 페이지 변경

#### 1.1 S-1 피부 분석 메인 (`/analysis/skin/page.tsx`)

**현재 동작:**

- 기존 결과 확인 후 배너로 표시
- 신뢰도 분기 없음

**변경 동작:**

```
페이지 진입
  ├─ 로딩 스피너 표시 ("확인 중...")
  ├─ 기존 결과 조회
  │   ├─ 결과 있음 → router.replace('/analysis/skin/result/{id}')
  │   └─ 결과 없음 → 가이드 페이지 표시
  └─ 로딩 종료
```

**구현 포인트:**

- `checkingExisting` 상태 추가
- `useEffect`에서 기존 결과 확인 후 자동 리디렉트
- 기존 결과 배너 제거 (자동 리디렉트로 대체)

#### 1.2 C-1 체형 분석 메인 (`/analysis/body/page.tsx`)

S-1과 동일한 패턴 적용

### 2. 결과 페이지 변경

#### 2.1 S-1 피부 분석 결과 (`/analysis/skin/result/[id]/page.tsx`)

**추가 요소: 환경 요인 안내 카드**

위치: 기본 분석 탭, VisualReportCard 아래

```tsx
<div className="mb-6 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 ...">
  <Lightbulb />
  <p>알아두세요</p>
  <ul>
    <li>
      <Sun /> 조명/메이크업에 따라 결과가 달라질 수 있어요
    </li>
    <li>
      <Sparkles /> 노메이크업 상태에서 촬영하면 가장 정확해요
    </li>
  </ul>
</div>
```

**S-1 전용 문구:**

- 조명/메이크업에 따라 결과가 달라질 수 있어요
- 메이크업이 있으면 피부 상태 분석 정확도가 낮아져요
- 노메이크업 상태에서 촬영하면 가장 정확해요

#### 2.2 C-1 체형 분석 결과 (`/analysis/body/result/[id]/page.tsx`)

**C-1 전용 문구:**

- 조명에 따라 실루엣 인식이 달라질 수 있어요
- 오버핏 의류는 분석 정확도에 영향을 줄 수 있어요
- 타이트한 옷에서 촬영하면 더 정확해요

## 변경 파일 목록

| 파일                                            | 변경 내용                  |
| ----------------------------------------------- | -------------------------- |
| `app/(main)/analysis/skin/page.tsx`             | 자동 리디렉트, 로딩 스피너 |
| `app/(main)/analysis/skin/result/[id]/page.tsx` | 환경 요인 안내 카드        |
| `app/(main)/analysis/body/page.tsx`             | 자동 리디렉트, 로딩 스피너 |
| `app/(main)/analysis/body/result/[id]/page.tsx` | 환경 요인 안내 카드        |

## 제외 항목

다음은 이번 스펙에서 **제외**:

1. **낮은 신뢰도 배너** - DB 신뢰도 필드 없음
2. **결과 페이지 재분석 권장 배너** - DB 신뢰도 필드 없음
3. **등급 메시지 분기** - S-1/C-1은 기존 점수 기반 메시지 적합

## 테스트 계획

### 수동 테스트

1. S-1/C-1 메인 페이지 진입 시 자동 리디렉트 동작 확인
2. 기존 결과 없을 때 가이드 페이지 정상 표시 확인
3. 환경 요인 안내 카드 다크모드 대응 확인

### 자동화 테스트

기존 테스트 파일 업데이트 불필요 (기능 추가만)

## 일정

| 단계            | 예상 작업량 |
| --------------- | ----------- |
| S-1 메인 페이지 | 1개 파일    |
| S-1 결과 페이지 | 1개 파일    |
| C-1 메인 페이지 | 1개 파일    |
| C-1 결과 페이지 | 1개 파일    |
| 테스트          | 수동        |

---

**Version**: 1.0 | **Date**: 2026-01-08 | **Author**: Claude
