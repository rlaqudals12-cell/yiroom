# SDD: S-1 í”¼ë¶€ ë¶„ì„ UX ê°œì„ 

> **Status**: Phase 1 ì™„ë£Œ, Phase 2-3 ì§„í–‰ ì¤‘
> **Version**: 2.1
> **Created**: 2026-01-09
> **Updated**: 2026-01-28
> **Module**: S-1 í”¼ë¶€ ë¶„ì„
> **Parent Spec**: SDD-VISUAL-SKIN-REPORT.md
> **Complexity**: Phase 1: 43ì  (ì™„ë£Œ) / Phase 2: 68ì  / Phase 3: 85ì 
> **P3 ì ìˆ˜**: Phase 2: 100ì  / Phase 3: 100ì 

---

## 0. ê¶ê·¹ì˜ í˜•íƒœ (P1)

### ì´ìƒì  ìµœì¢… ìƒíƒœ

"í”¼ë¶€ ë¶„ì„ ê²°ê³¼ë¥¼ PC-1 ìˆ˜ì¤€ì˜ í’ë¶€í•œ UXë¡œ ì œê³µí•˜ê³ , ì‚¬ì§„ ì¬ì‚¬ìš©/ë¹„êµ ê¸°ëŠ¥ìœ¼ë¡œ ì‚¬ìš©ì í¸ì˜ì„±ì„ ê·¹ëŒ€í™”í•˜ëŠ” í”¼ë¶€ ë¶„ì„ ê²½í—˜"

- PC-1ê³¼ ë™ì¼í•œ UX ì¼ê´€ì„±
- ì‚¬ì§„ ì¬ì‚¬ìš©ìœ¼ë¡œ ì¬ì´¬ì˜ ìµœì†Œí™”
- Before/After ë¹„êµ ê¸°ëŠ¥
- 12ê°œ ì„¸ë¶€ ì¡´ ë¶„ì„ (Phase 3)

### ë¬¼ë¦¬ì  í•œê³„

| í•œê³„ | ì´ìœ  | ì™„í™” ì „ëµ |
|------|------|----------|
| ì‚¬ì§„ í’ˆì§ˆ | ì‚¬ìš©ì ì´¬ì˜ í™˜ê²½ ë‹¤ì–‘ | ì´¬ì˜ ê°€ì´ë“œ ì œê³µ |
| ì¡´ ë¶„í•  ì •í™•ë„ | ì–¼êµ´ ê°ë„/ì¡°ëª… ì˜í–¥ | CIE ì „ì²˜ë¦¬ ì—°ë™ |
| ë¹„êµ ê¸°ê°„ | í”¼ë¶€ ë³€í™” ì‹œê°„ í•„ìš” | ìµœì†Œ 2ì£¼ ê¶Œì¥ |

### 100ì  ê¸°ì¤€

| ì§€í‘œ | 100ì  ê¸°ì¤€ | í˜„ì¬ ëª©í‘œ |
|------|-----------|----------|
| PC-1 UX ì¼ê´€ì„± | 100% | 90% |
| ì‚¬ì§„ ì¬ì‚¬ìš© ì„±ê³µë¥  | 95% | 85% |
| Before/After ë§Œì¡±ë„ | 90% | 80% |
| 12ì¡´ ë¶„ì„ ì •í™•ë„ | 90% | Phase 3 |

### í˜„ì¬ ëª©í‘œ: 75%

**ì¢…í•© ë‹¬ì„±ë¥ **: **75%** (Phase 1 ì™„ë£Œ, Phase 2-3 ì§„í–‰ ì¤‘)

| Phase | ë‹¬ì„±ë¥  | ìƒíƒœ |
|-------|--------|------|
| Phase 1 (ê³ ì • ë²„íŠ¼, FaceZoneMap) | 100% | âœ… ì™„ë£Œ |
| Phase 2 (ì‚¬ì§„ ì¬ì‚¬ìš©, Before/After) | 60% | ğŸ”„ ì§„í–‰ ì¤‘ |
| Phase 3 (12ì¡´, í”¼ë¶€ ì¼ê¸°) | 30% | ğŸ“‹ ê³„íš |

### ì˜ë„ì  ì œì™¸

| ì œì™¸ í•­ëª© | ì´ìœ  | ì¬ê²€í†  ì‹œì  |
|----------|------|------------|
| ì‹¤ì‹œê°„ í”¼ë¶€ íŠ¸ë˜í‚¹ | ì„±ëŠ¥/ë³µì¡ë„ | ëª¨ë°”ì¼ ì•± |
| ì˜ë£Œ ì—°ê³„ | ë²•ì  ì œì•½ | íŒŒíŠ¸ë„ˆì‹­ |
| AI í”¼ë¶€ ì‹œë®¬ë ˆì´ì…˜ | ê¸°ìˆ  ë³µì¡ë„ | Phase F |

---

## 1. ê°œìš”

### 1.1 ëª©ì 

í”¼ë¶€ ë¶„ì„(S-1)ì˜ UXë¥¼ í¼ìŠ¤ë„ ì»¬ëŸ¬(PC-1)ì™€ ë™ì¼í•œ ìˆ˜ì¤€ìœ¼ë¡œ ê°œì„ í•˜ì—¬ ì‚¬ìš©ì ê²½í—˜ ì¼ê´€ì„± í™•ë³´. ì‚¬ì§„ ì¬ì‚¬ìš© ì˜µì…˜ ì¶”ê°€ë¡œ í¸ì˜ì„± í–¥ìƒ.

### 1.2 ë°°ê²½

- í¼ìŠ¤ë„ ì»¬ëŸ¬ ë¶„ì„ ëŒ€ë¹„ í”¼ë¶€ ë¶„ì„ ê¸°ëŠ¥ì´ ë¶€ì¡±
- ì‚¬ìš©ì í”¼ë“œë°±: "ë‹¤ì‹œ ë¶„ì„í•˜ê¸°" ë²„íŠ¼ ì°¾ê¸° ì–´ë ¤ì›€
- í¼ìŠ¤ë„ ì»¬ëŸ¬ ì´¬ì˜ ì‚¬ì§„ì„ í”¼ë¶€ ë¶„ì„ì— ì¬ì‚¬ìš©í•˜ê³  ì‹¶ë‹¤ëŠ” ìš”ì²­

### 1.3 ë²”ìœ„

| Phase   | ê¸°ëŠ¥                                                     | ìš°ì„ ìˆœìœ„ | ë¹„ê³          |
| ------- | -------------------------------------------------------- | -------- | ------------ |
| Phase 1 | ê³ ì • í•˜ë‹¨ ë²„íŠ¼, FaceZoneMap í†µí•©, í™œë ¥ë„, ê¸°ì¡´ ê²°ê³¼ ë°°ë„ˆ | ë†’ìŒ     | 4.5ì¼ ì˜ˆìƒ   |
| Phase 2 | ì‚¬ì§„ ì¬ì‚¬ìš©, ì‚¬ì§„ ì˜¤ë²„ë ˆì´, Before/After ë¹„êµ            | ì¤‘ê°„     | DB í™•ì¥ í•„ìš” |
| Phase 3 | 12ê°œ ì„¸ë¶€ ì¡´, í”¼ë¶€ ì¼ê¸°                                  | ë‚®ìŒ     | ì¥ê¸°         |

> **Note**: FaceZoneMap, ZoneDetailCard, SkinVitalityScore ì»´í¬ë„ŒíŠ¸ëŠ” **ì´ë¯¸ êµ¬í˜„ ì™„ë£Œ** ìƒíƒœì…ë‹ˆë‹¤.
> Phase 1ì—ì„œëŠ” ê²°ê³¼ í˜ì´ì§€ í†µí•© ë° UI ê°œì„ ì— ì§‘ì¤‘í•©ë‹ˆë‹¤.

### 1.4 ê´€ë ¨ ë¬¸ì„œ

#### ì›ë¦¬ ë¬¸ì„œ (ê³¼í•™ì  ê¸°ì´ˆ)

- [ì›ë¦¬: í”¼ë¶€ ìƒë¦¬í•™](../principles/skin-physiology.md)
  - Â§2. Tì¡´/Uì¡´ ì •ì˜ - ì¡´ ë¶„í•  ê¸°ì¤€
  - Â§3. í”¼ì§€ ë¶„ë¹„ëŸ‰ - ìœ ë¶„ë„ ì¸¡ì • ì›ë¦¬
  - Â§4. ìˆ˜ë¶„ í•¨ëŸ‰ - ìˆ˜ë¶„ë„ ì¸¡ì • ì›ë¦¬
  - Â§7. ëª¨ê³µ ë¶„ì„ (PVI) - ëª¨ê³µ ìƒíƒœ í‰ê°€
- [ì›ë¦¬: ì´ë¯¸ì§€ ì²˜ë¦¬](../principles/image-processing.md)
  - Â§3. ì–¼êµ´ ë¶„í•  ì•Œê³ ë¦¬ì¦˜ - 6ì¡´/12ì¡´ ë¶„í• 
  - Â§4. ìƒ‰ìƒ ë¶„ì„ - í”¼ë¶€ í†¤ ì¶”ì¶œ
- [ì›ë¦¬: AI ì¶”ë¡ ](../principles/ai-inference.md)
  - Â§2. ì‹ ë¢°ë„ ê³„ì‚° - Gemini ì‘ë‹µ ì‹ ë¢°ë„
  - Â§3. í´ë°± ì „ëµ - ë¶„ì„ ì‹¤íŒ¨ ì‹œ ëŒ€ì‘
- [ì›ë¦¬: í¬ë¡œìŠ¤ë„ë©”ì¸ ì‹œë„ˆì§€](../principles/cross-domain-synergy.md)
  - Â§4. ìƒí™œ ìš”ì¸ ìƒê´€ê´€ê³„ - ë‹¤ì´ì–´ë¦¬ ìƒê´€ë¶„ì„

#### ADR (ê¸°ìˆ  ê²°ì •)

- [ADR-001: Core Image Engine](../adr/ADR-001-core-image-engine.md) - ì´ë¯¸ì§€ ì „ì²˜ë¦¬
- [ADR-003: AI ëª¨ë¸ ì„ íƒ](../adr/ADR-003-ai-model-selection.md) - Gemini ì„ íƒ ê·¼ê±°
- [ADR-010: AI íŒŒì´í”„ë¼ì¸](../adr/ADR-010-ai-pipeline.md) - ë¶„ì„ í”Œë¡œìš°

#### ê´€ë ¨ ìŠ¤í™

- [SDD-VISUAL-SKIN-REPORT](./SDD-VISUAL-SKIN-REPORT.md) - ì‹œê°ì  ë¦¬í¬íŠ¸ ê¸°ë³¸ ì„¤ê³„
- [SDD-PHASE-D-SKIN-CONSULTATION](./SDD-PHASE-D-SKIN-CONSULTATION.md) - í”¼ë¶€ ìƒë‹´ ì±„íŒ…
- PC-1 ë¶„ì„ í˜ì´ì§€ íŒ¨í„´ - UX ì¼ê´€ì„± ê¸°ì¤€

## 2. Phase 1 ìƒì„¸ ì„¤ê³„

### 2.1 ê³ ì • í•˜ë‹¨ "ë‹¤ì‹œ ë¶„ì„í•˜ê¸°" ë²„íŠ¼

#### 2.1.1 ì ìš© ëŒ€ìƒ

| í˜ì´ì§€           | í˜„ì¬ ìƒíƒœ        | ê°œì„                 |
| ---------------- | ---------------- | ------------------- |
| í”¼ë¶€ ë¶„ì„ ê²°ê³¼   | ìŠ¤í¬ë¡¤ í•˜ë‹¨ ë²„íŠ¼ | ê³ ì • í•˜ë‹¨ ë²„íŠ¼ ì¶”ê°€ |
| í¼ìŠ¤ë„ ì»¬ëŸ¬ ê²°ê³¼ | ìŠ¤í¬ë¡¤ í•˜ë‹¨ ë²„íŠ¼ | ê³ ì • í•˜ë‹¨ ë²„íŠ¼ ì¶”ê°€ |
| ì²´í˜• ë¶„ì„ ê²°ê³¼   | ìŠ¤í¬ë¡¤ í•˜ë‹¨ ë²„íŠ¼ | ê³ ì • í•˜ë‹¨ ë²„íŠ¼ ì¶”ê°€ |
| í—¤ì–´ ë¶„ì„ ê²°ê³¼   | ìŠ¤í¬ë¡¤ í•˜ë‹¨ ë²„íŠ¼ | ê³ ì • í•˜ë‹¨ ë²„íŠ¼ ì¶”ê°€ |

#### 2.1.2 UI ì„¤ê³„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  ê²°ê³¼ í˜ì´ì§€ ë³¸ë¬¸                â”‚
â”‚                     ...                         â”‚
â”‚                     ...                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â† ê³ ì • ì˜ì—­
â”‚  â”‚  [ë‹¤ì‹œ ë¶„ì„í•˜ê¸°]        [ê³µìœ í•˜ê¸°]       â”‚   â”‚    bottom-20
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    (í•˜ë‹¨ ë„¤ë¹„ ìœ„)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                  í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜                 â”‚ â† bottom-0
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 2.1.3 ì»´í¬ë„ŒíŠ¸ Props

```typescript
// components/analysis/common/FixedBottomActions.tsx
interface FixedBottomActionsProps {
  onRetry: () => void;
  onShare?: () => void;
  retryLabel?: string; // ê¸°ë³¸ê°’: "ë‹¤ì‹œ ë¶„ì„í•˜ê¸°"
  shareLabel?: string; // ê¸°ë³¸ê°’: "ê³µìœ í•˜ê¸°"
  showShare?: boolean; // ê¸°ë³¸ê°’: true
  className?: string;
}
```

#### 2.1.4 ìŠ¤íƒ€ì¼

```tsx
<div className="fixed bottom-20 left-0 right-0 p-4 bg-card/95 backdrop-blur-sm border-t border-border/50 z-10">
  <div className="max-w-md mx-auto flex gap-3">
    <Button onClick={onRetry} className="flex-1">
      {retryLabel}
    </Button>
    {showShare && (
      <Button onClick={onShare} variant="outline" className="flex-1">
        {shareLabel}
      </Button>
    )}
  </div>
</div>
```

### 2.2 ì‚¬ì§„ ì¬ì‚¬ìš© ê¸°ëŠ¥ (Phase 2ë¡œ ì´ë™)

> **âš ï¸ Phase 2ë¡œ ì´ë™**: DB ìŠ¤í‚¤ë§ˆ í™•ì¥(image_quality_score ë“±) ë° PC-1 ì—°ë™ ë¡œì§ í•„ìš”.
> Phase 1ì—ì„œëŠ” êµ¬í˜„í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

#### 2.2.1 ì •ì±… ê²°ì •

**ë¬¸ì œì **: ê¸°ì¡´ ì •ì±…ìƒ ë¶„ì„ í›„ ì´ë¯¸ì§€ ì¦‰ì‹œ ì‚­ì œ â†’ ì¬ì‚¬ìš© ë¶ˆê°€

**í•´ê²°**: ë™ì˜ ê¸°ë°˜ ì¬ì‚¬ìš© (Option A)

```
í¼ìŠ¤ë„ ì»¬ëŸ¬ ë¶„ì„ ì‹œ:
  â””â”€ ì´ë¯¸ì§€ ì €ì¥ ë™ì˜ â†’ image_consents í…Œì´ë¸”ì— ê¸°ë¡
                      â†’ Supabase Storageì— ì´ë¯¸ì§€ ì €ì¥
                      â””â”€ retention_until: ë™ì˜ì¼ + 1ë…„

í”¼ë¶€ ë¶„ì„ ì§„ì… ì‹œ:
  â””â”€ ìµœê·¼ í¼ìŠ¤ë„ ì»¬ëŸ¬ ë™ì˜ í™•ì¸
     â”œâ”€ ë™ì˜ O + 7ì¼ ì´ë‚´ â†’ "ì‚¬ì§„ ì¬ì‚¬ìš©" ì˜µì…˜ í‘œì‹œ
     â””â”€ ë™ì˜ X ë˜ëŠ” 7ì¼ ì´ˆê³¼ â†’ ìƒˆë¡œ ì´¬ì˜ë§Œ í‘œì‹œ
```

#### 2.2.2 ì¬ì‚¬ìš© ì¡°ê±´

```typescript
interface PhotoReuseEligibility {
  eligible: boolean;
  reason?: 'no_consent' | 'expired' | 'no_image' | 'low_quality';
  sourceAnalysis?: {
    id: string;
    type: 'personal-color';
    analyzedAt: Date;
    imageUrl: string;
    thumbnailUrl?: string;
  };
}

const REUSE_CONDITIONS = {
  maxAgeDays: 7, // 7ì¼ ì´ë‚´ ì´¬ì˜
  minQualityScore: 70, // í’ˆì§ˆ 70ì  ì´ìƒ
  requiredAngle: 'front', // ì •ë©´ ì‚¬ì§„ë§Œ
};
```

#### 2.2.3 DB ì¡°íšŒ

```sql
-- í”¼ë¶€ ë¶„ì„ ì§„ì… ì‹œ ì¬ì‚¬ìš© ê°€ëŠ¥í•œ í¼ìŠ¤ë„ ì»¬ëŸ¬ ì´ë¯¸ì§€ ì¡°íšŒ
SELECT
  pca.id,
  pca.created_at,
  ic.consent_given,
  ic.retention_until,
  -- Storage URLì€ ë³„ë„ ì¡°íšŒ í•„ìš”
  pca.image_quality_score
FROM personal_color_assessments pca
LEFT JOIN image_consents ic
  ON ic.clerk_user_id = pca.clerk_user_id
  AND ic.analysis_type = 'personal-color'
WHERE pca.clerk_user_id = auth.jwt() ->> 'sub'
  AND pca.created_at > NOW() - INTERVAL '7 days'
  AND ic.consent_given = true
  AND ic.retention_until > NOW()
ORDER BY pca.created_at DESC
LIMIT 1;
```

#### 2.2.4 UI ì„¤ê³„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“¸ í”¼ë¶€ ë¶„ì„ìš© ì‚¬ì§„ì„ ì¤€ë¹„í•´ì£¼ì„¸ìš”               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                 â”‚
â”‚  ğŸ’¡ ìµœê·¼ í¼ìŠ¤ë„ ì»¬ëŸ¬ ë¶„ì„ ì‚¬ì§„ì´ ìˆì–´ìš”!          â”‚
â”‚                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  [ì–¼êµ´ ì¸ë„¤ì¼]   â”‚  â”‚  ğŸ“·            â”‚      â”‚
â”‚  â”‚                 â”‚  â”‚  ìƒˆë¡œ ì´¬ì˜í•˜ê¸°   â”‚      â”‚
â”‚  â”‚  ì´ ì‚¬ì§„        â”‚  â”‚                 â”‚      â”‚
â”‚  â”‚  ì‚¬ìš©í•˜ê¸°       â”‚  â”‚  ë” ì •í™•í•œ ë¶„ì„  â”‚      â”‚
â”‚  â”‚                 â”‚  â”‚  ì„ ìœ„í•´ ìƒˆë¡œ    â”‚      â”‚
â”‚  â”‚  1ì›” 5ì¼ ì´¬ì˜   â”‚  â”‚  ì´¬ì˜í•´ìš”       â”‚      â”‚
â”‚  â”‚  (ì¶”ì²œ)         â”‚  â”‚                 â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                 â”‚
â”‚  âš ï¸ í”¼ë¶€ ìƒíƒœê°€ ë°”ë€Œì—ˆë‹¤ë©´ ìƒˆë¡œ ì´¬ì˜ì„ ì¶”ì²œí•´ìš”   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 2.2.5 ì»´í¬ë„ŒíŠ¸ Props

```typescript
// components/analysis/skin/PhotoReuseSelector.tsx
interface PhotoReuseSelectorProps {
  eligibility: PhotoReuseEligibility;
  onSelectReuse: () => void;
  onSelectNewCapture: () => void;
  onSelectGallery?: () => void; // ê°¤ëŸ¬ë¦¬ ì„ íƒ ì˜µì…˜
}
```

### 2.3 ê¸°ì¡´ ë¶„ì„ ê²°ê³¼ ë°°ë„ˆ

#### 2.3.1 PC-1 íŒ¨í„´ ì ìš©

```typescript
// í”¼ë¶€ ë¶„ì„ í˜ì´ì§€ ì§„ì… ì‹œ ê¸°ì¡´ ê²°ê³¼ í™•ì¸
interface ExistingSkinAnalysis {
  id: string;
  skinType: string;
  overallScore: number;
  created_at: string;
}
```

#### 2.3.2 UI ì„¤ê³„ (PC-1 íŒ¨í„´ ë™ì¼)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“Š ì´ì „ í”¼ë¶€ ë¶„ì„ ê²°ê³¼ê°€ ìˆì–´ìš”                 â”‚
â”‚                                                 â”‚
â”‚  í”¼ë¶€ íƒ€ì…: ë³µí•©ì„±                              â”‚
â”‚  ì¢…í•© ì ìˆ˜: 72ì                                 â”‚
â”‚  ë¶„ì„ì¼: 2026ë…„ 1ì›” 5ì¼                         â”‚
â”‚                                                 â”‚
â”‚  [ê²°ê³¼ ë³´ê¸°]           [ìƒˆë¡œ ë¶„ì„í•˜ê¸°]          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.4 FaceZoneMap ì»´í¬ë„ŒíŠ¸

> âœ… **ì´ë¯¸ êµ¬í˜„ ì™„ë£Œ**: `components/analysis/visual-report/FaceZoneMap.tsx`
> ìƒì„¸ ì„¤ê³„ëŠ” [SDD-VISUAL-SKIN-REPORT.md Â§4.4](./SDD-VISUAL-SKIN-REPORT.md) ì°¸ì¡°

#### 2.4.1 ê°„ì†Œí™”ëœ SVG (í„°ì¹˜ ì˜ì—­ í™•ëŒ€)

```typescript
// components/analysis/visual-report/FaceZoneMap.tsx
interface FaceZoneMapProps {
  zones: Record<ZoneId, ZoneStatus>;
  size?: 'sm' | 'md' | 'lg';
  onZoneClick?: (zoneId: ZoneId) => void;
  highlightWorst?: boolean;
  className?: string;
}

type ZoneId = 'forehead' | 'tZone' | 'eyes' | 'cheeks' | 'uZone' | 'chin';

interface ZoneStatus {
  score: number;
  status: 'good' | 'normal' | 'warning';
  label: string;
  concerns?: string[];
}
```

#### 2.4.2 í„°ì¹˜ ì˜ì—­ ìµœì†Œ 44px ë³´ì¥

```tsx
// SVG viewBox ê¸°ì¤€ í„°ì¹˜ ì˜ì—­
const ZONE_TOUCH_AREAS = {
  forehead: { x: 30, y: 30, width: 140, height: 60 }, // ìµœì†Œ 44px ë³´ì¥
  tZone: { x: 70, y: 90, width: 60, height: 120 },
  eyes: { x: 30, y: 100, width: 140, height: 40 },
  cheeks: { x: 20, y: 130, width: 160, height: 60 },
  uZone: { x: 30, y: 180, width: 140, height: 60 },
  chin: { x: 70, y: 230, width: 60, height: 40 },
};
```

### 2.5 ZoneDetailCard ì»´í¬ë„ŒíŠ¸

> âœ… **ì´ë¯¸ êµ¬í˜„ ì™„ë£Œ**: `components/analysis/visual-report/ZoneDetailCard.tsx`
> ìƒì„¸ ì„¤ê³„ëŠ” [SDD-VISUAL-SKIN-REPORT.md Â§4.7](./SDD-VISUAL-SKIN-REPORT.md) ì°¸ì¡°

#### 2.5.1 Props

```typescript
// components/analysis/visual-report/ZoneDetailCard.tsx
interface ZoneDetailCardProps {
  zoneId: ZoneId;
  zoneName: string;
  score: number;
  status: 'good' | 'normal' | 'warning';
  concerns: string[];
  recommendations: string[];
  onClose: () => void;
}
```

#### 2.5.2 Progressive Disclosure íŒ¨í„´

```
1. FaceZoneMap í‘œì‹œ (ì „ì²´ ìš”ì•½)
2. ì‚¬ìš©ìê°€ ì¡´ í´ë¦­
3. ZoneDetailCard ìŠ¬ë¼ì´ë“œì—… í‘œì‹œ
4. ìƒì„¸ ì •ë³´ + ì¶”ì²œ ì œí’ˆ/ê´€ë¦¬ë²•
5. ë‹«ê¸° ë²„íŠ¼ ë˜ëŠ” ì™¸ë¶€ í´ë¦­ìœ¼ë¡œ ë‹«ê¸°
```

### 2.6 í”¼ë¶€ í™œë ¥ë„ (SkinVitalityScore)

> âœ… **ì´ë¯¸ êµ¬í˜„ ì™„ë£Œ**: `components/analysis/visual-report/SkinVitalityScore.tsx`
> ìƒì„¸ ì„¤ê³„ëŠ” [SDD-VISUAL-SKIN-REPORT.md Â§4.5](./SDD-VISUAL-SKIN-REPORT.md) ì°¸ì¡°

#### 2.6.1 Gemini í”„ë¡¬í”„íŠ¸ í™•ì¥

```typescript
// lib/gemini.ts í”¼ë¶€ ë¶„ì„ í”„ë¡¬í”„íŠ¸ì— ì¶”ê°€
const SKIN_VITALITY_PROMPT = `
ğŸ“Š ì¶”ê°€ ë¶„ì„ í•­ëª©:

[í”¼ë¶€ í™œë ¥ë„ skinVitalityScore]
- íƒ„ë ¥, ìˆ˜ë¶„, ìœ¤ê¸°, ê· ì¼í•¨ì„ ì¢…í•© í‰ê°€
- 0-100 ì ìˆ˜ (ë†’ì„ìˆ˜ë¡ í™œë ¥ ìˆìŒ)
- ì ìˆ˜ ê¸°ì¤€:
  - 80-100: ë§¤ìš° ê±´ê°•í•˜ê³  í™œë ¥ ìˆìŒ
  - 60-79: ì–‘í˜¸í•˜ì§€ë§Œ ê°œì„  ì—¬ì§€ ìˆìŒ
  - 40-59: ê´€ë¦¬ í•„ìš”
  - 0-39: ì§‘ì¤‘ ì¼€ì–´ ê¶Œì¥

[í™œë ¥ë„ ìš”ì¸ vitalityFactors]
- positive: ê°•ì  ìš”ì†Œ ë°°ì—´ (ì˜ˆ: ["íƒ„ë ¥ ìš°ìˆ˜", "ìˆ˜ë¶„ ì¶©ë¶„"])
- negative: ê°œì„  í•„ìš” ìš”ì†Œ ë°°ì—´ (ì˜ˆ: ["ìœ ë¶„ ê³¼ë‹¤", "ëª¨ê³µ í™•ëŒ€"])

ë‹¤ìŒ í•„ë“œë¥¼ JSON ì‘ë‹µì— ì¶”ê°€:
{
  "skinVitalityScore": [0-100],
  "vitalityFactors": {
    "positive": ["ê°•ì 1", "ê°•ì 2"],
    "negative": ["ê°œì„ ì 1", "ê°œì„ ì 2"]
  }
}
`;
```

#### 2.6.2 DB ìŠ¤í‚¤ë§ˆ í™•ì¥

```sql
-- skin_analyses í…Œì´ë¸”ì— í™œë ¥ë„ ì»¬ëŸ¼ ì¶”ê°€ (ì´ë¯¸ ìŠ¤í™ì— ìˆìŒ)
ALTER TABLE skin_analyses
ADD COLUMN IF NOT EXISTS skin_vitality_score INTEGER
  CHECK (skin_vitality_score BETWEEN 0 AND 100);

-- vitalityFactorsëŠ” ê¸°ì¡´ analysis_result JSONBì— í¬í•¨
```

## 3. Phase 2 ìƒì„¸ ì„¤ê³„

> **ë³µì¡ë„**: 68ì  | **ì „ëµ**: standard (ì‹œì§€í‘¸ìŠ¤ ê¶Œì¥)

### 3.1 ì‚¬ì§„ ì¬ì‚¬ìš© ì‹œìŠ¤í…œ

#### 3.1.1 DB ìŠ¤í‚¤ë§ˆ í™•ì¥

```sql
-- ë§ˆì´ê·¸ë ˆì´ì…˜: 202601100100_photo_reuse_system.sql

-- ì´ë¯¸ì§€ ë©”íƒ€ë°ì´í„° í…Œì´ë¸”
CREATE TABLE IF NOT EXISTS analysis_images (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  clerk_user_id TEXT NOT NULL,
  analysis_type TEXT NOT NULL CHECK (analysis_type IN ('personal-color', 'skin', 'body', 'hair')),
  source_analysis_id UUID,
  storage_path TEXT NOT NULL,
  thumbnail_path TEXT,
  quality_score INTEGER CHECK (quality_score BETWEEN 0 AND 100),
  angle TEXT DEFAULT 'front',
  lighting_score INTEGER CHECK (lighting_score BETWEEN 0 AND 100),
  consent_given BOOLEAN DEFAULT false,
  retention_until TIMESTAMPTZ,
  created_at TIMESTAMPTZ DEFAULT NOW(),

  CONSTRAINT fk_user FOREIGN KEY (clerk_user_id)
    REFERENCES users(clerk_user_id) ON DELETE CASCADE
);

-- RLS ì •ì±…
ALTER TABLE analysis_images ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Users can view own images" ON analysis_images
  FOR SELECT USING (clerk_user_id = auth.jwt() ->> 'sub');

CREATE POLICY "Users can insert own images" ON analysis_images
  FOR INSERT WITH CHECK (clerk_user_id = auth.jwt() ->> 'sub');

-- ì¸ë±ìŠ¤
CREATE INDEX idx_analysis_images_user_type
  ON analysis_images(clerk_user_id, analysis_type, created_at DESC);
```

#### 3.1.2 ì‚¬ì§„ ì¬ì‚¬ìš© ë¡œì§

```typescript
// lib/analysis/photo-reuse.ts

export interface PhotoReuseEligibility {
  eligible: boolean;
  reason?: 'no_consent' | 'expired' | 'no_image' | 'low_quality' | 'wrong_angle';
  sourceImage?: {
    id: string;
    analysisType: 'personal-color';
    imageUrl: string;
    thumbnailUrl?: string;
    qualityScore: number;
    analyzedAt: Date;
  };
}

export const REUSE_CONDITIONS = {
  maxAgeDays: 7, // 7ì¼ ì´ë‚´ ì´¬ì˜
  minQualityScore: 70, // í’ˆì§ˆ 70ì  ì´ìƒ
  minLightingScore: 60, // ì¡°ëª… 60ì  ì´ìƒ
  requiredAngle: 'front', // ì •ë©´ ì‚¬ì§„ë§Œ
} as const;

export async function checkPhotoReuseEligibility(
  supabase: SupabaseClient,
  targetAnalysisType: 'skin' | 'body'
): Promise<PhotoReuseEligibility> {
  // ìµœê·¼ 7ì¼ ë‚´ ë™ì˜ë°›ì€ í¼ìŠ¤ë„ì»¬ëŸ¬ ì´ë¯¸ì§€ ì¡°íšŒ
  const { data: images } = await supabase
    .from('analysis_images')
    .select('*')
    .eq('analysis_type', 'personal-color')
    .eq('consent_given', true)
    .eq('angle', 'front')
    .gte('quality_score', REUSE_CONDITIONS.minQualityScore)
    .gte(
      'created_at',
      new Date(Date.now() - REUSE_CONDITIONS.maxAgeDays * 24 * 60 * 60 * 1000).toISOString()
    )
    .order('created_at', { ascending: false })
    .limit(1);

  if (!images || images.length === 0) {
    return { eligible: false, reason: 'no_image' };
  }

  const image = images[0];

  // ë³´ì¡´ ê¸°í•œ í™•ì¸
  if (image.retention_until && new Date(image.retention_until) < new Date()) {
    return { eligible: false, reason: 'expired' };
  }

  return {
    eligible: true,
    sourceImage: {
      id: image.id,
      analysisType: 'personal-color',
      imageUrl: await getSignedUrl(supabase, image.storage_path),
      thumbnailUrl: image.thumbnail_path
        ? await getSignedUrl(supabase, image.thumbnail_path)
        : undefined,
      qualityScore: image.quality_score,
      analyzedAt: new Date(image.created_at),
    },
  };
}
```

#### 3.1.3 PhotoReuseSelector ì»´í¬ë„ŒíŠ¸

```typescript
// components/analysis/skin/PhotoReuseSelector.tsx
'use client';

interface PhotoReuseSelectorProps {
  eligibility: PhotoReuseEligibility;
  onSelectReuse: () => void;
  onSelectNewCapture: () => void;
  className?: string;
}

export function PhotoReuseSelector({
  eligibility,
  onSelectReuse,
  onSelectNewCapture,
  className,
}: PhotoReuseSelectorProps) {
  if (!eligibility.eligible || !eligibility.sourceImage) {
    // ì¬ì‚¬ìš© ë¶ˆê°€ ì‹œ ìƒˆ ì´¬ì˜ë§Œ í‘œì‹œ
    return (
      <div className={cn('space-y-4', className)}>
        <Button onClick={onSelectNewCapture} className="w-full">
          <Camera className="w-4 h-4 mr-2" />
          ì‚¬ì§„ ì´¬ì˜í•˜ê¸°
        </Button>
      </div>
    );
  }

  const { sourceImage } = eligibility;
  const daysSinceCapture = Math.floor(
    (Date.now() - sourceImage.analyzedAt.getTime()) / (1000 * 60 * 60 * 24)
  );

  return (
    <div className={cn('space-y-4', className)} data-testid="photo-reuse-selector">
      <div className="text-sm text-muted-foreground flex items-center gap-2">
        <Sparkles className="w-4 h-4 text-primary" />
        ìµœê·¼ í¼ìŠ¤ë„ ì»¬ëŸ¬ ë¶„ì„ ì‚¬ì§„ì´ ìˆì–´ìš”!
      </div>

      <div className="grid grid-cols-2 gap-3">
        {/* ì¬ì‚¬ìš© ì˜µì…˜ */}
        <button
          onClick={onSelectReuse}
          className="relative p-4 rounded-xl border-2 border-primary bg-primary/5 hover:bg-primary/10 transition-colors"
        >
          <div className="aspect-square relative mb-3 rounded-lg overflow-hidden">
            <Image
              src={sourceImage.thumbnailUrl || sourceImage.imageUrl}
              alt="í¼ìŠ¤ë„ ì»¬ëŸ¬ ë¶„ì„ ì‚¬ì§„"
              fill
              className="object-cover"
            />
            <Badge className="absolute top-2 right-2 bg-primary">ì¶”ì²œ</Badge>
          </div>
          <div className="text-sm font-medium">ì´ ì‚¬ì§„ ì‚¬ìš©í•˜ê¸°</div>
          <div className="text-xs text-muted-foreground">
            {daysSinceCapture === 0 ? 'ì˜¤ëŠ˜' : `${daysSinceCapture}ì¼ ì „`} ì´¬ì˜
          </div>
        </button>

        {/* ìƒˆ ì´¬ì˜ ì˜µì…˜ */}
        <button
          onClick={onSelectNewCapture}
          className="p-4 rounded-xl border-2 border-border hover:border-primary/50 transition-colors"
        >
          <div className="aspect-square flex items-center justify-center mb-3 rounded-lg bg-muted">
            <Camera className="w-8 h-8 text-muted-foreground" />
          </div>
          <div className="text-sm font-medium">ìƒˆë¡œ ì´¬ì˜í•˜ê¸°</div>
          <div className="text-xs text-muted-foreground">
            ë” ì •í™•í•œ ë¶„ì„
          </div>
        </button>
      </div>

      <p className="text-xs text-muted-foreground text-center">
        ğŸ’¡ í”¼ë¶€ ìƒíƒœê°€ ë°”ë€Œì—ˆë‹¤ë©´ ìƒˆë¡œ ì´¬ì˜ì„ ì¶”ì²œí•´ìš”
      </p>
    </div>
  );
}
```

### 3.2 PhotoOverlayMap ì»´í¬ë„ŒíŠ¸

#### 3.2.1 ì„¤ê³„

```typescript
// components/analysis/visual-report/PhotoOverlayMap.tsx
'use client';

interface PhotoOverlayMapProps {
  imageUrl: string;
  zones: Record<ZoneId, ZoneStatus>;
  onZoneClick?: (zoneId: ZoneId) => void;
  showLabels?: boolean;
  opacity?: number; // ì˜¤ë²„ë ˆì´ íˆ¬ëª…ë„ (0-1)
  className?: string;
}

export function PhotoOverlayMap({
  imageUrl,
  zones,
  onZoneClick,
  showLabels = true,
  opacity = 0.6,
  className,
}: PhotoOverlayMapProps) {
  const [imageLoaded, setImageLoaded] = useState(false);

  // ì–¼êµ´ ì˜ì—­ ìë™ ê°ì§€ (ì„ íƒì )
  // ë˜ëŠ” ê³ ì • ë¹„ìœ¨ë¡œ ì˜¤ë²„ë ˆì´ ë°°ì¹˜

  return (
    <div className={cn('relative', className)} data-testid="photo-overlay-map">
      {/* ë°°ê²½ ì´ë¯¸ì§€ */}
      <div className="relative aspect-[3/4] rounded-xl overflow-hidden">
        <Image
          src={imageUrl}
          alt="ë¶„ì„ ì‚¬ì§„"
          fill
          className="object-cover"
          onLoadingComplete={() => setImageLoaded(true)}
        />

        {/* ì¡´ ì˜¤ë²„ë ˆì´ */}
        {imageLoaded && (
          <svg
            viewBox="0 0 200 280"
            className="absolute inset-0 w-full h-full"
            style={{ opacity }}
          >
            {Object.entries(zones).map(([zoneId, status]) => (
              <ZoneOverlay
                key={zoneId}
                zoneId={zoneId as ZoneId}
                status={status}
                onClick={onZoneClick}
                showLabel={showLabels}
              />
            ))}
          </svg>
        )}
      </div>
    </div>
  );
}
```

### 3.3 BeforeAfterSlider ì»´í¬ë„ŒíŠ¸

> âœ… **ì´ë¯¸ êµ¬í˜„ ì™„ë£Œ**: `components/analysis/visual/BeforeAfterSlider.tsx`
> í…ŒìŠ¤íŠ¸: `tests/components/analysis/visual/BeforeAfterSlider.test.tsx`

#### 3.3.1 í†µí•© ë°©ì•ˆ

```typescript
// í”¼ë¶€ ë¶„ì„ ê²°ê³¼ í˜ì´ì§€ì—ì„œ ì‚¬ìš©
import { BeforeAfterSlider } from '@/components/analysis/visual/BeforeAfterSlider';

// ì´ì „ ë¶„ì„ ì´ë¯¸ì§€ ì¡°íšŒ
const { data: previousAnalysis } = await supabase
  .from('skin_analyses')
  .select('id, created_at, analysis_images!inner(storage_path)')
  .order('created_at', { ascending: false })
  .limit(2);

if (previousAnalysis && previousAnalysis.length >= 2) {
  <BeforeAfterSlider
    beforeImage={previousAnalysis[1].analysis_images.storage_path}
    afterImage={previousAnalysis[0].analysis_images.storage_path}
    beforeDate={new Date(previousAnalysis[1].created_at)}
    afterDate={new Date(previousAnalysis[0].created_at)}
  />
}
```

### 3.4 TrendChart ì»´í¬ë„ŒíŠ¸

```typescript
// components/analysis/visual-report/TrendChart.tsx
'use client';

interface TrendChartProps {
  data: Array<{
    date: Date;
    score: number;
    label?: string;
  }>;
  metric: 'overall' | 'hydration' | 'oiliness' | 'pores' | 'vitality';
  height?: number;
  showGoal?: boolean;
  goalScore?: number;
}

const METRIC_LABELS: Record<string, string> = {
  overall: 'ì¢…í•© ì ìˆ˜',
  hydration: 'ìˆ˜ë¶„ë„',
  oiliness: 'ìœ ë¶„ë„',
  pores: 'ëª¨ê³µ',
  vitality: 'í™œë ¥ë„',
};

export function TrendChart({
  data,
  metric,
  height = 200,
  showGoal = false,
  goalScore = 80,
}: TrendChartProps) {
  // ìµœê·¼ 6ê°œì›” ë°ì´í„°ë§Œ í‘œì‹œ
  const recentData = data.slice(-6);

  return (
    <div data-testid="trend-chart" style={{ height }}>
      <div className="flex items-center justify-between mb-2">
        <span className="text-sm font-medium">{METRIC_LABELS[metric]} ë³€í™”</span>
        {showGoal && (
          <span className="text-xs text-muted-foreground">
            ëª©í‘œ: {goalScore}ì 
          </span>
        )}
      </div>

      {/* ì°¨íŠ¸ ë Œë”ë§ (recharts ë˜ëŠ” custom SVG) */}
      <ResponsiveContainer width="100%" height="100%">
        <LineChart data={recentData}>
          <XAxis dataKey="date" tickFormatter={formatDate} />
          <YAxis domain={[0, 100]} />
          <Line
            type="monotone"
            dataKey="score"
            stroke="hsl(var(--primary))"
            strokeWidth={2}
            dot={{ fill: 'hsl(var(--primary))' }}
          />
          {showGoal && (
            <ReferenceLine
              y={goalScore}
              stroke="hsl(var(--muted-foreground))"
              strokeDasharray="3 3"
            />
          )}
        </LineChart>
      </ResponsiveContainer>
    </div>
  );
}
```

### 3.5 Phase 2 êµ¬í˜„ ìˆœì„œ

| ìˆœì„œ     | ì‘ì—…                                | ì˜ì¡´ì„±   | ë‚œì´ë„ | ì˜ˆìƒ ì‹œê°„ |
| -------- | ----------------------------------- | -------- | ------ | --------- |
| 1        | analysis_images í…Œì´ë¸” ë§ˆì´ê·¸ë ˆì´ì…˜ | ì—†ìŒ     | ì¤‘     | 0.5ì¼     |
| 2        | photo-reuse.ts ìœ í‹¸ë¦¬í‹°             | #1       | ì¤‘     | 0.5ì¼     |
| 3        | PhotoReuseSelector ì»´í¬ë„ŒíŠ¸         | #2       | ì¤‘     | 1ì¼       |
| 4        | í”¼ë¶€ ë¶„ì„ í˜ì´ì§€ì— ì¬ì‚¬ìš© UI í†µí•©   | #3       | ì¤‘     | 0.5ì¼     |
| 5        | PhotoOverlayMap ì»´í¬ë„ŒíŠ¸            | ì—†ìŒ     | ìƒ     | 1ì¼       |
| 6        | TrendChart ì»´í¬ë„ŒíŠ¸                 | ì—†ìŒ     | ì¤‘     | 0.5ì¼     |
| 7        | BeforeAfterSlider í†µí•©              | ì—†ìŒ     | í•˜     | 0.5ì¼     |
| 8        | ê²°ê³¼ í˜ì´ì§€ì— ì‹œê°í™” í†µí•©           | #5,#6,#7 | ì¤‘     | 0.5ì¼     |
| 9        | í…ŒìŠ¤íŠ¸ ì‘ì„±                         | ì „ì²´     | ì¤‘     | 1ì¼       |
| **ì´ê³„** |                                     |          |        | **6ì¼**   |

## 4. Phase 3 ìƒì„¸ ì„¤ê³„

> **ë³µì¡ë„**: 85ì  | **ì „ëµ**: full (ì‹œì§€í‘¸ìŠ¤ í•„ìˆ˜)

### 4.1 12ê°œ ì„¸ë¶€ ì¡´ ì‹œìŠ¤í…œ

#### 4.1.1 ì¡´ ì •ì˜

```typescript
// types/skin-zones.ts

export type DetailedZoneId =
  | 'forehead_center'
  | 'forehead_left'
  | 'forehead_right'
  | 'eye_left'
  | 'eye_right'
  | 'cheek_left'
  | 'cheek_right'
  | 'nose_bridge'
  | 'nose_tip'
  | 'chin_center'
  | 'chin_left'
  | 'chin_right';

export interface DetailedZoneStatus {
  zoneId: DetailedZoneId;
  score: number;
  status: 'excellent' | 'good' | 'normal' | 'warning' | 'critical';
  concerns: string[];
  recommendations: string[];
  comparedToPrevious?: {
    change: 'improved' | 'same' | 'declined';
    scoreDiff: number;
  };
}

// 6ì¡´ â†’ 12ì¡´ ë§¤í•‘
export const ZONE_MAPPING: Record<ZoneId, DetailedZoneId[]> = {
  forehead: ['forehead_center', 'forehead_left', 'forehead_right'],
  eyes: ['eye_left', 'eye_right'],
  tZone: ['nose_bridge', 'nose_tip'],
  cheeks: ['cheek_left', 'cheek_right'],
  uZone: ['chin_left', 'chin_right'],
  chin: ['chin_center'],
};
```

#### 4.1.2 DetailedFaceZoneMap ì»´í¬ë„ŒíŠ¸

```typescript
// components/analysis/visual-report/DetailedFaceZoneMap.tsx

interface DetailedFaceZoneMapProps {
  zones: Record<DetailedZoneId, DetailedZoneStatus>;
  size?: 'sm' | 'md' | 'lg';
  onZoneClick?: (zoneId: DetailedZoneId) => void;
  viewMode?: 'simple' | 'detailed'; // 6ì¡´/12ì¡´ í† ê¸€
  highlightWorst?: boolean;
  className?: string;
}
```

#### 4.1.3 Gemini í”„ë¡¬í”„íŠ¸ í™•ì¥

```typescript
const DETAILED_ZONE_PROMPT = `
ğŸ“Š 12ê°œ ì„¸ë¶€ ì¡´ ë¶„ì„:

ê° ì¡´ë³„ë¡œ ë‹¤ìŒ ì •ë³´ë¥¼ ì œê³µí•´ì£¼ì„¸ìš”:

[ì´ë§ˆ ì˜ì—­]
- forehead_center: ì´ë§ˆ ì¤‘ì•™ (Tì¡´ ìƒë‹¨)
- forehead_left: ì™¼ìª½ ì´ë§ˆ
- forehead_right: ì˜¤ë¥¸ìª½ ì´ë§ˆ

[ëˆˆê°€ ì˜ì—­]
- eye_left: ì™¼ìª½ ëˆˆê°€ (ë‹¤í¬ì„œí´, ì£¼ë¦„)
- eye_right: ì˜¤ë¥¸ìª½ ëˆˆê°€

[ì½” ì˜ì—­ (Tì¡´)]
- nose_bridge: ì½§ë“± (ëª¨ê³µ, ë¸”ë™í—¤ë“œ)
- nose_tip: ì½”ë

[ë³¼ ì˜ì—­]
- cheek_left: ì™¼ìª½ ë³¼ (í™ì¡°, ëª¨ê³µ)
- cheek_right: ì˜¤ë¥¸ìª½ ë³¼

[í„± ì˜ì—­]
- chin_center: í„± ì¤‘ì•™ (ì—¬ë“œë¦„)
- chin_left: ì™¼ìª½ í„±ì„ 
- chin_right: ì˜¤ë¥¸ìª½ í„±ì„ 

ê° ì¡´ë³„ JSON í˜•ì‹:
{
  "detailedZones": {
    "forehead_center": {
      "score": [0-100],
      "status": "excellent|good|normal|warning|critical",
      "concerns": ["ë¬¸ì œ1", "ë¬¸ì œ2"],
      "recommendations": ["ê´€ë¦¬ë²•1", "ê´€ë¦¬ë²•2"]
    },
    // ... 12ê°œ ì¡´ ëª¨ë‘
  }
}
`;
```

### 4.2 í”¼ë¶€ ë‹¤ì´ì–´ë¦¬ ì‹œìŠ¤í…œ

#### 4.2.1 DB ìŠ¤í‚¤ë§ˆ

```sql
-- ë§ˆì´ê·¸ë ˆì´ì…˜: 202601100200_skin_diary.sql

CREATE TABLE IF NOT EXISTS skin_diary_entries (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  clerk_user_id TEXT NOT NULL,
  entry_date DATE NOT NULL,

  -- ì»¨ë””ì…˜ ê¸°ë¡
  skin_condition INTEGER CHECK (skin_condition BETWEEN 1 AND 5), -- 1: ë§¤ìš° ë‚˜ì¨, 5: ë§¤ìš° ì¢‹ìŒ
  condition_notes TEXT,

  -- ìƒí™œ ìš”ì¸
  sleep_hours DECIMAL(3,1),
  sleep_quality INTEGER CHECK (sleep_quality BETWEEN 1 AND 5),
  water_intake_ml INTEGER,
  stress_level INTEGER CHECK (stress_level BETWEEN 1 AND 5),

  -- ì™¸ë¶€ ìš”ì¸
  weather TEXT CHECK (weather IN ('sunny', 'cloudy', 'rainy', 'cold', 'hot', 'humid', 'dry')),
  outdoor_hours DECIMAL(3,1),

  -- ìŠ¤í‚¨ì¼€ì–´
  morning_routine_completed BOOLEAN DEFAULT false,
  evening_routine_completed BOOLEAN DEFAULT false,
  special_treatments TEXT[], -- ["ì‹œíŠ¸ë§ˆìŠ¤í¬", "í•„ë§", "ì—ì„¼ìŠ¤ ì§‘ì¤‘ì¼€ì–´"]

  -- AI ì—°ê´€ ë¶„ì„ (ë¶„ì„ í›„ ì—…ë°ì´íŠ¸)
  ai_correlation_score INTEGER, -- ì»¨ë””ì…˜ê³¼ ìš”ì¸ ìƒê´€ê´€ê³„ ì ìˆ˜
  ai_insights JSONB,

  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW(),

  CONSTRAINT fk_user FOREIGN KEY (clerk_user_id)
    REFERENCES users(clerk_user_id) ON DELETE CASCADE,
  CONSTRAINT unique_user_date UNIQUE (clerk_user_id, entry_date)
);

-- RLS
ALTER TABLE skin_diary_entries ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Users can manage own diary" ON skin_diary_entries
  FOR ALL USING (clerk_user_id = auth.jwt() ->> 'sub');

-- ì¸ë±ìŠ¤
CREATE INDEX idx_skin_diary_user_date
  ON skin_diary_entries(clerk_user_id, entry_date DESC);
```

#### 4.2.2 SkinDiaryEntry ì»´í¬ë„ŒíŠ¸

```typescript
// components/analysis/skin-diary/SkinDiaryEntry.tsx

interface SkinDiaryEntryProps {
  date: Date;
  existingEntry?: DiaryEntry;
  onSave: (entry: DiaryEntry) => Promise<void>;
  onCancel: () => void;
}

interface DiaryEntry {
  skinCondition: 1 | 2 | 3 | 4 | 5;
  conditionNotes?: string;
  sleepHours?: number;
  sleepQuality?: 1 | 2 | 3 | 4 | 5;
  waterIntakeMl?: number;
  stressLevel?: 1 | 2 | 3 | 4 | 5;
  weather?: Weather;
  outdoorHours?: number;
  morningRoutineCompleted: boolean;
  eveningRoutineCompleted: boolean;
  specialTreatments: string[];
}
```

#### 4.2.3 CorrelationAnalysis ì»´í¬ë„ŒíŠ¸

```typescript
// components/analysis/skin-diary/CorrelationAnalysis.tsx

interface CorrelationAnalysisProps {
  diaryData: DiaryEntry[];
  skinAnalyses: SkinAnalysis[];
  period: '7days' | '30days' | '90days';
}

// AI ë¶„ì„ ê²°ê³¼
interface CorrelationInsight {
  factor: string; // "ìˆ˜ë©´", "ìˆ˜ë¶„ ì„­ì·¨", "ìŠ¤íŠ¸ë ˆìŠ¤"
  correlation: number; // -1 ~ 1 (ìŒ/ì–‘ ìƒê´€ê´€ê³„)
  confidence: number; // 0-100
  insight: string; // "ìˆ˜ë©´ 7ì‹œê°„ ì´ìƒì¼ ë•Œ í”¼ë¶€ ìƒíƒœê°€ í‰ê·  15% ê°œì„ ë©ë‹ˆë‹¤"
  recommendation: string; // "ìˆ˜ë©´ ì‹œê°„ì„ 7ì‹œê°„ ì´ìƒ ìœ ì§€í•´ë³´ì„¸ìš”"
}
```

### 4.3 Phase 3 êµ¬í˜„ ìˆœì„œ

| ìˆœì„œ     | ì‘ì—…                                   | ì˜ì¡´ì„± | ë‚œì´ë„ | ì˜ˆìƒ ì‹œê°„ |
| -------- | -------------------------------------- | ------ | ------ | --------- |
| 1        | DetailedZoneId íƒ€ì… ì •ì˜               | ì—†ìŒ   | í•˜     | 0.5ì¼     |
| 2        | DetailedFaceZoneMap ì»´í¬ë„ŒíŠ¸           | #1     | ìƒ     | 1.5ì¼     |
| 3        | 12ì¡´ Gemini í”„ë¡¬í”„íŠ¸ í™•ì¥              | #1     | ì¤‘     | 1ì¼       |
| 4        | skin_diary_entries í…Œì´ë¸”              | ì—†ìŒ   | ì¤‘     | 0.5ì¼     |
| 5        | SkinDiaryEntry ì»´í¬ë„ŒíŠ¸                | #4     | ìƒ     | 1.5ì¼     |
| 6        | ë‹¤ì´ì–´ë¦¬ í˜ì´ì§€ (/analysis/skin/diary) | #5     | ì¤‘     | 1ì¼       |
| 7        | CorrelationAnalysis AI ë¡œì§            | #4,#5  | ìƒ     | 1.5ì¼     |
| 8        | CorrelationAnalysis ì‹œê°í™”             | #7     | ì¤‘     | 1ì¼       |
| 9        | ê²°ê³¼ í˜ì´ì§€ í†µí•©                       | ì „ì²´   | ì¤‘     | 1ì¼       |
| 10       | í…ŒìŠ¤íŠ¸ ì‘ì„±                            | ì „ì²´   | ì¤‘     | 1.5ì¼     |
| **ì´ê³„** |                                        |        |        | **11ì¼**  |

## 5. ì „ì²´ ë³µì¡ë„ ë¶„ì„

### 5.1 Phaseë³„ ë³µì¡ë„

| Phase   | í•­ëª© | ì ìˆ˜      | ì „ëµ          |
| ------- | ---- | --------- | ------------- |
| Phase 1 | 43ì  | ì§ì ‘ êµ¬í˜„ | âœ… ì™„ë£Œ       |
| Phase 2 | 68ì  | standard  | ì‹œì§€í‘¸ìŠ¤ ê¶Œì¥ |
| Phase 3 | 85ì  | full      | ì‹œì§€í‘¸ìŠ¤ í•„ìˆ˜ |

### 5.2 Phase 2 ë³µì¡ë„ ìƒì„¸

| í•­ëª©            | ì ìˆ˜     | ê·¼ê±°                           |
| --------------- | -------- | ------------------------------ |
| íŒŒì¼ ìˆ˜         | 18ì      | 9ê°œ ì‹ ê·œ/ìˆ˜ì •                  |
| DB ë³€ê²½         | 15ì      | analysis_images í…Œì´ë¸” + RLS   |
| ì™¸ë¶€ API        | 10ì      | Supabase Storage ì—°ë™          |
| ì»´í¬ë„ŒíŠ¸ ë³µì¡ë„ | 15ì      | PhotoOverlayMap (SVG + ì´ë¯¸ì§€) |
| í…ŒìŠ¤íŠ¸          | 10ì      | ìƒˆ ì»´í¬ë„ŒíŠ¸ + í†µí•© í…ŒìŠ¤íŠ¸      |
| **ì´ì **        | **68ì ** |                                |

### 5.3 Phase 3 ë³µì¡ë„ ìƒì„¸

| í•­ëª©            | ì ìˆ˜     | ê·¼ê±°                               |
| --------------- | -------- | ---------------------------------- |
| íŒŒì¼ ìˆ˜         | 22ì      | 11ê°œ ì‹ ê·œ/ìˆ˜ì •                     |
| DB ë³€ê²½         | 18ì      | skin_diary_entries + ë³µì¡í•œ ìŠ¤í‚¤ë§ˆ |
| ì™¸ë¶€ API        | 20ì      | Gemini 12ì¡´ í”„ë¡¬í”„íŠ¸ ëŒ€í­ í™•ì¥     |
| ì»´í¬ë„ŒíŠ¸ ë³µì¡ë„ | 15ì      | 12ì¡´ SVG + ë‹¤ì´ì–´ë¦¬ í¼             |
| í…ŒìŠ¤íŠ¸          | 10ì      | ë³µì¡í•œ ìƒê´€ê´€ê³„ ë¡œì§ í…ŒìŠ¤íŠ¸        |
| **ì´ì **        | **85ì ** |                                    |

## 6. ì‹œì§€í‘¸ìŠ¤ ì „ëµ

### 6.1 ê¶Œì¥ ì „ëµ

| Phase   | ë³µì¡ë„ | ì „ëµ     | ì—ì´ì „íŠ¸ ì¡°í•©                              |
| ------- | ------ | -------- | ------------------------------------------ |
| Phase 2 | 68ì    | standard | spec-reviewer â†’ code-quality â†’ test-writer |
| Phase 3 | 85ì    | full     | ì „ì²´ íŒŒì´í”„ë¼ì¸ (Opus 4.5)                 |

### 6.2 Phase 2 ì—ì´ì „íŠ¸ í™œìš©

```
1. yiroom-spec-reviewer: Phase 2 ìŠ¤í™ ê²€í† 
2. ì§ì ‘ êµ¬í˜„ (ìˆœì°¨)
3. yiroom-code-quality: ì½”ë“œ í’ˆì§ˆ ê²€ì‚¬
4. yiroom-test-writer: í…ŒìŠ¤íŠ¸ ì‘ì„±
```

### 6.3 Phase 3 ì—ì´ì „íŠ¸ í™œìš©

```
1. sisyphus-adaptive: ë³µì¡ë„ ì¬ë¶„ì„
2. yiroom-spec-reviewer: Phase 3 ìŠ¤í™ ê²€í† 
3. yiroom-ui-validator: 12ì¡´ UI ê²€ì¦
4. ë³‘ë ¬ êµ¬í˜„ (ì¡´ ì»´í¬ë„ŒíŠ¸ / ë‹¤ì´ì–´ë¦¬ / AI ë¡œì§)
5. yiroom-code-quality: ì „ì²´ í’ˆì§ˆ ê²€ì‚¬
6. yiroom-test-writer: í…ŒìŠ¤íŠ¸ ì‘ì„±
```

## 5. íŒŒì¼ êµ¬ì¡°

```
components/analysis/
â”œâ”€â”€ common/
â”‚   â””â”€â”€ FixedBottomActions.tsx     # NEW: ê³ ì • í•˜ë‹¨ ë²„íŠ¼
â”œâ”€â”€ skin/
â”‚   â””â”€â”€ PhotoReuseSelector.tsx     # NEW: ì‚¬ì§„ ì¬ì‚¬ìš© ì„ íƒ
â”œâ”€â”€ visual-report/
â”‚   â”œâ”€â”€ FaceZoneMap.tsx            # NEW: ì–¼êµ´ ì¡´ ë§µ
â”‚   â”œâ”€â”€ ZoneDetailCard.tsx         # NEW: ì¡´ ìƒì„¸ ì¹´ë“œ
â”‚   â”œâ”€â”€ SkinVitalityScore.tsx      # NEW: í”¼ë¶€ í™œë ¥ë„
â”‚   â””â”€â”€ index.ts                   # UPDATE: export ì¶”ê°€
â””â”€â”€ consent/
    â””â”€â”€ (ê¸°ì¡´ ì»´í¬ë„ŒíŠ¸ ìœ ì§€)

app/(main)/analysis/
â”œâ”€â”€ skin/
â”‚   â”œâ”€â”€ page.tsx                   # UPDATE: ì‚¬ì§„ ì¬ì‚¬ìš© UI ì¶”ê°€
â”‚   â””â”€â”€ result/[id]/
â”‚       â””â”€â”€ page.tsx               # UPDATE: ê³ ì • ë²„íŠ¼ + ì¡´ ë§µ
â”œâ”€â”€ personal-color/
â”‚   â””â”€â”€ result/[id]/
â”‚       â””â”€â”€ page.tsx               # UPDATE: ê³ ì • ë²„íŠ¼ ì¶”ê°€
â”œâ”€â”€ body/
â”‚   â””â”€â”€ result/[id]/
â”‚       â””â”€â”€ page.tsx               # UPDATE: ê³ ì • ë²„íŠ¼ ì¶”ê°€
â””â”€â”€ hair/
    â””â”€â”€ result/[id]/
        â””â”€â”€ page.tsx               # UPDATE: ê³ ì • ë²„íŠ¼ ì¶”ê°€

lib/
â”œâ”€â”€ analysis/
â”‚   â””â”€â”€ photo-reuse.ts             # NEW: ì‚¬ì§„ ì¬ì‚¬ìš© ë¡œì§
â”œâ”€â”€ gemini.ts                      # UPDATE: í™œë ¥ë„ í”„ë¡¬í”„íŠ¸ ì¶”ê°€
â””â”€â”€ mock/
    â””â”€â”€ skin-analysis.ts           # UPDATE: Hybrid ë°ì´í„° í™•ì¥
```

## 6. êµ¬í˜„ ìˆœì„œ (Phase 1) - ìˆ˜ì •ë¨

> ì‚¬ì§„ ì¬ì‚¬ìš© ê¸°ëŠ¥(#8~#10)ì€ Phase 2ë¡œ ì´ë™ë¨

| ìˆœì„œ     | ì‘ì—…                             | ì˜ì¡´ì„±           | ë‚œì´ë„ | ì˜ˆìƒ ì‹œê°„ |
| -------- | -------------------------------- | ---------------- | ------ | --------- |
| 1        | FixedBottomActions ì»´í¬ë„ŒíŠ¸ ìƒì„± | ì—†ìŒ             | í•˜     | 0.5ì¼     |
| 2        | 4ê°œ ê²°ê³¼ í˜ì´ì§€ì— ê³ ì • ë²„íŠ¼ ì ìš© | #1               | í•˜     | 0.5ì¼     |
| 3        | í”¼ë¶€ ë¶„ì„ ê²°ê³¼ì— ì¡´ ë§µ í†µí•© í™•ì¸ | ì—†ìŒ (ì´ë¯¸ êµ¬í˜„) | í•˜     | 0.5ì¼     |
| 4        | ê¸°ì¡´ ë¶„ì„ ê²°ê³¼ ë°°ë„ˆ ì¶”ê°€         | ì—†ìŒ             | ì¤‘     | 0.5ì¼     |
| 5        | Gemini í”„ë¡¬í”„íŠ¸ í™•ì¥ (í™œë ¥ë„)    | ì—†ìŒ             | ì¤‘     | 0.5ì¼     |
| 6        | Mock ë°ì´í„° í™•ì¥ (Hybrid íŒ¨í„´)   | ì—†ìŒ             | í•˜     | 0.5ì¼     |
| 7        | í…ŒìŠ¤íŠ¸ ì‘ì„± ë° ê²€ì¦              | ì „ì²´             | ì¤‘     | 1ì¼       |
| 8        | ì „ì²´ í”Œë¡œìš° í…ŒìŠ¤íŠ¸               | ì „ì²´             | ì¤‘     | 0.5ì¼     |
| **ì´ê³„** |                                  |                  |        | **4.5ì¼** |

## 7. ë³µì¡ë„ ë¶„ì„

### 7.1 ì ìˆ˜ ì‚°ì • (ê²€í†  í›„ ìˆ˜ì •)

| í•­ëª©            | ì ìˆ˜     | ê·¼ê±°                              |
| --------------- | -------- | --------------------------------- |
| íŒŒì¼ ìˆ˜         | 14ì      | 6ê°œ ì‹ ê·œ (3ê°œ ì»´í¬ë„ŒíŠ¸ ì´ë¯¸ êµ¬í˜„) |
| DB ë³€ê²½         | 10ì      | skin_vitality_score ì»¬ëŸ¼ ì¶”ê°€     |
| ì™¸ë¶€ API        | 15ì      | Gemini í”„ë¡¬í”„íŠ¸ ë³€ê²½              |
| ì»´í¬ë„ŒíŠ¸ ë³µì¡ë„ | 5ì       | ê¸°ì¡´ SVG ì»´í¬ë„ŒíŠ¸ í™œìš©            |
| í…ŒìŠ¤íŠ¸          | 10ì      | ê¸°ì¡´ í…ŒìŠ¤íŠ¸ í™•ì¥                  |
| **ì´ì **        | **54ì ** | **ì¤‘í•˜ ë‚œì´ë„**                   |

### 7.2 ì „ëµ ê²°ì •

| ë³µì¡ë„   | ì „ëµ     | ì ìš©                                      |
| -------- | -------- | ----------------------------------------- |
| 0-30ì    | direct   | -                                         |
| 31-100ì  | standard | âœ… ì§ì ‘ êµ¬í˜„ ê°€ëŠ¥ (ê¸°ì¡´ êµ¬í˜„ í™œìš©ë„ ë†’ìŒ) |

> **ì‹œì§€í‘¸ìŠ¤ ë¶ˆí•„ìš” ê·¼ê±°**: í•µì‹¬ ì»´í¬ë„ŒíŠ¸(FaceZoneMap, ZoneDetailCard, SkinVitalityScore)ê°€ ì´ë¯¸ êµ¬í˜„ë˜ì–´ ìˆì–´ í†µí•© ì‘ì—…ë§Œ í•„ìš”.

## 8. í…ŒìŠ¤íŠ¸ ê³„íš

### 8.1 ë‹¨ìœ„ í…ŒìŠ¤íŠ¸

```typescript
describe('FixedBottomActions', () => {
  it('renders retry and share buttons', () => {});
  it('calls onRetry when clicked', () => {});
  it('hides share button when showShare=false', () => {});
});

describe('FaceZoneMap', () => {
  it('renders all 6 zones', () => {});
  it('applies correct color for each status', () => {});
  it('calls onZoneClick with correct zoneId', () => {});
  it('highlights worst zone when enabled', () => {});
});

describe('PhotoReuseSelector', () => {
  it('shows reuse option when eligible', () => {});
  it('hides reuse option when not eligible', () => {});
  it('displays thumbnail and date correctly', () => {});
});
```

### 8.2 í†µí•© í…ŒìŠ¤íŠ¸

- [ ] í”¼ë¶€ ë¶„ì„ ì „ì²´ í”Œë¡œìš° (ì´¬ì˜ â†’ ë™ì˜ â†’ ë¶„ì„ â†’ ê²°ê³¼)
- [ ] ì¡´ í´ë¦­ â†’ ìƒì„¸ ì¹´ë“œ í‘œì‹œ í”Œë¡œìš°
- [ ] ë‹¤ì‹œ ë¶„ì„í•˜ê¸° ë²„íŠ¼ â†’ forceNew ë¦¬ë””ë ‰íŠ¸
- [ ] ê¸°ì¡´ ë¶„ì„ ê²°ê³¼ ë°°ë„ˆ â†’ ê²°ê³¼ ë³´ê¸° / ìƒˆë¡œ ë¶„ì„í•˜ê¸°

> **Phase 2ì—ì„œ ì¶”ê°€**: ì‚¬ì§„ ì¬ì‚¬ìš© í”Œë¡œìš° í…ŒìŠ¤íŠ¸

## 9. ë¦¬ìŠ¤í¬ ë° ì™„í™”

| ë¦¬ìŠ¤í¬                  | í™•ë¥  | ì˜í–¥ | ì™„í™”                   |
| ----------------------- | ---- | ---- | ---------------------- |
| SVG í„°ì¹˜ ì˜ì—­ ë„ˆë¬´ ì‘ìŒ | ì¤‘   | ì¤‘   | ìµœì†Œ 44px ë³´ì¥, í…ŒìŠ¤íŠ¸ |
| ì‚¬ì§„ ì¬ì‚¬ìš© ë™ì˜ í˜¼ë€   | ì¤‘   | ì¤‘   | ëª…í™•í•œ UI ë¬¸êµ¬         |
| Gemini ì‘ë‹µ ë¶ˆì¼ì¹˜      | ë‚®   | ì¤‘   | Mock fallback          |
| ì„±ëŠ¥ (SVG ë Œë”ë§)       | ë‚®   | ë‚®   | ê°„ì†Œí™”ëœ ê²½ë¡œ          |

## 10. ì ‘ê·¼ì„± (a11y)

- SVGì— `role="img"` ë° `aria-label` ì¶”ê°€
- ì¡´ í´ë¦­ ì‹œ í‚¤ë³´ë“œ ì ‘ê·¼ ê°€ëŠ¥ (`tabIndex`, `onKeyDown`)
- ìƒ‰ìƒë§Œìœ¼ë¡œ ì •ë³´ ì „ë‹¬í•˜ì§€ ì•ŠìŒ (ë¼ë²¨ ë³‘í–‰)
- ZoneDetailCard í¬ì»¤ìŠ¤ íŠ¸ë©

---

## 11. P3 ì›ì ë¶„í•´ (Atomic Decomposition)

> **P3 ì›ì¹™**: ëª¨ë“  ì›ìëŠ” 2ì‹œê°„ ì´ë‚´, ë…ë¦½ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥, ëª…í™•í•œ ì…ì¶œë ¥
> **Phase 1 ì™„ë£Œ**: Phase 2-3 ì›ì ë¶„í•´ í¬í•¨

### 11.1 ì˜ì¡´ì„± ê·¸ë˜í”„

```mermaid
graph TD
    subgraph Phase2["Phase 2: ì‚¬ì§„ ì¬ì‚¬ìš© ì‹œìŠ¤í…œ"]
        ATOM-P2-1[ATOM-P2-1: analysis_images í…Œì´ë¸”]
        ATOM-P2-2[ATOM-P2-2: ì‚¬ì§„ ì¬ì‚¬ìš© íƒ€ì…]
        ATOM-P2-3[ATOM-P2-3: photo-reuse ìœ í‹¸ë¦¬í‹°]
        ATOM-P2-4[ATOM-P2-4: PhotoReuseSelector]
        ATOM-P2-5[ATOM-P2-5: PhotoOverlayMap]
        ATOM-P2-6[ATOM-P2-6: TrendChart]
        ATOM-P2-7[ATOM-P2-7: BeforeAfterSlider í†µí•©]
        ATOM-P2-8[ATOM-P2-8: ë¶„ì„ í˜ì´ì§€ ì¬ì‚¬ìš© UI]
        ATOM-P2-9[ATOM-P2-9: ê²°ê³¼ í˜ì´ì§€ ì‹œê°í™” í†µí•©]
        ATOM-P2-10[ATOM-P2-10: Phase 2 í…ŒìŠ¤íŠ¸]
    end

    subgraph Phase3["Phase 3: ì„¸ë¶€ ì¡´ + ë‹¤ì´ì–´ë¦¬"]
        ATOM-P3-1[ATOM-P3-1: 12ì¡´ íƒ€ì… ì •ì˜]
        ATOM-P3-2[ATOM-P3-2: DetailedFaceZoneMap]
        ATOM-P3-3[ATOM-P3-3: 12ì¡´ Gemini í”„ë¡¬í”„íŠ¸]
        ATOM-P3-4[ATOM-P3-4: skin_diary_entries í…Œì´ë¸”]
        ATOM-P3-5[ATOM-P3-5: SkinDiaryEntry]
        ATOM-P3-6[ATOM-P3-6: ë‹¤ì´ì–´ë¦¬ í˜ì´ì§€]
        ATOM-P3-7[ATOM-P3-7: CorrelationAnalysis AI]
        ATOM-P3-8[ATOM-P3-8: CorrelationAnalysis ì‹œê°í™”]
        ATOM-P3-9[ATOM-P3-9: Phase 3 ê²°ê³¼ í˜ì´ì§€ í†µí•©]
        ATOM-P3-10[ATOM-P3-10: Phase 3 í…ŒìŠ¤íŠ¸]
    end

    ATOM-P2-1 --> ATOM-P2-2
    ATOM-P2-2 --> ATOM-P2-3
    ATOM-P2-2 --> ATOM-P2-4
    ATOM-P2-2 --> ATOM-P2-5
    ATOM-P2-2 --> ATOM-P2-6
    ATOM-P2-3 --> ATOM-P2-8
    ATOM-P2-4 --> ATOM-P2-8
    ATOM-P2-5 --> ATOM-P2-9
    ATOM-P2-6 --> ATOM-P2-9
    ATOM-P2-7 --> ATOM-P2-9
    ATOM-P2-8 --> ATOM-P2-10
    ATOM-P2-9 --> ATOM-P2-10

    ATOM-P3-1 --> ATOM-P3-2
    ATOM-P3-1 --> ATOM-P3-3
    ATOM-P3-2 --> ATOM-P3-9
    ATOM-P3-3 --> ATOM-P3-9
    ATOM-P3-4 --> ATOM-P3-5
    ATOM-P3-5 --> ATOM-P3-6
    ATOM-P3-4 --> ATOM-P3-7
    ATOM-P3-7 --> ATOM-P3-8
    ATOM-P3-6 --> ATOM-P3-9
    ATOM-P3-8 --> ATOM-P3-9
    ATOM-P3-9 --> ATOM-P3-10
```

### 11.2 Phase 2 ì›ì ì •ì˜

---

#### ATOM-P2-1: analysis_images í…Œì´ë¸”

##### ë©”íƒ€ë°ì´í„°
- **ì˜ˆìƒ ì†Œìš”ì‹œê°„**: 1ì‹œê°„
- **ì˜ì¡´ì„±**: ì—†ìŒ
- **ë³‘ë ¬ ê°€ëŠ¥**: No

##### ì…ë ¥ ìŠ¤í™
| í•­ëª© | íƒ€ì… | í•„ìˆ˜ | ì„¤ëª… |
|------|------|------|------|
| migration_sql | SQL | Y | ë§ˆì´ê·¸ë ˆì´ì…˜ ìŠ¤í¬ë¦½íŠ¸ |

##### ì¶œë ¥ ìŠ¤í™
| í•­ëª© | íƒ€ì… | ì„¤ëª… |
|------|------|------|
| analysis_images | Table | ì´ë¯¸ì§€ ë©”íƒ€ë°ì´í„° í…Œì´ë¸” |

##### ì„±ê³µ ê¸°ì¤€
- [ ] `analysis_images` í…Œì´ë¸” ìƒì„±
- [ ] RLS ì •ì±… (SELECT/INSERT) ì ìš©
- [ ] ì¸ë±ìŠ¤ (user_type, created_at) ìƒì„±
- [ ] `npx supabase db push` ì„±ê³µ

##### íŒŒì¼ ë°°ì¹˜
| íŒŒì¼ ê²½ë¡œ | ë³€ê²½ ìœ í˜• | ì„¤ëª… |
|-----------|----------|------|
| `supabase/migrations/YYYYMMDD_photo_reuse_system.sql` | ì‹ ê·œ | ë§ˆì´ê·¸ë ˆì´ì…˜ |

---

#### ATOM-P2-2: ì‚¬ì§„ ì¬ì‚¬ìš© íƒ€ì…

##### ë©”íƒ€ë°ì´í„°
- **ì˜ˆìƒ ì†Œìš”ì‹œê°„**: 0.5ì‹œê°„
- **ì˜ì¡´ì„±**: ATOM-P2-1
- **ë³‘ë ¬ ê°€ëŠ¥**: No

##### ì…ë ¥ ìŠ¤í™
| í•­ëª© | íƒ€ì… | í•„ìˆ˜ | ì„¤ëª… |
|------|------|------|------|
| db_schema | SQL | Y | analysis_images ìŠ¤í‚¤ë§ˆ |

##### ì¶œë ¥ ìŠ¤í™
| í•­ëª© | íƒ€ì… | ì„¤ëª… |
|------|------|------|
| PhotoReuseEligibility | interface | ì¬ì‚¬ìš© ìê²© íƒ€ì… |
| REUSE_CONDITIONS | const | ì¬ì‚¬ìš© ì¡°ê±´ ìƒìˆ˜ |
| AnalysisImage | interface | DB ì´ë¯¸ì§€ íƒ€ì… |

##### ì„±ê³µ ê¸°ì¤€
- [ ] ëª¨ë“  ì¸í„°í˜ì´ìŠ¤ ì •ì˜
- [ ] Zod ìŠ¤í‚¤ë§ˆ ìƒì„±
- [ ] typecheck í†µê³¼

##### íŒŒì¼ ë°°ì¹˜
| íŒŒì¼ ê²½ë¡œ | ë³€ê²½ ìœ í˜• | ì„¤ëª… |
|-----------|----------|------|
| `apps/web/types/photo-reuse.ts` | ì‹ ê·œ | íƒ€ì… ì •ì˜ |

---

#### ATOM-P2-3: photo-reuse ìœ í‹¸ë¦¬í‹°

##### ë©”íƒ€ë°ì´í„°
- **ì˜ˆìƒ ì†Œìš”ì‹œê°„**: 1.5ì‹œê°„
- **ì˜ì¡´ì„±**: ATOM-P2-2
- **ë³‘ë ¬ ê°€ëŠ¥**: Yes

##### ì…ë ¥ ìŠ¤í™
| í•­ëª© | íƒ€ì… | í•„ìˆ˜ | ì„¤ëª… |
|------|------|------|------|
| supabase | SupabaseClient | Y | Supabase í´ë¼ì´ì–¸íŠ¸ |
| targetAnalysisType | 'skin' \| 'body' | Y | ë¶„ì„ ìœ í˜• |

##### ì¶œë ¥ ìŠ¤í™
| í•­ëª© | íƒ€ì… | ì„¤ëª… |
|------|------|------|
| PhotoReuseEligibility | object | ì¬ì‚¬ìš© ìê²© ê²°ê³¼ |

##### ì„±ê³µ ê¸°ì¤€
- [ ] checkPhotoReuseEligibility í•¨ìˆ˜ êµ¬í˜„
- [ ] 7ì¼ ì´ë‚´ ì¡°ê±´ ê²€ì¦
- [ ] í’ˆì§ˆ ì ìˆ˜ ì¡°ê±´ ê²€ì¦
- [ ] typecheck í†µê³¼
- [ ] lint í†µê³¼

##### íŒŒì¼ ë°°ì¹˜
| íŒŒì¼ ê²½ë¡œ | ë³€ê²½ ìœ í˜• | ì„¤ëª… |
|-----------|----------|------|
| `apps/web/lib/analysis/photo-reuse.ts` | ì‹ ê·œ | ì¬ì‚¬ìš© ìœ í‹¸ë¦¬í‹° |

---

#### ATOM-P2-4: PhotoReuseSelector ì»´í¬ë„ŒíŠ¸

##### ë©”íƒ€ë°ì´í„°
- **ì˜ˆìƒ ì†Œìš”ì‹œê°„**: 2ì‹œê°„
- **ì˜ì¡´ì„±**: ATOM-P2-2
- **ë³‘ë ¬ ê°€ëŠ¥**: Yes

##### ì…ë ¥ ìŠ¤í™
| í•­ëª© | íƒ€ì… | í•„ìˆ˜ | ì„¤ëª… |
|------|------|------|------|
| eligibility | PhotoReuseEligibility | Y | ì¬ì‚¬ìš© ìê²© |
| onSelectReuse | () => void | Y | ì¬ì‚¬ìš© ì„ íƒ ì½œë°± |
| onSelectNewCapture | () => void | Y | ìƒˆ ì´¬ì˜ ì½œë°± |

##### ì¶œë ¥ ìŠ¤í™
| í•­ëª© | íƒ€ì… | ì„¤ëª… |
|------|------|------|
| JSX.Element | React Component | ì¬ì‚¬ìš© ì„ íƒ UI |

##### ì„±ê³µ ê¸°ì¤€
- [ ] ì¬ì‚¬ìš© ê°€ëŠ¥ ì‹œ 2ì—´ ê·¸ë¦¬ë“œ í‘œì‹œ
- [ ] ì¸ë„¤ì¼ ì´ë¯¸ì§€ ë Œë”ë§
- [ ] ì´¬ì˜ì¼ í‘œì‹œ
- [ ] ì¶”ì²œ ë°°ì§€ í‘œì‹œ
- [ ] typecheck í†µê³¼
- [ ] lint í†µê³¼

##### íŒŒì¼ ë°°ì¹˜
| íŒŒì¼ ê²½ë¡œ | ë³€ê²½ ìœ í˜• | ì„¤ëª… |
|-----------|----------|------|
| `apps/web/components/analysis/skin/PhotoReuseSelector.tsx` | ì‹ ê·œ | ì¬ì‚¬ìš© ì„ íƒ ì»´í¬ë„ŒíŠ¸ |

---

#### ATOM-P2-5: PhotoOverlayMap ì»´í¬ë„ŒíŠ¸

##### ë©”íƒ€ë°ì´í„°
- **ì˜ˆìƒ ì†Œìš”ì‹œê°„**: 2ì‹œê°„
- **ì˜ì¡´ì„±**: ATOM-P2-2
- **ë³‘ë ¬ ê°€ëŠ¥**: Yes

##### ì…ë ¥ ìŠ¤í™
| í•­ëª© | íƒ€ì… | í•„ìˆ˜ | ì„¤ëª… |
|------|------|------|------|
| imageUrl | string | Y | ë°°ê²½ ì´ë¯¸ì§€ URL |
| zones | Record<ZoneId, ZoneStatus> | Y | ì¡´ë³„ ìƒíƒœ |
| onZoneClick | (zoneId: ZoneId) => void | N | ì¡´ í´ë¦­ ì½œë°± |
| opacity | number | N | ì˜¤ë²„ë ˆì´ íˆ¬ëª…ë„ |

##### ì¶œë ¥ ìŠ¤í™
| í•­ëª© | íƒ€ì… | ì„¤ëª… |
|------|------|------|
| JSX.Element | React Component | ì‚¬ì§„ ìœ„ ì¡´ ì˜¤ë²„ë ˆì´ |

##### ì„±ê³µ ê¸°ì¤€
- [ ] ë°°ê²½ ì´ë¯¸ì§€ ë Œë”ë§
- [ ] SVG ì˜¤ë²„ë ˆì´ ì •ë ¬
- [ ] ì¡´ í´ë¦­ ì´ë²¤íŠ¸ ë™ì‘
- [ ] íˆ¬ëª…ë„ ì¡°ì ˆ ê¸°ëŠ¥
- [ ] typecheck í†µê³¼
- [ ] lint í†µê³¼

##### íŒŒì¼ ë°°ì¹˜
| íŒŒì¼ ê²½ë¡œ | ë³€ê²½ ìœ í˜• | ì„¤ëª… |
|-----------|----------|------|
| `apps/web/components/analysis/visual-report/PhotoOverlayMap.tsx` | ì‹ ê·œ | ì‚¬ì§„ ì˜¤ë²„ë ˆì´ |

---

#### ATOM-P2-6: TrendChart ì»´í¬ë„ŒíŠ¸

##### ë©”íƒ€ë°ì´í„°
- **ì˜ˆìƒ ì†Œìš”ì‹œê°„**: 1.5ì‹œê°„
- **ì˜ì¡´ì„±**: ATOM-P2-2
- **ë³‘ë ¬ ê°€ëŠ¥**: Yes

##### ì…ë ¥ ìŠ¤í™
| í•­ëª© | íƒ€ì… | í•„ìˆ˜ | ì„¤ëª… |
|------|------|------|------|
| data | Array<{date, score}> | Y | ì‹œê³„ì—´ ë°ì´í„° |
| metric | string | Y | ì§€í‘œ ìœ í˜• |
| height | number | N | ì°¨íŠ¸ ë†’ì´ |
| showGoal | boolean | N | ëª©í‘œì„  í‘œì‹œ |

##### ì¶œë ¥ ìŠ¤í™
| í•­ëª© | íƒ€ì… | ì„¤ëª… |
|------|------|------|
| JSX.Element | React Component | íŠ¸ë Œë“œ ë¼ì¸ ì°¨íŠ¸ |

##### ì„±ê³µ ê¸°ì¤€
- [ ] recharts LineChart ë Œë”ë§
- [ ] 6ê°œì›” ë°ì´í„° í‘œì‹œ
- [ ] ëª©í‘œì„  í‘œì‹œ (ì˜µì…˜)
- [ ] typecheck í†µê³¼
- [ ] lint í†µê³¼

##### íŒŒì¼ ë°°ì¹˜
| íŒŒì¼ ê²½ë¡œ | ë³€ê²½ ìœ í˜• | ì„¤ëª… |
|-----------|----------|------|
| `apps/web/components/analysis/visual-report/TrendChart.tsx` | ì‹ ê·œ | íŠ¸ë Œë“œ ì°¨íŠ¸ |

---

#### ATOM-P2-7: BeforeAfterSlider í†µí•©

##### ë©”íƒ€ë°ì´í„°
- **ì˜ˆìƒ ì†Œìš”ì‹œê°„**: 1ì‹œê°„
- **ì˜ì¡´ì„±**: ì—†ìŒ (ì»´í¬ë„ŒíŠ¸ ì´ë¯¸ ì¡´ì¬)
- **ë³‘ë ¬ ê°€ëŠ¥**: Yes

##### ì…ë ¥ ìŠ¤í™
| í•­ëª© | íƒ€ì… | í•„ìˆ˜ | ì„¤ëª… |
|------|------|------|------|
| analysisId | string | Y | í˜„ì¬ ë¶„ì„ ID |

##### ì¶œë ¥ ìŠ¤í™
| í•­ëª© | íƒ€ì… | ì„¤ëª… |
|------|------|------|
| beforeImage | string | ì´ì „ ë¶„ì„ ì´ë¯¸ì§€ |
| afterImage | string | í˜„ì¬ ë¶„ì„ ì´ë¯¸ì§€ |

##### ì„±ê³µ ê¸°ì¤€
- [ ] ì´ì „ ë¶„ì„ ì´ë¯¸ì§€ ì¡°íšŒ ë¡œì§
- [ ] BeforeAfterSliderì— ë°ì´í„° ì „ë‹¬
- [ ] ì´ì „ ë¶„ì„ ì—†ì„ ì‹œ ìˆ¨ê¹€ ì²˜ë¦¬
- [ ] typecheck í†µê³¼

##### íŒŒì¼ ë°°ì¹˜
| íŒŒì¼ ê²½ë¡œ | ë³€ê²½ ìœ í˜• | ì„¤ëª… |
|-----------|----------|------|
| `apps/web/app/(main)/analysis/skin/result/[id]/page.tsx` | ìˆ˜ì • | ê²°ê³¼ í˜ì´ì§€ í†µí•© |

---

#### ATOM-P2-8: ë¶„ì„ í˜ì´ì§€ ì¬ì‚¬ìš© UI

##### ë©”íƒ€ë°ì´í„°
- **ì˜ˆìƒ ì†Œìš”ì‹œê°„**: 1.5ì‹œê°„
- **ì˜ì¡´ì„±**: ATOM-P2-3, ATOM-P2-4
- **ë³‘ë ¬ ê°€ëŠ¥**: No

##### ì…ë ¥ ìŠ¤í™
| í•­ëª© | íƒ€ì… | í•„ìˆ˜ | ì„¤ëª… |
|------|------|------|------|
| userId | string | Y | Clerk User ID |

##### ì¶œë ¥ ìŠ¤í™
| í•­ëª© | íƒ€ì… | ì„¤ëª… |
|------|------|------|
| AnalysisPage | React Component | ì¬ì‚¬ìš© UI í¬í•¨ í˜ì´ì§€ |

##### ì„±ê³µ ê¸°ì¤€
- [ ] í˜ì´ì§€ ì§„ì… ì‹œ ì¬ì‚¬ìš© ìê²© í™•ì¸
- [ ] PhotoReuseSelector ë Œë”ë§
- [ ] ì¬ì‚¬ìš© ì„ íƒ ì‹œ ë¶„ì„ ì§„í–‰
- [ ] ìƒˆ ì´¬ì˜ ì„ íƒ ì‹œ ì¹´ë©”ë¼ ì§„ì…
- [ ] typecheck í†µê³¼

##### íŒŒì¼ ë°°ì¹˜
| íŒŒì¼ ê²½ë¡œ | ë³€ê²½ ìœ í˜• | ì„¤ëª… |
|-----------|----------|------|
| `apps/web/app/(main)/analysis/skin/page.tsx` | ìˆ˜ì • | ì¬ì‚¬ìš© UI ì¶”ê°€ |

---

#### ATOM-P2-9: ê²°ê³¼ í˜ì´ì§€ ì‹œê°í™” í†µí•©

##### ë©”íƒ€ë°ì´í„°
- **ì˜ˆìƒ ì†Œìš”ì‹œê°„**: 1.5ì‹œê°„
- **ì˜ì¡´ì„±**: ATOM-P2-5, ATOM-P2-6, ATOM-P2-7
- **ë³‘ë ¬ ê°€ëŠ¥**: No

##### ì…ë ¥ ìŠ¤í™
| í•­ëª© | íƒ€ì… | í•„ìˆ˜ | ì„¤ëª… |
|------|------|------|------|
| analysisId | string | Y | ë¶„ì„ ID |

##### ì¶œë ¥ ìŠ¤í™
| í•­ëª© | íƒ€ì… | ì„¤ëª… |
|------|------|------|
| ResultPage | React Component | ì‹œê°í™” í†µí•© ê²°ê³¼ í˜ì´ì§€ |

##### ì„±ê³µ ê¸°ì¤€
- [ ] PhotoOverlayMap ì¡°ê±´ë¶€ ë Œë”ë§
- [ ] TrendChart ë Œë”ë§
- [ ] BeforeAfterSlider ë Œë”ë§
- [ ] ë™ì˜ ìƒíƒœë³„ ë¶„ê¸°
- [ ] typecheck í†µê³¼

##### íŒŒì¼ ë°°ì¹˜
| íŒŒì¼ ê²½ë¡œ | ë³€ê²½ ìœ í˜• | ì„¤ëª… |
|-----------|----------|------|
| `apps/web/app/(main)/analysis/skin/result/[id]/page.tsx` | ìˆ˜ì • | ì‹œê°í™” í†µí•© |

---

#### ATOM-P2-10: Phase 2 í…ŒìŠ¤íŠ¸

##### ë©”íƒ€ë°ì´í„°
- **ì˜ˆìƒ ì†Œìš”ì‹œê°„**: 2ì‹œê°„
- **ì˜ì¡´ì„±**: ATOM-P2-8, ATOM-P2-9
- **ë³‘ë ¬ ê°€ëŠ¥**: No

##### ì…ë ¥ ìŠ¤í™
| í•­ëª© | íƒ€ì… | í•„ìˆ˜ | ì„¤ëª… |
|------|------|------|------|
| components | React Component[] | Y | í…ŒìŠ¤íŠ¸ ëŒ€ìƒ |

##### ì¶œë ¥ ìŠ¤í™
| í•­ëª© | íƒ€ì… | ì„¤ëª… |
|------|------|------|
| testFiles | .test.tsx[] | í…ŒìŠ¤íŠ¸ íŒŒì¼ë“¤ |

##### ì„±ê³µ ê¸°ì¤€
- [ ] photo-reuse.ts ìœ í‹¸ë¦¬í‹° í…ŒìŠ¤íŠ¸
- [ ] PhotoReuseSelector í…ŒìŠ¤íŠ¸
- [ ] PhotoOverlayMap í…ŒìŠ¤íŠ¸
- [ ] TrendChart í…ŒìŠ¤íŠ¸
- [ ] í†µí•© í”Œë¡œìš° í…ŒìŠ¤íŠ¸
- [ ] `npm run test` í†µê³¼

##### íŒŒì¼ ë°°ì¹˜
| íŒŒì¼ ê²½ë¡œ | ë³€ê²½ ìœ í˜• | ì„¤ëª… |
|-----------|----------|------|
| `apps/web/tests/lib/analysis/photo-reuse.test.ts` | ì‹ ê·œ | ìœ í‹¸ë¦¬í‹° í…ŒìŠ¤íŠ¸ |
| `apps/web/tests/components/analysis/skin/PhotoReuseSelector.test.tsx` | ì‹ ê·œ | ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸ |
| `apps/web/tests/components/analysis/visual-report/PhotoOverlayMap.test.tsx` | ì‹ ê·œ | ì˜¤ë²„ë ˆì´ í…ŒìŠ¤íŠ¸ |
| `apps/web/tests/components/analysis/visual-report/TrendChart.test.tsx` | ì‹ ê·œ | ì°¨íŠ¸ í…ŒìŠ¤íŠ¸ |

---

### 11.3 Phase 3 ì›ì ì •ì˜

---

#### ATOM-P3-1: 12ì¡´ íƒ€ì… ì •ì˜

##### ë©”íƒ€ë°ì´í„°
- **ì˜ˆìƒ ì†Œìš”ì‹œê°„**: 1ì‹œê°„
- **ì˜ì¡´ì„±**: ì—†ìŒ
- **ë³‘ë ¬ ê°€ëŠ¥**: No

##### ì…ë ¥ ìŠ¤í™
| í•­ëª© | íƒ€ì… | í•„ìˆ˜ | ì„¤ëª… |
|------|------|------|------|
| zoneDefinitions | markdown | Y | 12ì¡´ ì •ì˜ |

##### ì¶œë ¥ ìŠ¤í™
| í•­ëª© | íƒ€ì… | ì„¤ëª… |
|------|------|------|
| DetailedZoneId | type | 12ê°œ ì¡´ ID |
| DetailedZoneStatus | interface | ì„¸ë¶€ ì¡´ ìƒíƒœ |
| ZONE_MAPPING | const | 6ì¡´ â†’ 12ì¡´ ë§¤í•‘ |

##### ì„±ê³µ ê¸°ì¤€
- [ ] 12ê°œ DetailedZoneId ì •ì˜
- [ ] 6ì¡´ â†’ 12ì¡´ ë§¤í•‘ ìƒìˆ˜
- [ ] DetailedZoneStatus ì¸í„°í˜ì´ìŠ¤
- [ ] typecheck í†µê³¼

##### íŒŒì¼ ë°°ì¹˜
| íŒŒì¼ ê²½ë¡œ | ë³€ê²½ ìœ í˜• | ì„¤ëª… |
|-----------|----------|------|
| `apps/web/types/skin-zones.ts` | ì‹ ê·œ | 12ì¡´ íƒ€ì… |

---

#### ATOM-P3-2: DetailedFaceZoneMap ì»´í¬ë„ŒíŠ¸

##### ë©”íƒ€ë°ì´í„°
- **ì˜ˆìƒ ì†Œìš”ì‹œê°„**: 2ì‹œê°„
- **ì˜ì¡´ì„±**: ATOM-P3-1
- **ë³‘ë ¬ ê°€ëŠ¥**: Yes

##### ì…ë ¥ ìŠ¤í™
| í•­ëª© | íƒ€ì… | í•„ìˆ˜ | ì„¤ëª… |
|------|------|------|------|
| zones | Record<DetailedZoneId, DetailedZoneStatus> | Y | 12ì¡´ ìƒíƒœ |
| viewMode | 'simple' \| 'detailed' | N | 6ì¡´/12ì¡´ í† ê¸€ |
| onZoneClick | (zoneId: DetailedZoneId) => void | N | í´ë¦­ ì½œë°± |

##### ì¶œë ¥ ìŠ¤í™
| í•­ëª© | íƒ€ì… | ì„¤ëª… |
|------|------|------|
| JSX.Element | SVG Component | 12ì¡´ ì–¼êµ´ ë§µ |

##### ì„±ê³µ ê¸°ì¤€
- [ ] 12ê°œ ì¡´ ì˜ì—­ SVG ë Œë”ë§
- [ ] 6ì¡´/12ì¡´ í† ê¸€ ê¸°ëŠ¥
- [ ] ìƒíƒœë³„ ìƒ‰ìƒ ì ìš© (5ë‹¨ê³„)
- [ ] ì¡´ í´ë¦­ ì´ë²¤íŠ¸
- [ ] a11y ì ìš©
- [ ] typecheck í†µê³¼

##### íŒŒì¼ ë°°ì¹˜
| íŒŒì¼ ê²½ë¡œ | ë³€ê²½ ìœ í˜• | ì„¤ëª… |
|-----------|----------|------|
| `apps/web/components/analysis/visual-report/DetailedFaceZoneMap.tsx` | ì‹ ê·œ | 12ì¡´ ë§µ |

---

#### ATOM-P3-3: 12ì¡´ Gemini í”„ë¡¬í”„íŠ¸

##### ë©”íƒ€ë°ì´í„°
- **ì˜ˆìƒ ì†Œìš”ì‹œê°„**: 1.5ì‹œê°„
- **ì˜ì¡´ì„±**: ATOM-P3-1
- **ë³‘ë ¬ ê°€ëŠ¥**: Yes

##### ì…ë ¥ ìŠ¤í™
| í•­ëª© | íƒ€ì… | í•„ìˆ˜ | ì„¤ëª… |
|------|------|------|------|
| existingPrompt | string | Y | ê¸°ì¡´ í”„ë¡¬í”„íŠ¸ |

##### ì¶œë ¥ ìŠ¤í™
| í•­ëª© | íƒ€ì… | ì„¤ëª… |
|------|------|------|
| detailedZonePrompt | string | 12ì¡´ ë¶„ì„ í”„ë¡¬í”„íŠ¸ |

##### ì„±ê³µ ê¸°ì¤€
- [ ] 12ì¡´ ê°ê°ì— ëŒ€í•œ ë¶„ì„ ì§€ì‹œ
- [ ] detailedZones JSON ìŠ¤í‚¤ë§ˆ ì •ì˜
- [ ] ê¸°ì¡´ ì‘ë‹µ í˜¸í™˜ì„± ìœ ì§€
- [ ] typecheck í†µê³¼

##### íŒŒì¼ ë°°ì¹˜
| íŒŒì¼ ê²½ë¡œ | ë³€ê²½ ìœ í˜• | ì„¤ëª… |
|-----------|----------|------|
| `apps/web/lib/gemini.ts` | ìˆ˜ì • | í”„ë¡¬í”„íŠ¸ í™•ì¥ |

---

#### ATOM-P3-4: skin_diary_entries í…Œì´ë¸”

##### ë©”íƒ€ë°ì´í„°
- **ì˜ˆìƒ ì†Œìš”ì‹œê°„**: 1ì‹œê°„
- **ì˜ì¡´ì„±**: ì—†ìŒ
- **ë³‘ë ¬ ê°€ëŠ¥**: Yes

##### ì…ë ¥ ìŠ¤í™
| í•­ëª© | íƒ€ì… | í•„ìˆ˜ | ì„¤ëª… |
|------|------|------|------|
| migration_sql | SQL | Y | ë§ˆì´ê·¸ë ˆì´ì…˜ ìŠ¤í¬ë¦½íŠ¸ |

##### ì¶œë ¥ ìŠ¤í™
| í•­ëª© | íƒ€ì… | ì„¤ëª… |
|------|------|------|
| skin_diary_entries | Table | í”¼ë¶€ ë‹¤ì´ì–´ë¦¬ í…Œì´ë¸” |

##### ì„±ê³µ ê¸°ì¤€
- [ ] í…Œì´ë¸” ìƒì„± (ì»¨ë””ì…˜, ìƒí™œìš”ì¸, ìŠ¤í‚¨ì¼€ì–´)
- [ ] RLS ì •ì±… ì ìš©
- [ ] UNIQUE (user, date) ì œì•½
- [ ] ì¸ë±ìŠ¤ ìƒì„±
- [ ] `npx supabase db push` ì„±ê³µ

##### íŒŒì¼ ë°°ì¹˜
| íŒŒì¼ ê²½ë¡œ | ë³€ê²½ ìœ í˜• | ì„¤ëª… |
|-----------|----------|------|
| `supabase/migrations/YYYYMMDD_skin_diary.sql` | ì‹ ê·œ | ë‹¤ì´ì–´ë¦¬ ë§ˆì´ê·¸ë ˆì´ì…˜ |

---

#### ATOM-P3-5: SkinDiaryEntry ì»´í¬ë„ŒíŠ¸

##### ë©”íƒ€ë°ì´í„°
- **ì˜ˆìƒ ì†Œìš”ì‹œê°„**: 2ì‹œê°„
- **ì˜ì¡´ì„±**: ATOM-P3-4
- **ë³‘ë ¬ ê°€ëŠ¥**: Yes

##### ì…ë ¥ ìŠ¤í™
| í•­ëª© | íƒ€ì… | í•„ìˆ˜ | ì„¤ëª… |
|------|------|------|------|
| date | Date | Y | ê¸°ë¡ ë‚ ì§œ |
| existingEntry | DiaryEntry | N | ê¸°ì¡´ ê¸°ë¡ |
| onSave | (entry: DiaryEntry) => Promise<void> | Y | ì €ì¥ ì½œë°± |

##### ì¶œë ¥ ìŠ¤í™
| í•­ëª© | íƒ€ì… | ì„¤ëª… |
|------|------|------|
| JSX.Element | React Component | ë‹¤ì´ì–´ë¦¬ ì…ë ¥ í¼ |

##### ì„±ê³µ ê¸°ì¤€
- [ ] í”¼ë¶€ ì»¨ë””ì…˜ 1-5 ì…ë ¥
- [ ] ìƒí™œ ìš”ì¸ ì…ë ¥ (ìˆ˜ë©´, ìˆ˜ë¶„, ìŠ¤íŠ¸ë ˆìŠ¤)
- [ ] ìŠ¤í‚¨ì¼€ì–´ ë£¨í‹´ ì²´í¬ë°•ìŠ¤
- [ ] íŠ¹ë³„ ê´€ë¦¬ íƒœê·¸ ì…ë ¥
- [ ] ê¸°ì¡´ ë°ì´í„° ë¡œë“œ
- [ ] typecheck í†µê³¼

##### íŒŒì¼ ë°°ì¹˜
| íŒŒì¼ ê²½ë¡œ | ë³€ê²½ ìœ í˜• | ì„¤ëª… |
|-----------|----------|------|
| `apps/web/components/analysis/skin-diary/SkinDiaryEntry.tsx` | ì‹ ê·œ | ë‹¤ì´ì–´ë¦¬ ì…ë ¥ |

---

#### ATOM-P3-6: ë‹¤ì´ì–´ë¦¬ í˜ì´ì§€

##### ë©”íƒ€ë°ì´í„°
- **ì˜ˆìƒ ì†Œìš”ì‹œê°„**: 1.5ì‹œê°„
- **ì˜ì¡´ì„±**: ATOM-P3-5
- **ë³‘ë ¬ ê°€ëŠ¥**: No

##### ì…ë ¥ ìŠ¤í™
| í•­ëª© | íƒ€ì… | í•„ìˆ˜ | ì„¤ëª… |
|------|------|------|------|
| userId | string | Y | Clerk User ID |

##### ì¶œë ¥ ìŠ¤í™
| í•­ëª© | íƒ€ì… | ì„¤ëª… |
|------|------|------|
| DiaryPage | React Component | ë‹¤ì´ì–´ë¦¬ ë©”ì¸ í˜ì´ì§€ |

##### ì„±ê³µ ê¸°ì¤€
- [ ] ìº˜ë¦°ë” ë·° ë Œë”ë§
- [ ] ë‚ ì§œ ì„ íƒ ì‹œ SkinDiaryEntry í‘œì‹œ
- [ ] ê¸°ë¡ëœ ë‚ ì§œ í‘œì‹œ
- [ ] ì›”ë³„ ë„¤ë¹„ê²Œì´ì…˜
- [ ] typecheck í†µê³¼

##### íŒŒì¼ ë°°ì¹˜
| íŒŒì¼ ê²½ë¡œ | ë³€ê²½ ìœ í˜• | ì„¤ëª… |
|-----------|----------|------|
| `apps/web/app/(main)/analysis/skin/diary/page.tsx` | ì‹ ê·œ | ë‹¤ì´ì–´ë¦¬ í˜ì´ì§€ |

---

#### ATOM-P3-7: CorrelationAnalysis AI

##### ë©”íƒ€ë°ì´í„°
- **ì˜ˆìƒ ì†Œìš”ì‹œê°„**: 2ì‹œê°„
- **ì˜ì¡´ì„±**: ATOM-P3-4
- **ë³‘ë ¬ ê°€ëŠ¥**: Yes

##### ì…ë ¥ ìŠ¤í™
| í•­ëª© | íƒ€ì… | í•„ìˆ˜ | ì„¤ëª… |
|------|------|------|------|
| diaryData | DiaryEntry[] | Y | ë‹¤ì´ì–´ë¦¬ ë°ì´í„° |
| skinAnalyses | SkinAnalysis[] | Y | ë¶„ì„ ê²°ê³¼ë“¤ |
| period | '7days' \| '30days' \| '90days' | Y | ë¶„ì„ ê¸°ê°„ |

##### ì¶œë ¥ ìŠ¤í™
| í•­ëª© | íƒ€ì… | ì„¤ëª… |
|------|------|------|
| CorrelationInsight[] | array | ìƒê´€ê´€ê³„ ì¸ì‚¬ì´íŠ¸ |

##### ì„±ê³µ ê¸°ì¤€
- [ ] ìˆ˜ë©´-ì»¨ë””ì…˜ ìƒê´€ê´€ê³„ ë¶„ì„
- [ ] ìˆ˜ë¶„-ì»¨ë””ì…˜ ìƒê´€ê´€ê³„ ë¶„ì„
- [ ] ìŠ¤íŠ¸ë ˆìŠ¤-ì»¨ë””ì…˜ ìƒê´€ê´€ê³„ ë¶„ì„
- [ ] confidence ì ìˆ˜ ê³„ì‚°
- [ ] ì¸ì‚¬ì´íŠ¸ ë¬¸ì¥ ìƒì„±
- [ ] typecheck í†µê³¼

##### íŒŒì¼ ë°°ì¹˜
| íŒŒì¼ ê²½ë¡œ | ë³€ê²½ ìœ í˜• | ì„¤ëª… |
|-----------|----------|------|
| `apps/web/lib/analysis/correlation.ts` | ì‹ ê·œ | ìƒê´€ê´€ê³„ ë¶„ì„ |

---

#### ATOM-P3-8: CorrelationAnalysis ì‹œê°í™”

##### ë©”íƒ€ë°ì´í„°
- **ì˜ˆìƒ ì†Œìš”ì‹œê°„**: 1.5ì‹œê°„
- **ì˜ì¡´ì„±**: ATOM-P3-7
- **ë³‘ë ¬ ê°€ëŠ¥**: No

##### ì…ë ¥ ìŠ¤í™
| í•­ëª© | íƒ€ì… | í•„ìˆ˜ | ì„¤ëª… |
|------|------|------|------|
| insights | CorrelationInsight[] | Y | ìƒê´€ê´€ê³„ ì¸ì‚¬ì´íŠ¸ |

##### ì¶œë ¥ ìŠ¤í™
| í•­ëª© | íƒ€ì… | ì„¤ëª… |
|------|------|------|
| JSX.Element | React Component | ìƒê´€ê´€ê³„ ì‹œê°í™” |

##### ì„±ê³µ ê¸°ì¤€
- [ ] ìƒê´€ê´€ê³„ ë°” ì°¨íŠ¸ ë Œë”ë§
- [ ] ì¸ì‚¬ì´íŠ¸ ì¹´ë“œ í‘œì‹œ
- [ ] ê¶Œì¥ ì‚¬í•­ í‘œì‹œ
- [ ] confidence í‘œì‹œ
- [ ] typecheck í†µê³¼

##### íŒŒì¼ ë°°ì¹˜
| íŒŒì¼ ê²½ë¡œ | ë³€ê²½ ìœ í˜• | ì„¤ëª… |
|-----------|----------|------|
| `apps/web/components/analysis/skin-diary/CorrelationAnalysis.tsx` | ì‹ ê·œ | ìƒê´€ê´€ê³„ ì‹œê°í™” |

---

#### ATOM-P3-9: Phase 3 ê²°ê³¼ í˜ì´ì§€ í†µí•©

##### ë©”íƒ€ë°ì´í„°
- **ì˜ˆìƒ ì†Œìš”ì‹œê°„**: 1.5ì‹œê°„
- **ì˜ì¡´ì„±**: ATOM-P3-2, ATOM-P3-3, ATOM-P3-6, ATOM-P3-8
- **ë³‘ë ¬ ê°€ëŠ¥**: No

##### ì…ë ¥ ìŠ¤í™
| í•­ëª© | íƒ€ì… | í•„ìˆ˜ | ì„¤ëª… |
|------|------|------|------|
| analysisId | string | Y | ë¶„ì„ ID |

##### ì¶œë ¥ ìŠ¤í™
| í•­ëª© | íƒ€ì… | ì„¤ëª… |
|------|------|------|
| ResultPage | React Component | 12ì¡´ + ë‹¤ì´ì–´ë¦¬ í†µí•© |

##### ì„±ê³µ ê¸°ì¤€
- [ ] DetailedFaceZoneMap ë Œë”ë§
- [ ] 6ì¡´/12ì¡´ í† ê¸€
- [ ] ë‹¤ì´ì–´ë¦¬ ë§í¬/ìš”ì•½
- [ ] ìƒê´€ê´€ê³„ ì¸ì‚¬ì´íŠ¸ í‘œì‹œ
- [ ] typecheck í†µê³¼

##### íŒŒì¼ ë°°ì¹˜
| íŒŒì¼ ê²½ë¡œ | ë³€ê²½ ìœ í˜• | ì„¤ëª… |
|-----------|----------|------|
| `apps/web/app/(main)/analysis/skin/result/[id]/page.tsx` | ìˆ˜ì • | Phase 3 í†µí•© |

---

#### ATOM-P3-10: Phase 3 í…ŒìŠ¤íŠ¸

##### ë©”íƒ€ë°ì´í„°
- **ì˜ˆìƒ ì†Œìš”ì‹œê°„**: 2ì‹œê°„
- **ì˜ì¡´ì„±**: ATOM-P3-9
- **ë³‘ë ¬ ê°€ëŠ¥**: No

##### ì…ë ¥ ìŠ¤í™
| í•­ëª© | íƒ€ì… | í•„ìˆ˜ | ì„¤ëª… |
|------|------|------|------|
| components | React Component[] | Y | í…ŒìŠ¤íŠ¸ ëŒ€ìƒ |

##### ì¶œë ¥ ìŠ¤í™
| í•­ëª© | íƒ€ì… | ì„¤ëª… |
|------|------|------|
| testFiles | .test.tsx[] | í…ŒìŠ¤íŠ¸ íŒŒì¼ë“¤ |

##### ì„±ê³µ ê¸°ì¤€
- [ ] DetailedFaceZoneMap í…ŒìŠ¤íŠ¸
- [ ] SkinDiaryEntry í…ŒìŠ¤íŠ¸
- [ ] correlation.ts ìœ í‹¸ë¦¬í‹° í…ŒìŠ¤íŠ¸
- [ ] CorrelationAnalysis í…ŒìŠ¤íŠ¸
- [ ] í†µí•© í”Œë¡œìš° í…ŒìŠ¤íŠ¸
- [ ] `npm run test` í†µê³¼

##### íŒŒì¼ ë°°ì¹˜
| íŒŒì¼ ê²½ë¡œ | ë³€ê²½ ìœ í˜• | ì„¤ëª… |
|-----------|----------|------|
| `apps/web/tests/components/analysis/visual-report/DetailedFaceZoneMap.test.tsx` | ì‹ ê·œ | 12ì¡´ ë§µ í…ŒìŠ¤íŠ¸ |
| `apps/web/tests/components/analysis/skin-diary/SkinDiaryEntry.test.tsx` | ì‹ ê·œ | ë‹¤ì´ì–´ë¦¬ í…ŒìŠ¤íŠ¸ |
| `apps/web/tests/lib/analysis/correlation.test.ts` | ì‹ ê·œ | ìƒê´€ê´€ê³„ í…ŒìŠ¤íŠ¸ |

---

### 11.4 ì´ ì†Œìš”ì‹œê°„ ìš”ì•½

| Phase | ì›ì | ì†Œìš”ì‹œê°„ | ë³‘ë ¬ ê°€ëŠ¥ |
|-------|------|----------|----------|
| Phase 2 | ATOM-P2-1~10 | 14.5h | ë³‘ë ¬ ì‹œ ~8h |
| Phase 3 | ATOM-P3-1~10 | 16h | ë³‘ë ¬ ì‹œ ~9h |
| **ì´í•©** | **20ê°œ** | **30.5h** | **ë³‘ë ¬ ì‹œ ~17h** |

### 11.5 P3 ì ìˆ˜ ê²€ì¦

| í•­ëª© | ë°°ì  | Phase 2 | Phase 3 |
|------|------|---------|---------|
| ì†Œìš”ì‹œê°„ ëª…ì‹œ | 20ì  | 20ì  | 20ì  |
| ì…ì¶œë ¥ ìŠ¤í™ | 20ì  | 20ì  | 20ì  |
| ì„±ê³µ ê¸°ì¤€ | 20ì  | 20ì  | 20ì  |
| ì˜ì¡´ì„± ê·¸ë˜í”„ | 20ì  | 20ì  | 20ì  |
| íŒŒì¼ ë°°ì¹˜ | 10ì  | 10ì  | 10ì  |
| í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ | 10ì  | 10ì  | 10ì  |
| **ì´ì ** | **100ì ** | **100ì ** | **100ì ** |

---

## 12. ê²€ì¦ ì²´í¬ë¦¬ìŠ¤íŠ¸

### 12.1 P3 ì ìˆ˜ ê²€ì¦

| í•­ëª© | ë°°ì  | Phase 2 | Phase 3 |
|------|------|---------|---------|
| ì†Œìš”ì‹œê°„ ëª…ì‹œ | 20ì  | âœ… 20ì  | âœ… 20ì  |
| ì…ì¶œë ¥ ìŠ¤í™ | 20ì  | âœ… 20ì  | âœ… 20ì  |
| ì„±ê³µ ê¸°ì¤€ | 20ì  | âœ… 20ì  | âœ… 20ì  |
| ì˜ì¡´ì„± ê·¸ë˜í”„ | 20ì  | âœ… 20ì  | âœ… 20ì  |
| íŒŒì¼ ë°°ì¹˜ | 10ì  | âœ… 10ì  | âœ… 10ì  |
| í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ | 10ì  | âœ… 10ì  | âœ… 10ì  |
| **ì´ì ** | **100ì ** | **100ì ** | **100ì ** |

### 12.2 ì›ë¦¬ ì—°ê²° ê²€ì¦

| ê¸°ëŠ¥ | ê´€ë ¨ ì›ë¦¬ | ë¬¸ì„œ ì„¹ì…˜ | ê²€ì¦ |
|------|----------|----------|------|
| FaceZoneMap | Tì¡´/Uì¡´ ì •ì˜ | skin-physiology.md Â§2 | âœ… |
| SkinVitalityScore | í”¼ë¶€ í™œë ¥ ì§€í‘œ | skin-physiology.md Â§8 | âœ… |
| 12ì¡´ ë¶„í•  | ì–¼êµ´ ë¶„í•  ì•Œê³ ë¦¬ì¦˜ | image-processing.md Â§3 | âœ… |
| Gemini í”„ë¡¬í”„íŠ¸ | ì‹ ë¢°ë„ ê³„ì‚° | ai-inference.md Â§2 | âœ… |
| CorrelationAnalysis | ìƒí™œ ìš”ì¸ ìƒê´€ | cross-domain-synergy.md Â§4 | âœ… |

### 12.3 êµ¬í˜„ ê²€ì¦ ì²´í¬ë¦¬ìŠ¤íŠ¸

#### Phase 2 êµ¬í˜„ ì „
- [ ] analysis_images í…Œì´ë¸” ë§ˆì´ê·¸ë ˆì´ì…˜ ì¤€ë¹„
- [ ] PhotoReuseEligibility íƒ€ì… ì •ì˜
- [ ] Supabase Storage ë²„í‚· ì„¤ì • í™•ì¸

#### Phase 2 êµ¬í˜„ í›„
- [ ] ì‚¬ì§„ ì¬ì‚¬ìš© í”Œë¡œìš° E2E í…ŒìŠ¤íŠ¸
- [ ] PhotoOverlayMap SVG ë Œë”ë§ ê²€ì¦
- [ ] TrendChart 6ê°œì›” ë°ì´í„° í‘œì‹œ í™•ì¸
- [ ] BeforeAfterSlider ì´ì „ ë¶„ì„ ì—°ë™

#### Phase 3 êµ¬í˜„ ì „
- [ ] 12ì¡´ íƒ€ì… ì •ì˜ ì™„ë£Œ
- [ ] skin_diary_entries í…Œì´ë¸” ë§ˆì´ê·¸ë ˆì´ì…˜ ì¤€ë¹„
- [ ] Gemini 12ì¡´ í”„ë¡¬í”„íŠ¸ í…ŒìŠ¤íŠ¸

#### Phase 3 êµ¬í˜„ í›„
- [ ] DetailedFaceZoneMap 12ì¡´ ë Œë”ë§ ê²€ì¦
- [ ] SkinDiaryEntry CRUD í…ŒìŠ¤íŠ¸
- [ ] CorrelationAnalysis ìƒê´€ê³„ìˆ˜ ì •í™•ë„ ê²€ì¦
- [ ] 6ì¡´/12ì¡´ í† ê¸€ UX í…ŒìŠ¤íŠ¸

---

## 13. ë³€ê²½ ì´ë ¥

| ë²„ì „ | ë‚ ì§œ | ë³€ê²½ ë‚´ìš© |
|------|------|----------|
| 1.0 | 2026-01-09 | ì´ˆê¸° ì‘ì„± (Phase 1 ì„¤ê³„) |
| 1.1 | 2026-01-09 | P3 ì›ì ë¶„í•´ ì¶”ê°€ (Phase 2-3) |
| 2.0 | 2026-01-19 | ì›ë¦¬ ë¬¸ì„œ êµ¬ì²´ì  ì—°ê²°, ê²€ì¦ ì²´í¬ë¦¬ìŠ¤íŠ¸ ì¶”ê°€ |

---

**Author**: Claude Code
**Reviewed by**: (ê²€í†  ëŒ€ê¸°)
