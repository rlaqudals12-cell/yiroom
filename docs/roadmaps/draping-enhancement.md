# ë“œë ˆì´í•‘ ì‹œë®¬ë ˆì´ì…˜ ê³ ë„í™” ë¡œë“œë§µ

> **ëª¨ë“ˆ**: PC-1+ (í¼ìŠ¤ë„ì»¬ëŸ¬ ë“œë ˆì´í•‘)
> **í˜„ì¬ ìƒíƒœ**: ê¸°ë³¸ êµ¬í˜„ ì™„ë£Œ
> **ë¬¸ì„œ ì‘ì„±ì¼**: 2026-02-06

---

## í˜„ì¬ êµ¬í˜„ ìƒíƒœ

### ì™„ë£Œëœ ê¸°ëŠ¥

| ê¸°ëŠ¥                   | íŒŒì¼                      | ì„¤ëª…                          |
| ---------------------- | ------------------------- | ----------------------------- |
| ë“œë ˆì´í”„ ìƒ‰ìƒ ì˜¤ë²„ë ˆì´ | `drape-reflectance.ts`    | í•˜ë‹¨ 35% ì˜ì—­ì— ìƒ‰ìƒ ë¸”ë Œë”©   |
| ìƒë‹¨ ê·¸ë¼ë°ì´ì…˜ í˜ì´ë“œ | `applyDrapeColor()`       | 8% fadeZoneì—ì„œ 0.2â†’0.85 ì „í™˜ |
| ì²œ ì£¼ë¦„ íš¨ê³¼           | `getNoiseValue()`         | Â±6% ë…¸ì´ì¦ˆ ê¸°ë°˜ ë°ê¸° ë³€í™”     |
| ê¸ˆì† ë°˜ì‚¬ê´‘            | `applyMetalReflectance()` | ì‹¤ë²„/ê³¨ë“œë³„ ë°ê¸°/ì±„ë„ ì¡°ì •    |
| ë¹„ë„¤íŒ… íš¨ê³¼            | `applyVignette()`         | ê°€ì¥ìë¦¬ ì–´ë‘¡ê²Œ ì²˜ë¦¬          |
| ê· ì¼ë„ ì¸¡ì •            | `measureUniformity()`     | íœ˜ë„ í‘œì¤€í¸ì°¨ ê¸°ë°˜ ì ìˆ˜í™”     |
| 128ìƒ‰ íŒ”ë ˆíŠ¸           | `DrapeColorPalette.tsx`   | ì‹œì¦Œë³„ 16ìƒ‰ Ã— 8ë³€í˜•           |

### í˜„ì¬ ì•„í‚¤í…ì²˜

```
ì‚¬ìš©ì ì´ë¯¸ì§€
    â†“
MediaPipe FaceMesh (ëœë“œë§ˆí¬ ì¶”ì¶œ)
    â†“
createFaceMask() (ì–¼êµ´ ì˜ì—­ ë§ˆìŠ¤í¬)
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ applyDrapeColor()                    â”‚
â”‚ - HEX â†’ RGB ë³€í™˜                     â”‚
â”‚ - í•˜ë‹¨ 35% ì˜ì—­ë§Œ ì²˜ë¦¬                â”‚
â”‚ - ìƒë‹¨ fadeZone ê·¸ë¼ë°ì´ì…˜            â”‚
â”‚ - ë…¸ì´ì¦ˆ ê¸°ë°˜ ì£¼ë¦„ íš¨ê³¼               â”‚
â”‚ - faceMask ì™¸ë¶€ì—ë§Œ ìƒ‰ìƒ ì ìš©         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
applyMetalReflectance() (ì–¼êµ´ì— ë°˜ì‚¬ê´‘)
    â†“
applyVignette() (ê°€ì¥ìë¦¬ ì–´ë‘¡ê²Œ)
    â†“
Canvas ë Œë”ë§
```

---

## ê³ ë„í™” ìš°ì„ ìˆœìœ„

### Phase 1: ì‹œê°ì  ì‚¬ì‹¤ê° ê°œì„  (ê¶Œì¥)

#### 1.1 Perlin Noise ì£¼ë¦„ íš¨ê³¼

**í˜„ì¬**: ë‹¨ìˆœ ì‹œë“œ ê¸°ë°˜ ë…¸ì´ì¦ˆ (ê³ ì •ëœ íŒ¨í„´)
**ê°œì„ **: Perlin/Simplex Noiseë¡œ ë¶€ë“œëŸ¬ìš´ ì£¼ë¦„ íŒ¨í„´

```typescript
// ì˜ˆì‹œ: Simplex Noise ì ìš©
import { createNoise2D } from 'simplex-noise';

const noise2D = createNoise2D();
const foldEffect = 1 + noise2D(x * 0.05, localY * 0.05) * 0.1;
```

**ì¥ì **:

- ë” ìì—°ìŠ¤ëŸ¬ìš´ ì²œ ì§ˆê°
- ì—°ì†ì ì¸ ì£¼ë¦„ íŒ¨í„´
- ìŠ¤ì¼€ì¼ ì¡°ì ˆ ê°€ëŠ¥

#### 1.2 ì¡°ëª… ë°©í–¥ ë°˜ì˜

**í˜„ì¬**: ì „ì²´ ê· ì¼í•œ ë°ê¸° ë³€í™”
**ê°œì„ **: ì´ë¯¸ì§€ ë‚´ ì¡°ëª… ë°©í–¥ ê°ì§€ í›„ ë°˜ì˜

```typescript
// ì¡°ëª… ë°©í–¥ ì¶”ì • (ì–¼êµ´ ì™¼ìª½/ì˜¤ë¥¸ìª½ ë°ê¸° ë¹„êµ)
function estimateLightDirection(imageData: ImageData): 'left' | 'right' | 'center';

// ë“œë ˆì´í”„ì— ê·¸ë¦¼ì/í•˜ì´ë¼ì´íŠ¸ ì ìš©
function applyLightingToDrawpe(x: number, y: number, lightDir: 'left' | 'right' | 'center'): number;
```

#### 1.3 í”¼ë¶€í†¤ ë°˜ì‚¬ìƒ‰ ì‹œë®¬ë ˆì´ì…˜

**í˜„ì¬**: ë“œë ˆì´í”„ ìƒ‰ìƒì´ ì–¼êµ´ì— ì§ì ‘ ì˜í–¥ ì—†ìŒ
**ê°œì„ **: ë“œë ˆì´í”„ ìƒ‰ìƒì´ í”¼ë¶€ì— ì€ì€í•˜ê²Œ ë°˜ì‚¬

```typescript
// ì–¼êµ´ ì˜ì—­ í•˜ë‹¨ì— ë“œë ˆì´í”„ ë°˜ì‚¬ìƒ‰ ë¸”ë Œë”©
function applyColorCast(ctx, faceMask, drapeColor, intensity = 0.05);
```

**ì°¸ê³ **: `docs/principles/color-science.md` - ë“œë ˆì´í•‘ í…ŒìŠ¤íŠ¸ ì›ë¦¬

---

### Phase 2: ì‚¬ìš©ì ê²½í—˜ ê°œì„ 

#### 2.1 ì‹¤ì‹œê°„ ë¯¸ë¦¬ë³´ê¸° ìµœì í™”

**í˜„ì¬**: ìƒ‰ìƒ ì„ íƒ ì‹œ ì „ì²´ ìº”ë²„ìŠ¤ ë‹¤ì‹œ ê·¸ë¦¬ê¸°
**ê°œì„ **: Web Worker ë˜ëŠ” OffscreenCanvas í™œìš©

```typescript
// Web Workerì—ì„œ ë“œë ˆì´í”„ ì²˜ë¦¬
const worker = new Worker('/workers/drape-processor.js');
worker.postMessage({ image: imageData, color, faceMask });
```

#### 2.2 ë¹„êµ ë·° (Before/After)

**í˜„ì¬**: ë‹¨ì¼ ì´ë¯¸ì§€ë§Œ í‘œì‹œ
**ê°œì„ **: ìŠ¬ë¼ì´ë”ë¡œ ì›ë³¸/ë“œë ˆì´í”„ ë¹„êµ

```typescript
// ë¹„êµ ìŠ¬ë¼ì´ë” ì»´í¬ë„ŒíŠ¸
<CompareSlider
  before={originalImage}
  after={drapedImage}
  position={50} // 0-100%
/>
```

#### 2.3 ì‹œì¦Œë³„ ì¶”ì²œ ìƒ‰ìƒ í•˜ì´ë¼ì´íŠ¸

**í˜„ì¬**: ì „ì²´ 128ìƒ‰ ë™ì¼ í‘œì‹œ
**ê°œì„ **: ì‚¬ìš©ì ì‹œì¦Œì— ë§ëŠ” ìƒ‰ìƒ ê°•ì¡°

```typescript
// ì‚¬ìš©ì ì‹œì¦Œ ê¸°ë°˜ í•„í„°ë§
const userSeason = 'spring'; // ë¶„ì„ ê²°ê³¼ì—ì„œ
const recommendedColors = colors.filter((c) => c.season === userSeason);
```

---

### Phase 3: ê³ ê¸‰ ê¸°ëŠ¥ (ì¥ê¸°)

#### 3.1 3D ì²œ ì‹œë®¬ë ˆì´ì…˜

ë¬¼ë¦¬ ê¸°ë°˜ ì²œ ì‹œë®¬ë ˆì´ì…˜ (Three.js cloth simulation)

```typescript
// Three.js Cloth ì˜ˆì‹œ
import { ClothSimulation } from '@/lib/analysis/cloth-simulation';

const cloth = new ClothSimulation({
  width: 512,
  height: 512,
  color: drapeColor,
  gravity: { x: 0, y: 0.5, z: 0 },
});
```

#### 3.2 AR ë“œë ˆì´í•‘ (ëª¨ë°”ì¼)

ì¹´ë©”ë¼ ì‹¤ì‹œê°„ í”¼ë“œì— ë“œë ˆì´í”„ ì˜¤ë²„ë ˆì´

```typescript
// Expo Camera + Canvas ì˜¤ë²„ë ˆì´
<Camera>
  <DrapeOverlay color={selectedColor} />
</Camera>
```

#### 3.3 ì˜ìƒ í…œí”Œë¦¿

ë“œë ˆì´í”„ ëŒ€ì‹  ì‹¤ì œ ì˜ìƒ í˜•íƒœ ì ìš©

```typescript
// ì˜ìƒ í…œí”Œë¦¿ ë¼ì´ë¸ŒëŸ¬ë¦¬
const templates = ['tshirt', 'blouse', 'sweater', 'jacket'];
```

---

## ê¸°ìˆ  ì°¸ê³  ìë£Œ

### ì›ë¦¬ ë¬¸ì„œ

- [color-science.md](../principles/color-science.md) - ë“œë ˆì´í•‘ ë°˜ì‚¬ìƒ‰ ì´ë¡ 
- [image-processing.md](../principles/image-processing.md) - ì´ë¯¸ì§€ ì²˜ë¦¬ ê¸°ë³¸

### ê´€ë ¨ ì½”ë“œ

| íŒŒì¼                                               | ìš©ë„                 |
| -------------------------------------------------- | -------------------- |
| `lib/analysis/drape-reflectance.ts`                | ë“œë ˆì´í”„ í•µì‹¬ ë¡œì§   |
| `lib/analysis/canvas-utils.ts`                     | ìº”ë²„ìŠ¤ ìœ í‹¸ë¦¬í‹°      |
| `lib/analysis/face-landmark.ts`                    | ì–¼êµ´ ëœë“œë§ˆí¬/ë§ˆìŠ¤í¬ |
| `components/analysis/visual/DrapeSimulator.tsx`    | ì‹œë®¬ë ˆì´í„° UI        |
| `components/analysis/visual/DrapeColorPalette.tsx` | ìƒ‰ìƒ íŒ”ë ˆíŠ¸ UI       |

### ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ í›„ë³´

| ë¼ì´ë¸ŒëŸ¬ë¦¬             | ìš©ë„          | í¬ê¸°         |
| ---------------------- | ------------- | ------------ |
| `simplex-noise`        | Perlin Noise  | ~5KB         |
| `three.js`             | 3D ë Œë”ë§     | ~500KB       |
| `@mediapipe/face_mesh` | ì–¼êµ´ ëœë“œë§ˆí¬ | ì´ë¯¸ ì‚¬ìš© ì¤‘ |

---

## í‰ê°€ ê¸°ì¤€

### ìì—°ìŠ¤ëŸ¬ì›€ ì²™ë„

| ë ˆë²¨ | ì„¤ëª…                 | í˜„ì¬       |
| ---- | -------------------- | ---------- |
| 1    | ë‹¨ìƒ‰ ì˜¤ë²„ë ˆì´        | -          |
| 2    | ê·¸ë¼ë°ì´ì…˜ ê²½ê³„      | âœ…         |
| 3    | ë…¸ì´ì¦ˆ ê¸°ë°˜ ì§ˆê°     | âœ…         |
| 4    | Perlin Noise ì£¼ë¦„    | ğŸ”² Phase 1 |
| 5    | ì¡°ëª… ë°˜ì˜            | ğŸ”² Phase 1 |
| 6    | í”¼ë¶€ ë°˜ì‚¬ìƒ‰          | ğŸ”² Phase 1 |
| 7    | ë¬¼ë¦¬ ê¸°ë°˜ ì‹œë®¬ë ˆì´ì…˜ | ğŸ”² Phase 3 |

### ì„±ëŠ¥ ëª©í‘œ

| í•­ëª©             | í˜„ì¬        | ëª©í‘œ   |
| ---------------- | ----------- | ------ |
| ìƒ‰ìƒ ë¯¸ë¦¬ë³´ê¸°    | ~50ms       | < 30ms |
| ì „ì²´ íŒ”ë ˆíŠ¸ ë¶„ì„ | ~3s (128ìƒ‰) | < 2s   |
| ë©”ëª¨ë¦¬ ì‚¬ìš©      | ~20MB       | < 30MB |

---

## ë‹¤ìŒ ë‹¨ê³„ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] Phase 1.1: Perlin Noise ë¼ì´ë¸ŒëŸ¬ë¦¬ í‰ê°€
- [ ] Phase 1.2: ì¡°ëª… ë°©í–¥ ì¶”ì • ì•Œê³ ë¦¬ì¦˜ ì—°êµ¬
- [ ] Phase 1.3: ë°˜ì‚¬ìƒ‰ ê°•ë„ ìµœì ê°’ í…ŒìŠ¤íŠ¸
- [ ] Phase 2.1: Web Worker ì„±ëŠ¥ ë¹„êµ
- [ ] Phase 2.2: CompareSlider ì»´í¬ë„ŒíŠ¸ ì„¤ê³„

---

**ì‘ì„±ì**: Claude Code
**ë²„ì „**: 1.0
