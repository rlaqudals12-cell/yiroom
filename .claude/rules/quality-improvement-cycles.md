# 품질 개선 사이클 (Quality Improvement Cycles)

> PC-1(89→100)에서 검증된 반복적 품질 개선 패턴
> 관련 명령어: `/quality-improve`
> 채점 기준: `.claude/agents/yiroom-code-quality.md` 모듈 품질 점수 참조

---

## 핵심 원칙

모든 모듈 품질 개선은 **3단계 사이클**로 진행한다.
각 사이클은 독립적으로 배포 가능하며, 이전 사이클 완료 후 다음으로 진행한다.

```
현재 점수 측정 → Cycle 1 → 중간 측정 → Cycle 2 → 중간 측정 → Cycle 3 → 최종 측정
```

---

## 적용 기준

| 현재 등급  | 전략                             | 예상 사이클 |
| ---------- | -------------------------------- | ----------- |
| F (0-49)   | P1(궁극의 형태) 재정의 → 3사이클 | 3회 (전체)  |
| C (50-69)  | 긴급 3사이클                     | 3회 (전체)  |
| B (70-84)  | 2사이클 (아래 조건 참조)         | 2회         |
| A (85-94)  | 1사이클 (아래 조건 참조)         | 1회         |
| S (95-100) | 유지보수 (사이클 불필요)         | 0회         |

### 사이클 선택 세부 로직

**B등급 (70-84): Cycle 1 생략 조건**

- 기능 완성도 ≥ 18/20 이고 코드 품질 ≥ 13/15 → Cycle 1 생략, Cycle 2→3 진행
- 그 외 → Cycle 1부터 시작 (3사이클 전체)

**A등급 (85-94): Cycle 선택 기준**

- 사용자 경험 < 16/20 또는 UX/접근성 < 12/15 → Cycle 2 진행
- 테스트 < 12/15 또는 문서화 < 4/5 → Cycle 3 진행
- 둘 다 해당 → 점수가 낮은 영역의 사이클 먼저 진행

**F등급 (0-49): 재설계 절차**

1. P1(궁극의 형태) 재정의 — 현재 구현이 목표의 몇 %인지 재평가
2. 핵심 원인 분석 — 왜 F등급인가? (스펙 부재? 구조 문제? 기술 부채?)
3. 재설계 범위 결정 — 전체 재작성 vs 핵심 모듈만 교체
4. P7 순서 재시작 — 리서치 → 원리 → ADR → 스펙 → 구현
5. 재설계 후 3사이클 진행

---

## Cycle 1: 기능 완성 + 핵심 버그

> 기초를 다지는 단계. "작동하는가?"

| 점검 항목      | 질문                                                    |
| -------------- | ------------------------------------------------------- |
| P1 궁극의 형태 | 이 모듈의 궁극의 형태가 정의되어 있는가? 현재 몇 %인가? |
| 스펙 대비 누락 | 정의된 기능이 모두 구현되었는가?                        |
| Critical 버그  | 핵심 플로우를 막는 버그가 있는가?                       |
| TypeScript     | strict 모드 통과하는가?                                 |
| P8 경계        | barrel export, 단방향 의존성 준수하는가?                |

> **P7 주의**: 누락 기능 구현 시 P7 순서(리서치→원리→ADR→스펙→구현)를 준수한다.
> 원리 문서(`docs/principles/`)나 스펙(`docs/specs/`)이 없으면 먼저 작성 후 구현한다.

**완료 기준**: typecheck + lint + test 통과, 핵심 기능 100% 동작

---

## Cycle 2: 사용자 경험 + UX 정제

> 사용자의 눈으로 보는 단계. "사용자가 목표를 쉽게 달성할 수 있는가?"

### 사용자 관점 평가 (핵심)

> **타겟 사용자**: 10-30대, 뷰티/웰니스에 관심 있는 사용자.
> 전문 지식 없이도 이해할 수 있는 용어와 플로우인지 검증한다.

| 관점            | 질문                                  | 평가 방법                               |
| --------------- | ------------------------------------- | --------------------------------------- |
| **사용자 여정** | 목표까지 몇 단계? 불필요한 단계는?    | 플로우 다이어그램으로 검증, 단계 수 ≤ 5 |
| **인지적 부담** | 한 화면에 과도한 정보/선택지?         | 7±2 법칙 (한 단위 정보 7개 이하)        |
| **멘탈 모델**   | 버튼/탭/용어가 사용자 기대와 일치?    | 전문 용어 0개 (사용자 대면 텍스트)      |
| **가치 전달**   | 이 기능이 해결하는 문제가 명확?       | 첫 화면에서 가치가 드러나는지           |
| **에러 경험**   | 실패 시 사용자가 뭘 해야 하는지 명확? | 에러 메시지 + 재시도 경로 존재          |

### UX 표면 점검

| 항목      | 기준                             |
| --------- | -------------------------------- |
| 로딩 상태 | 스켈레톤/스피너 존재             |
| 에러 상태 | 사용자 친화적 메시지 + 복구 경로 |
| 빈 상태   | 적절한 안내 및 CTA               |
| 접근성    | data-testid, aria-label          |
| 한국어    | 자연스럽고 정중한 표현           |
| 반응성    | 모바일 레이아웃 정상             |

**완료 기준** (측정 가능):

- 목표 달성까지 단계 수 ≤ 5 (또는 기존 대비 감소)
- 한 화면 정보 단위 ≤ 7개 (7±2 법칙)
- 모든 에러 상태에 사용자 메시지 + 재시도/복구 경로 존재
- 로딩/에러/빈 상태 3종 모두 구현
- 전문 용어 0개 (사용자 대면 텍스트)
- 이룸 타겟 사용자(10-30대, 뷰티/웰니스 관심) 관점에서 용어와 플로우 검증

---

## Cycle 3: 시스템 품질

> 장기 유지보수를 위한 단계. "미래에도 안전한가?"

| 항목        | 기준                    |
| ----------- | ----------------------- |
| 단위 테스트 | 핵심 함수 커버리지      |
| 엣지케이스  | null, 빈 배열, 타임아웃 |
| 원리 문서   | docs/principles/ 동기화 |
| ADR         | 기술 결정 기록          |

**완료 기준**: 테스트 통과, 문서 최신화

---

## 사이클 간 독립성

각 사이클은 독립적으로 커밋/배포 가능해야 한다:

```
Cycle 1 완료 → 커밋 → 검증
Cycle 2 완료 → 커밋 → 검증
Cycle 3 완료 → 커밋 → 검증
```

사이클 간 롤백이 서로 영향을 주지 않아야 한다.

---

## 검증된 사례

| 모듈 | Before | After   | 소요           |
| ---- | ------ | ------- | -------------- |
| PC-1 | 89 (A) | 100 (S) | 3사이클, 1세션 |

---

## 관련 문서

- [/quality-improve 명령어](../commands/quality-improve.md) - 실행 방법
- [모듈 품질 채점](../agents/yiroom-code-quality.md) - 100점 채점 기준
- [제1원칙](./00-first-principles.md) - P0~P8 원칙

---

**Version**: 1.1 | **Updated**: 2026-02-06 | 검토 반영: 사이클 선택 로직, 완료 기준 객관화, P1/P7 연결, 타겟 사용자, F등급 재설계 절차
