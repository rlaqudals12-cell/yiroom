# 원리 문서 가이드

> 기술 원리 문서화 규칙 (P2: 원리 우선)

## 핵심 원칙

```
모든 구현은 문서화된 원리에서 파생되어야 한다.
원리 없는 코드는 "왜 이렇게 했지?"를 유발한다.
```

---

## 워크플로우

```
┌─────────────────────────────────────────────────────────────────┐
│                     리서치 → 구현 워크플로우                      │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  1. Deep Research                                               │
│     └── 기술 스펙, 알고리즘, 학술 자료 조사                     │
│                           ↓                                     │
│  2. 원리 문서화 (docs/principles/)                              │
│     └── 조사한 내용의 핵심 원리 정리                            │
│     └── ⚠️ 이 단계 생략 금지                                    │
│                           ↓                                     │
│  3. ADR 작성 (docs/adr/)                                        │
│     └── 기술 선택 결정, 대안 기록                               │
│                           ↓                                     │
│  4. 스펙 작성 (docs/specs/)                                     │
│     └── 구현 스펙, 입출력 정의                                  │
│                           ↓                                     │
│  5. 구현                                                        │
│     └── 코드 작성, 테스트                                       │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

## 원리 문서 위치

```
docs/principles/
├── README.md              # 인덱스
├── color-science.md       # 색채학 (PC-1, 퍼스널컬러)
├── skin-physiology.md     # 피부 생리학 (S-1, 피부분석)
├── body-mechanics.md      # 체형 역학 (C-1, 체형분석)
├── image-processing.md    # 이미지 처리 (CIE-1~4)
├── ai-inference.md        # AI 추론 (Gemini 분석)
├── nutrition-science.md   # 영양학 (N-1, 영양분석)
└── [new-domain].md        # 새 도메인 추가 시
```

---

## 모듈별 필수 원리 문서

| 모듈                     | 필수 원리 문서       | 핵심 원리                        |
| ------------------------ | -------------------- | -------------------------------- |
| **PC-1** (퍼스널컬러)    | color-science.md     | Lab 색공간, 웜톤/쿨톤 이론       |
| **S-1** (피부분석)       | skin-physiology.md   | 피부 구조, T존/U존, 피지 분비    |
| **C-1** (체형분석)       | body-mechanics.md    | 골격 비율, 체형 분류 기준        |
| **CIE-1~4** (이미지엔진) | image-processing.md  | Laplacian sharpness, 색온도 보정 |
| **N-1** (영양분석)       | nutrition-science.md | 영양소 균형, 권장 섭취량         |
| **AI 분석**              | ai-inference.md      | VLM 프롬프팅, 신뢰도 계산        |

---

## 체크 포인트

### 리서치 완료 후 질문

```
□ 조사한 기술 원리가 docs/principles/에 문서화되었나?
□ 원리 문서에 수학적/과학적 근거가 포함되었나?
□ 원리 → 알고리즘 → 코드 흐름이 명확한가?
```

### 스펙 작성 전 질문

```
□ 관련 원리 문서가 존재하나?
□ 원리 문서를 먼저 작성해야 하나?
□ ADR에서 원리 문서를 참조하고 있나?
```

### 구현 전 질문

```
□ 이 코드가 어떤 원리를 구현하는가?
□ 원리 문서와 구현이 일치하는가?
□ 원리를 위반하는 부분이 있다면 문서화되었나?
```

---

## 원리 문서 템플릿

```markdown
# [도메인명] 원리

> 이 문서는 [모듈명]의 기반이 되는 기본 원리를 설명한다.

## 1. 핵심 개념

### 1.1 [개념명]

[학문적/과학적 정의]

## 2. 수학적/물리학적 기반

### 2.1 [공식/법칙명]
```

[수식 또는 공식]

```

### 2.2 적용 방법
[원리를 코드로 변환하는 방법]

## 3. 구현 도출

### 3.1 원리 → 알고리즘
[원리에서 알고리즘을 도출하는 논리]

### 3.2 알고리즘 → 코드
[알고리즘의 코드 구현 방향]

## 4. 검증 방법

[구현이 원리를 위반하지 않았는지 확인하는 방법]

## 5. 참고 자료

- [논문/문서 링크]
```

---

## ADR과의 관계

```
Principles (원리)     ADR (결정)
─────────────────     ──────────
"Lab 색공간이란?"  →  "왜 RGB 대신 Lab을 선택했나?"
"피부 구조란?"     →  "왜 6존 분석을 선택했나?"
"sharpness란?"     →  "왜 Laplacian을 선택했나?"

원리 = 과학적 기초 (What is it?)
ADR = 기술 선택 (Why this choice?)
```

### ADR 작성 시 원리 연결

```markdown
## 관련 문서

- [원리: Lab 색공간](../principles/color-science.md#lab-색공간)
- [스펙: PC-1 분석](../specs/pc-1.md)
```

---

## 변경 이력

| 버전 | 날짜       | 변경 내용 |
| ---- | ---------- | --------- |
| 1.0  | 2026-01-15 | 초기 버전 |

---

**Version**: 1.0 | **Updated**: 2026-01-15
**관련 규칙**: [00-first-principles.md](./00-first-principles.md) → P2: 원리 우선
