---
description: 계획된 작업 빠른 구현 + 검증
---

# /qcode 명령어

계획된 작업을 빠르게 구현하고 검증합니다.

## 연동 에이전트

- **yiroom-code-quality**: 코드 품질 검사
- **yiroom-test-writer**: 테스트 자동 작성

---

## 실행 워크플로우

```mermaid
graph TD
    A[/qcode 호출] --> B{계획 승인됨?}
    B -->|No| C[/qplan 먼저 실행]
    B -->|Yes| D[코드 구현]
    D --> E[typecheck]
    E -->|Fail| F[자동 수정 시도]
    E -->|Pass| G[lint]
    F --> E
    G -->|Fail| H[자동 수정 시도]
    G -->|Pass| I[테스트 실행]
    H --> G
    I -->|Fail| J{재시도 < 3?}
    I -->|Pass| K[포맷팅]
    J -->|Yes| L[테스트 수정]
    J -->|No| M[수동 수정 필요]
    L --> I
    K --> N[결과 보고]
```

---

## 실행 내용

### 1. 사전 조건 확인

| 조건        | 확인             |
| ----------- | ---------------- |
| /qplan 승인 | 계획 없으면 거부 |
| 관련 스펙   | SDD 존재 확인    |
| 기존 테스트 | 깨진 테스트 없음 |

### 2. 코드 구현

**구현 원칙**:

- 계획된 파일만 수정
- 기존 패턴 준수
- data-testid 적용
- 한국어 주석 (왜 설명)

### 3. 자동 검증 파이프라인

```bash
# 1. 타입 검사
npm run typecheck

# 2. 린트 (자동 수정)
npm run lint -- --fix

# 3. 관련 테스트
npm run test -- --related

# 4. 포맷팅
npx prettier --write [변경 파일]
```

### 4. 자동 재시도 로직

| 단계      | 실패 시          | 최대 재시도 |
| --------- | ---------------- | ----------- |
| typecheck | 타입 오류 수정   | 3회         |
| lint      | 린트 규칙 적용   | 2회         |
| test      | 테스트 코드 수정 | 3회         |

**재시도 불가 조건**:

- 스키마 변경 필요
- 외부 의존성 문제
- 아키텍처 변경 필요

---

## 출력 형식

```markdown
## ✅ 구현 완료

### 변경된 파일

| 파일   | 변경 유형 | 라인 수 |
| ------ | --------- | ------- |
| [파일] | 신규/수정 | +X/-Y   |

### 검증 결과

| 단계     | 결과  | 시도 |
| -------- | ----- | ---- |
| 타입체크 | ✅/❌ | X회  |
| 린트     | ✅/❌ | X회  |
| 테스트   | ✅/❌ | X회  |
| 포맷팅   | ✅    | 1회  |

### 테스트 커버리지

- 변경 파일: X%
- 전체: X%

### 다음 단계

- [ ] 수동 테스트 (브라우저)
- [ ] /qcheck 실행 (권장)
- [ ] 커밋
```

---

## 옵션

| 옵션            | 설명                     |
| --------------- | ------------------------ |
| `--auto-commit` | 성공 시 자동 커밋        |
| `--skip-tests`  | 테스트 건너뛰기 (비권장) |
| `--dry-run`     | 실제 변경 없이 미리보기  |
| `--verbose`     | 상세 로그 출력           |

---

## 에러 처리

### 복구 불가 에러

```markdown
## ❌ 구현 실패

### 실패 원인

- [에러 메시지]

### 필요 조치

- [ ] [수동 수정 필요 항목]

### 권장 명령어

- /qplan [재분석]
- /sisyphus [복잡한 작업]
```

---

## 사용 예시

```bash
# 기본 사용 (계획 승인 후)
/qcode

# 자동 커밋 포함
/qcode --auto-commit

# 테스트 건너뛰기 (긴급 시)
/qcode --skip-tests

# 미리보기
/qcode --dry-run
```

---

## 관련 명령어 플로우

```
/qplan → 승인 → /qcode → /qcheck → 커밋
```

---

**Version**: 2.0 | **Updated**: 2026-01-19
